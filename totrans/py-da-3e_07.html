<html><head></head><body>
        <section>

                            <header class="header-title chapter-title">
                    Data Visualization
                </header>
            
            <article>
                
<p>Data visualization is the <span>initial move in the data analysis system toward easily understanding and communicating information. It represents information and data in graphical form using visual elements such as charts, graphs, plots, and maps. It helps analysts to understand patterns, trends, outliers, distributions, and relationships. Data visualization is an efficient way to deal with a large number of datasets.</span></p>
<p>Python offers various libraries for data visualization, <span>such as Matplotlib, Seaborn, and Bokeh. In this chapter, we will first focus on Matplotlib, which is the basic Python library for visualization. After Matplotlib, we will explore Seaborn, which uses Matplotlib and offers high-level and advanced statistical plots. In the end, we will work on interactive data visualization using Bokeh. We will also explore <kbd>pandas</kbd> plotting. The following is a list of topics that will be covered in this chapter:</span></p>
<ul>
<li>Visualization using Matplotlib</li>
<li>Advanced visualization using the Seaborn package</li>
<li>Interactive visualization with Bokeh</li>
</ul>
<h1 id="uuid-c0a379c2-1ae9-4015-a86a-4a9023bffce8">Technical requirements</h1>
<p>This chapter has the following technical requirements:</p>
<ul>
<li>You can find the code and the datasets at the following GitHub link: <a href="https://github.com/PacktPublishing/Python-Data-Analysis-Third-Edition/tree/master/Chapter05">https://github.com/PacktPublishing/Python-Data-Analysis-Third-Edition/tree/master/Chapter05</a>.</li>
<li>All the code blocks are available in the <kbd>ch5.ipynb</kbd> file. </li>
<li>This chapter uses only one CSV file (<kbd>HR_comma_sep.csv</kbd>) for practice purposes.</li>
<li>In this chapter, we will use the Matplotlib, <kbd>pandas</kbd>, Seaborn,<span> and Bokeh Python libraries.</span></li>
</ul>
<h1 id="uuid-b22ae219-f154-457a-840e-c996d81b8912">Visualization <span>using Matplotlib</span></h1>
<p>As we know, a picture speaks a thousand words. Humans understand visual things<span> </span><span>better</span><span>. Visualization helps to present things to any kind of audience and can easily explain a complex phenomenon in layman's terms. Python offers a couple of visualization libraries, such as Matplotlib, Seaborn, and Bokeh.</span></p>
<p>Matplotlib is the most popular Python module for data visualization. It is a base library for most of the advanced Python visualization modules, such as Seaborn. It offers flexible and easy-to-use built-in functions for creating figures and graphs.</p>
<p>In Anaconda, Matplotlib is already installed. If you still find an error, you can install it in the following ways.</p>
<p>We can install Matplotlib with <kbd>pip</kbd> as follows:</p>
<pre>pip install matplotlib</pre>
<p>For Python 3, we can use the following command:</p>
<pre>pip3 install matplotlib</pre>
<p>You can also simply install Matplotlib from your terminal or Command Prompt using the following command:</p>
<pre>conda install matplotlib</pre>
<p>To create a very basic plot in Matplotlib, we need to invoke the <kbd>plot()</kbd> function in the <kbd>matplotlib.pyplot</kbd> subpackage. This function produces a two-dimensional plot for a single list or multiple lists of points with known <em>x</em> and <em>y</em> coordinates.</p>
<p>The following demo code is in the <kbd>ch5.ipynb</kbd> file in this book's code bundle, which you can find at the following GitHub link: <a href="https://github.com/PacktPublishing/Python-Data-Analysis-Third-Edition/blob/master/Chapter05/Ch5.ipynb">https://github.com/PacktPublishing/Python-Data-Analysis-Third-Edition/blob/master/Chapter05/Ch5.ipynb</a>.<a href="https://github.com/PacktPublishing/Python-Data-Analysis-Third-Edition/blob/master/Python-Data-Analysis-Third-Edition/Ch5/Ch5.ipynb"/></p>
<p>Let's see a small demo code for visualizing the line plot:</p>
<pre># Add the essential library matplotlib<br/>import matplotlib.pyplot as plt<br/>import numpy as np<br/><br/># create the data<br/>a = np.linspace(0, 20)<br/><br/># Draw the plot<br/>plt.plot(a, a + 0.5, label='linear')<br/><br/># Display the chart<br/>plt.show()</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/613c4c85-5c82-45fd-973a-38d2af386454.png" style=""/></div>
<p>In the preceding code block, first, we are importing the Matplotlib and NumPy modules. After this, we are creating the data using the <kbd>linespace()</kbd> function of NumPy and plotting this data using the <kbd>plot()</kbd> function of Matplotlib. Finally, we are displaying the figure using the <kbd>show()</kbd> function. </p>
<p>There are two basic components of a plot: the figure and the axes. The figure is a container on which everything is drawn. It contains components such as plots, subplots, axes, titles, and a legend. In the next section, we will focus on these components, which act like accessories for charts.</p>
<h2 id="uuid-8ddee67d-fbbc-4c3a-9bf4-e2a45e7fc740">Accessories for charts</h2>
<p>In the <kbd>matplotlib</kbd> module, we can add titles and axes labels to a graph. We can add a title using <kbd>plt.title()</kbd> and labels using <kbd>plt.xlabel()</kbd> and <kbd>plt.ylabel()</kbd>. </p>
<p>Multiple graphs mean multiple objects, such as line, bar, and scatter. Points of different series can be shown on a single graph. Legends or graph series reflect the <em>y</em> axis. A legend is a box that appears on either the right or left side of a graph and shows what each element of the graph represents. Let's see an example where we see how to use these accessories in our charts: </p>
<pre># Add the required libraries<br/>import matplotlib.pyplot as plt<br/><br/># Create the data<br/>x = [1,3,5,7,9,11]<br/>y = [10,25,35,33,41,59]<br/><br/># Let's plot the data<br/>plt.plot(x, y,label='Series-1', color='blue')<br/><br/># Create the data<br/>x = [2,4,6,8,10,12]<br/>y = [15,29,32,33,38,55]<br/><br/># Plot the data<br/>plt.plot(x, y, label='Series-2', color='red')<br/><br/># Add X Label on X-axis<br/>plt.xlabel("X-label")<br/><br/># Add X Label on X-axis<br/>plt.ylabel("Y-label")<br/><br/># Append the title to graph<br/>plt.title("Multiple Python Line Graph")<br/><br/># Add legend to graph<br/>plt.legend()<br/><br/># Display the plot<br/>plt.show()</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/0a7a1c2c-2d44-4f82-8a8f-e7170c513546.png" style=""/></div>
<p>In the preceding graph, two lines are shown on a single graph. We have used two extra parameters – <kbd>label</kbd> and <kbd>color</kbd> – in the <kbd>plot()</kbd> function. The <kbd>label</kbd> parameter defines the name of the series and <kbd>color</kbd> defines the color of the line graph. In the upcoming sections, we will focus on different types of plots. We will explore a scatter plot in the next section. </p>
<h2 id="uuid-e003cbc9-7676-461e-9ff8-8429600052de">Scatter plot</h2>
<p>Scatter plots draw data points using Cartesian coordinates to show the values of numerical values. They also represent the relationship between two numerial values. We can create a scatter plot in Matplotlib using the <kbd>scatter()</kbd> function, as follows:</p>
<pre># Add the essential library matplotlib<br/>import matplotlib.pyplot as plt<br/><br/># create the data<br/>x = [1,3,5,7,9,11]<br/>y = [10,25,35,33,41,59]<br/><br/># Draw the scatter chart<br/>plt.scatter(x, y, c='blue', marker='*',alpha=0.5)<br/><br/># Append the label on X-axis<br/>plt.xlabel("X-label")<br/><br/># Append the label on X-axis<br/>plt.ylabel("Y-label")<br/><br/># Add the title to graph<br/>plt.title("Scatter Chart Sample")<br/><br/># Display the chart<br/>plt.show()</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/00c7d96b-b3b3-4957-8fbd-3411ec219f66.png" style=""/></div>
<p class="mce-root">In the preceding scatter plot, the <kbd>scatter()</kbd> function takes x-axis and y-axis values. In our example, we are plotting two lists: <kbd>x</kbd> and <kbd>y</kbd>. We can also use optional parameters such as <kbd>c</kbd> for color, <kbd>alpha</kbd> for the transparency of the markers, ranging between 0 and 1, and <kbd>marker</kbd> for the shape of the points in the scatter plot, such as <kbd>*</kbd>, <kbd>o</kbd>, or any other symbol. In the next section, we will focus on the line plot. </p>
<h2 id="uuid-2b022760-0de9-4e47-b9da-d63c7eb85cce" class="mce-root">Line plot</h2>
<p>A line plot is a chart that displays a line between two variables. It has a sequence of data points joined by a segment:</p>
<pre># Add the essential library matplotlib<br/>import matplotlib.pyplot as plt<br/><br/># create the data<br/>x = [1,3,5,7,9,11]<br/>y = [10,25,35,33,41,59]<br/><br/># Draw the line chart<br/>plt.plot(x, y)<br/><br/># Append the label on X-axis<br/>plt.xlabel("X-label")<br/><br/># Append the label on X-axis<br/>plt.ylabel("Y-label")<br/><br/># Append the title to chart<br/>plt.title("Line Chart Sample")<br/><br/># Display the chart<br/>plt.show()</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/d4fe2dd4-3d3a-4999-88b1-be9b0fadee7e.png" style=""/></div>
<p>In the preceding line plot program, the <kbd>plot()</kbd> function takes x-axis and y-axis values. <span>In the next section, we will learn how to plot a pie chart.  </span></p>
<h2 id="uuid-ca6fdc53-3813-4520-9e38-e70f894b6173">Pie plot</h2>
<p>A pie plot is a circular graph that is split up into wedge-shaped pieces. Each piece is proportionate to the value it represents. The total value of the pie is 100 percent:</p>
<pre># Add the essential library matplotlib<br/>import matplotlib.pyplot as plt<br/><br/># create the data<br/>subjects = ["Mathematics","Science","Communication Skills","Computer Application"]<br/>scores = [85,62,57,92]<br/><br/># Plot the pie plot<br/>plt.pie(scores,<br/>        labels=subjects,<br/>        colors=['r','g','b','y'],<br/>        startangle=90,<br/>        shadow= True,<br/>        explode=(0,0.1,0,0),<br/>        autopct='%1.1f%%')<br/><br/># Add title to graph<br/>plt.title("Student Performance")<br/><br/># Draw the chart<br/>plt.show()</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/1d09425f-b30d-4870-a971-4b8d6f54fb61.png"/></div>
<p>In the preceding code of the pie chart, we specified <kbd>values</kbd>, <kbd>labels</kbd>, <kbd>colors</kbd>, <kbd>startangle</kbd>, <kbd>shadow</kbd>, <kbd>explode</kbd>, and <kbd>autopct</kbd>. In our example, <kbd>values</kbd> is the scores of the student in four subjects and <kbd>labels</kbd> is the list of subject names. We can also specify the color list for the individual subject scores. The <kbd>startangle</kbd> parameter specifies the first value angle, which is 90 degrees; this means the first line is vertical.</p>
<p>Optionally, we can also use the <kbd>shadow</kbd> parameter to specify the shadow <span>of the pie slice and the <kbd>explode</kbd> parameter to pull out a pie slice list of the binary value. If we want to pull out a second pie slice, then a tuple of values would be (0, 0.1, 0, 0). Let's now jump to the bar plot. </span></p>
<h2 id="uuid-b459b87e-66f1-4ce6-9a17-10bbbdee44ca">Bar plot</h2>
<p>A bar plot is a visual tool to compare the values of various groups. It can be drawn horizontally or vertically. We can create a bar graph using the <kbd>bar()</kbd> function:</p>
<pre># Add the essential library matplotlib<br/>import matplotlib.pyplot as plt<br/><br/># create the data<br/>movie_ratings = [1,2,3,4,5]<br/>rating_counts = [21,45,72,89,42]<br/><br/># Plot the data<br/>plt.bar(movie_ratings, rating_counts, color='blue')<br/><br/># Add X Label on X-axis<br/>plt.xlabel("Movie Ratings")<br/><br/># Add X Label on X-axis<br/>plt.ylabel("Rating Frequency")<br/><br/># Add a title to graph<br/>plt.title("Movie Rating Distribution")<br/><br/># Show the plot<br/>plt.show()</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/f04bf569-db9a-4dd8-ba18-9bfbd9a11cb3.png"/></div>
<p>In the preceding bar chart program, the <kbd>bar()</kbd> function takes <em>x</em>-axis values, <em>y</em>-axis values, and a color. In our example, we are plotting movie ratings and <span>their frequency. Movie ratings are on the <em>x</em> axis and the rating frequency is on the <em>y</em> axis. We can also specify the color of the bars in the bar graph using the <kbd>color</kbd> parameter. Let's see another variant of bar plot in the next subsection.</span></p>
<h2 id="uuid-4b3297ed-5365-4ad4-b71e-793488b1f4dc">Histogram plot</h2>
<p>A histogram shows the distribution of a numeric variable. We create a histogram using the <kbd>hist()</kbd> method. It shows the probability distribution of a continuous variable. A histogram only works on a single variable while a bar graph works on two variables:</p>
<pre># Add the essential library<br/>import matplotlib.pyplot as plt<br/><br/># Create the data<br/>employee_age = [21,28,32,34,35,35,37,42,47,55]<br/><br/># Create bins for histogram<br/>bins = [20,30,40,50,60]<br/><br/># Plot the histogram<br/>plt.hist(employee_age, bins, rwidth=0.6)<br/><br/># Add X Label on X-axis<br/>plt.xlabel("Employee Age")<br/><br/># Add X Label on X-axis<br/>plt.ylabel("Frequency")<br/><br/># Add title to graph<br/>plt.title("Employee Age Distribution")<br/><br/># Show the plot<br/>plt.show()</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/7d029d49-dc00-4322-8022-af240ac0c396.png" style=""/></div>
<p class="mce-root">In the preceding histogram, the <kbd>hist()</kbd> function takes <kbd>values</kbd>, <kbd>bins</kbd>, and <kbd>rwidth</kbd>. In our example, we are plotting the age of the employee and using a bin of 10 years. We are starting our bin from 20 to 60 with a 10 years bin size. We are using a relative bar width of 0.6, but you can choose any size for thicker and thinner width. Now it's time to jump to the bubble plot, which can handle multiple variables in a two-dimensional plot.  </p>
<h2 id="uuid-0eedd7b7-f8c1-47a6-8e0e-4c7f088fab9a">Bubble plot</h2>
<p>A bubble plot is a type of scatter plot. It not only draws data points using Cartesian coordinates but also creates bubbles on data points. Bubble shows the third dimension of a plot. It shows three numerical values: two values are on the <em>x</em> and <em>y</em> axes and the third one is the size of data points (or bubbles):</p>
<pre># Import the required modules<br/>import matplotlib.pyplot as plt<br/>import numpy as np<br/><br/># Set figure size<br/>plt.figure(figsize=(8,5))<br/><br/># Create the data<br/>countries = ['Qatar','Luxembourg','Singapore','Brunei','Ireland','Norway','UAE','Kuwait']<br/>populations = [2781682, 604245,5757499,428963,4818690,5337962,9630959,4137312]<br/>gdp_per_capita = [130475, 106705, 100345, 79530, 78785, 74356,69382, 67000]<br/><br/># scale GDP per capita income to shoot the bubbles in the graph<br/>scaled_gdp_per_capita = np.divide(gdp_per_capita, 80)<br/><br/>colors = np.random.rand(8)<br/><br/># Draw the scatter diagram<br/>plt.scatter(countries, populations, s=scaled_gdp_per_capita, c=colors, cmap="Blues",edgecolors="grey", alpha=0.5)<br/><br/># Add X Label on X-axis<br/>plt.xlabel("Countries")<br/><br/># Add Y Label on X-axis<br/>plt.ylabel("Population")<br/><br/># Add title to graph<br/>plt.title("Bubble Chart")<br/><br/># rotate x label for clear visualization<br/>plt.xticks(rotation=45)<br/><br/># Show the plot<br/>plt.show()</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/2d66b28e-5b60-4c42-a234-eaa15a183e36.png"/></div>
<p>In the preceding plot, a bubble chart is created using the scatter function. Here, the important thing is the <kbd>s</kbd> (size) parameter of the scatter function. We assigned a third variable, <kbd>scaled_gdp_per_capita</kbd>, to the <kbd>size</kbd> parameters. In the preceding bubble plot, countries are on the <em>x</em> axis, the population is on the <em>y</em> axis, and GDP per capita is shown by the size of the scatter point or bubble. We also assigned a random color to the bubbles to make it attractive and more understandable. From the bubble size, you can easily see that Qatar has the highest GDP per capita and Kuwait has the lowest GDP per capita. In all the preceding sections, we have focused on most of the Matplotlib plots and charts. Now, we will see how we can plot the charts using the <kbd>pandas</kbd> module.</p>
<h2 id="uuid-9467dc4e-2246-424f-9733-4318407fc08d">pandas plotting</h2>
<p>The <kbd>pandas</kbd> library offers the <kbd>plot()</kbd> method as a wrapper around the Matplotlib library. The <kbd>plot()</kbd> method allows us to create plots directly on <kbd>pandas</kbd> DataFrames. The following <kbd>plot()</kbd> method parameters are used to create the plots:</p>
<ul>
<li><kbd>kind</kbd>: A string parameter for the type of graph, such as line, bar, barh, hist, box, KDE, pie, area, or scatter.</li>
<li><kbd>figsize</kbd>: This defines the size for a figure in a tuple of (width, height).</li>
<li><kbd>title</kbd>: This defines the title for the graph.</li>
<li><kbd>grid</kbd>: Boolean parameter for the axis grid line.</li>
<li><kbd>legend</kbd>: This defines the legend.</li>
<li><kbd>xticks</kbd>: This defines the sequence of x-axis ticks.</li>
<li><kbd>yticks</kbd>: This defines the sequence of y-axis ticks.</li>
</ul>
<p>Let's create a scatter plot using the <kbd>pandas plot()</kbd> function:</p>
<pre># Import the required modules<br/>import pandas as pd<br/>import matplotlib.pyplot as plt<br/><br/># Let's create a Dataframe<br/>df = pd.DataFrame({<br/>            'name':['Ajay','Malala','Abhijeet','Yming','Desilva','Lisa'],<br/>            'age':[22,72,25,19,42,38],<br/>            'gender':['M','F','M','M','M','F'],<br/>            'country':['India','Pakistan','Bangladesh','China','Srilanka','UK'],<br/>            'income':[2500,3800,3300,2100,4500,5500]<br/>        })<br/><br/># Create a scatter plot<br/>df.plot(kind='scatter', x='age', y='income', color='red', title='Age Vs Income')<br/><br/># Show figure<br/>plt.show()</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/7d5e58d4-dcc9-47bc-85b3-80dfffc93a5a.png" style=""/></div>
<p>In the preceding plot, the <kbd>plot()</kbd> function takes <kbd>kind</kbd>, <kbd>x</kbd>, <kbd>y</kbd>, <kbd>color</kbd>, and <kbd>title</kbd> values. In our example, we are plotting the scatter plot between age and income using the <kbd>kind</kbd> parameter as <kbd>'scatter'</kbd>. The <kbd>age</kbd> and <kbd>income</kbd> columns are assigned to the <kbd>x</kbd> and <kbd>y</kbd> parameters. The scatter point color and the title of the plot are assigned to the <kbd>color</kbd> and <kbd>title</kbd> parameters:</p>
<pre>import matplotlib.pyplot as plt<br/>import pandas as pd<br/><br/># Create bar plot<br/>df.plot(kind='bar',x='name', y='age', color='blue')<br/><br/># Show figure<br/>plt.show()</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/fe1b8fcd-fd1a-44e1-adc2-2843c962f2d4.png" style=""/></div>
<p>In the preceding plot, the <kbd>plot()</kbd> function takes <kbd>kind</kbd>, <kbd>x</kbd>, <kbd>y</kbd>, <kbd>color</kbd>, and <kbd>title</kbd> values. In our example, we are plotting the bar plot between age and income using the <kbd>kind</kbd> parameter as <kbd>'bar'</kbd>. The <kbd>name</kbd> and <kbd>age</kbd> columns are assigned to the <kbd>x</kbd> and <kbd>y</kbd> parameters. The scatter point color is assigned to the <kbd>color</kbd> parameter. This is all about <kbd>pandas</kbd> plotting. Now, from the next section onward, we will see how to visualize the data using the Seaborn library.  </p>
<h1 id="uuid-e1c3e611-ef1f-456a-b728-c2650d789c32">Advanced visualization using the Seaborn package</h1>
<p>Visualization can be helpful to easily understand complex patterns and concepts. It represents the insights in pictorial format. In the preceding sections, we have learned about Matplotlib for visualization. Now, we will explore the new Seaborn <span>library</span><span> </span><span>for high-level and advanced statistical plots. Seaborn is an open source Python library for high-level interactive and attractive statistical visualization. Seaborn uses</span><span> M</span><span>atplotlib</span> <span>as a base library and offers more simple, easy-to-understand, interactive, and attractive visualizations.</span></p>
<p>In the Anaconda software suite, you can install the Seaborn library in the following way:</p>
<p>Install Seaborn with <kbd>pip</kbd>:</p>
<pre>pip install seaborn</pre>
<p>For Python 3, use the following command:</p>
<pre>pip3 install seaborn</pre>
<p>You can simply install Seaborn from your terminal or Command Prompt using the following:</p>
<pre>conda install seaborn</pre>
<p>If you are installing it into the Jupyter Notebook, then you need to put the <kbd>!</kbd> sign before the <kbd>pip</kbd> command. Here is an example:</p>
<pre>!pip install seaborn</pre>
<p>Let's jump to the <kbd>lm</kbd> plot of Seaborn.</p>
<h2 id="uuid-768f3006-a1dc-42d1-89ba-91e405249ce7" class="mce-root">lm plots</h2>
<p>The <kbd>lm</kbd> plot plots the scatter and fits the regression model on it. A scatter plot is the best way to understand the relationship between two variables. Its output visualization is a joint distribution of two variables. <kbd>lmplot()</kbd> takes two column names – <kbd>x</kbd> and <kbd>y</kbd> – as a string and DataFrame variable. Let's see the following example:</p>
<pre># Import the required libraries<br/>import pandas as pd<br/>import seaborn as sns<br/>import matplotlib.pyplot as plt<br/><br/># Create DataFrame<br/>df=pd.DataFrame({'x':[1,3,5,7,9,11],'y':[10,25,35,33,41,59]})<br/><br/># Create lmplot<br/>sns.lmplot(x='x', y='y', data=df)<br/><br/># Show figure<br/>plt.show()</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/17714774-b536-4968-85f7-4bc049be363a.png" style=""/></div>
<p>By default, <kbd>lmplot()</kbd> fits the regression line. We can also remove this by setting the <kbd>fit_reg</kbd> parameter as <kbd>False</kbd>:</p>
<pre># Create lmplot<br/>sns.lmplot(x='x', y='y', data=df, fit_reg=False)<br/><br/># Show figure<br/>plt.show()</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/1e389c44-cd99-436e-a622-92f7f25557d9.png" style=""/></div>
<p>Let's take a dataset of HR Analytics and try to plot <kbd>lmplot()</kbd>:</p>
<pre># Load the dataset<br/>df=pd.read_csv("HR_comma_sep.csv")<br/><br/># Create lmplot<br/><span>sns.lmplot(x='satisfaction_level', y='last_evaluation', data=df, fit_reg=False, hue='left')<br/><br/># Show figure<br/>plt.show()<br/></span></pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/017df826-085a-4c23-b317-1c8aac44a89b.png" style=""/></div>
<p>In the preceding example, <kbd>last_evaluation</kbd> is the evaluated performance of the employee, <kbd>satisfaction_level</kbd> is the employee's satisfaction level in the company, and <kbd>left</kbd> means whether the employee left the company or not. <kbd>satisfaction_level</kbd> and <kbd>last_evaluation</kbd> were drawn on the <em>x</em> and <em>y</em> axes, respectively. The third variable left is passed in the <kbd>hue</kbd> parameter. The <kbd>hue</kbd> property is used for color shade. We are passing a <kbd>left</kbd> variable as <kbd>hue</kbd>. We can clearly see in the diagram that employees that have <span>left</span><span> </span><span>are scattered into three groups. Let's now jump to bar plots.</span></p>
<h2 id="uuid-99ab47e3-e633-4c36-b439-e53779539c37">Bar plots</h2>
<p><kbd>barplot()</kbd> offers the relationship between a categorical and a continuous variable. It uses rectangular bars with variable lengths:</p>
<pre># Import the required libraries<br/>import pandas as pd<br/>import seaborn as sns<br/>import matplotlib.pyplot as plt<br/><br/># Create DataFrame<br/>df=pd.DataFrame({'x':['P','Q','R','S','T','U'],'y':[10,25,35,33,41,59]})<br/><br/># Create lmplot<br/>sns.barplot(x='x', y='y', data=df)<br/><br/># Show figure<br/>plt.show()</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/22ef555d-5837-48a9-8dd8-88883321b131.png" style=""/></div>
<p>In the preceding example, the bar plot is created using the <kbd>bar()</kbd> function. It takes two columns – <kbd>x</kbd> and <kbd>y</kbd> – and a DataFrame as input. In the next section, we will see how to plot a distribution plot.</p>
<h2 id="uuid-ce27463b-8d1c-4a8f-adac-8152f04515ce">Distribution plots</h2>
<p>This plots a univariate distribution of variables. It is a combination of a histogram with the default bin size and a <strong>Kernel Density Estimation</strong> (<strong>KDE</strong>) plot. In our example, <kbd>distplot()</kbd> will take the <kbd>satisfaction_level</kbd><span> </span><span>input column </span><span>and plot the distribution of it. Here, the distribution of</span> <kbd>satisfaction_level</kbd> <span>has two peaks:</span></p>
<pre># Create a distribution plot (also known as Histogram)<br/>sns.distplot(df.satisfaction_level)<br/><br/># Show figure<br/>plt.show()</pre>
<p class="mce-root"/>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/5256c688-8301-464e-bad2-4108271a2d93.png" style=""/></div>
<p>In the preceding code block, we have created the distribution plot using <kbd>distplot()</kbd>. It's time to jump to the box plot diagram.</p>
<h2 id="uuid-b894521b-f196-4dd2-a871-f56efb837e26">Box plots</h2>
<p>Box plot, aka box-whisker plot, is one of the best plots to understand the distribution of each variable with its quartiles. It can be horizontal or vertical. It shows quartile distribution in a box, which is known as a whisker. It also shows the minimum and maximum and outliers in the data. We can easily create a box plot using Seaborn:</p>
<pre># Create boxplot<br/>sns.boxplot(data=df[['satisfaction_level','last_evaluation']])<br/><br/># Show figure<br/>plt.show()</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/5923cc3c-5649-4e02-acbe-0009b4d1a50b.png" style=""/></div>
<p>In the preceding example, we have used two variables for the box plot. Here, the box plot indicates that the range of <kbd>satisfaction_level</kbd> is higher than <kbd>last_evaluation</kbd> (performance). Let's jump to the KDE plot in Seaborn.</p>
<h2 id="uuid-72d92117-2115-485a-a795-9a56df8d6521">KDE plots</h2>
<p>The <kbd>kde()</kbd> function plots the probability density estimation of a given continuous variable. It is a non-parametric kind of estimator. In our example, the <kbd>kde()</kbd> function takes one parameter, <kbd>satisfaction_level</kbd>, and plots the KDE:</p>
<pre># Create density plot<br/>sns.kdeplot(df.satisfaction_level)<br/><br/># Show figure<br/>plt.show()</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/a99ab7a8-9e47-47ad-96c8-e7dc804e65ec.png" style=""/></div>
<p>In the preceding code block, we have created a density plot using <kbd>kdeplot()</kbd>. In the next section, we will see another distribution plot, which is a combination of a density and box plot, known as a violin plot.</p>
<h2 id="uuid-b8a7527f-0073-466d-9d49-8c7429c6afae">Violin plots</h2>
<p>Violin plots are a combined form of box plots and KDE, which offer easy-to-understand analysis of the distribution:</p>
<pre># Create violin plot<br/>sns.violinplot(data=df[['satisfaction_level','last_evaluation']])<br/><br/># Show figure<br/>plt.show()</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/9a103c26-d7de-400a-b91b-c2c6840caec0.png" style=""/></div>
<p>In the preceding example, we have used two variables for the violin plot. Here, we can conclude that the range of <kbd>satisfaction_level</kbd> is higher than <kbd>last_evaluation</kbd> (performance) and both the variables have two peaks in the distribution. After working on distribution plots, we will see how we can combine the <kbd>groupby</kbd> operation and box plot into a single plot using a count plot. </p>
<h2 id="uuid-eba935ca-fcc5-45dd-82cb-18adacb26f53" class="mce-root">Count plots</h2>
<p><kbd>countplot()</kbd> is a special type of bar plot. It shows the frequency of each categorical variable. It is also known as a histogram for categorical variables. It makes operations very simple compared to Matplotlib. In Matplotlib, to create a count plot, first we need to group by the category column and count the frequency of each class. After that, this count is consumed by Matplotlib's bar plot. But the Seaborn count plot offers a single line of code to plot the distribution:</p>
<pre># Create count plot (also known as Histogram)<br/>sns.countplot(x='salary', data=df)<br/><br/># Show figure<br/>plt.show()</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/5c32b145-c58f-48e3-920e-430f8f1ab04a.png" style=""/></div>
<p>In the preceding example, we are counting the <kbd>salary</kbd> variable. The <kbd>count()</kbd> function takes a single column and DataFrame. So, we can easily conclude from the <span>graph that most of the employees have low and medium salaries. We can also use <kbd>hue</kbd> as the second variable. Let's see the following example:</span></p>
<pre># Create count plot (also known as Histogram)<br/>sns.countplot(x='salary', data=df, hue='left')<br/><br/># Show figure<br/>plt.show()</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/7fa48cc3-20a7-4fb0-abe2-7d43cda6fec5.png" style=""/></div>
<p><span>In the preceding example, we can see that <kbd>left</kbd> is used as the hue or color shade. This indicates that most of the employees with the lowest salary left the company. Let's see another important plot for visualizing the relationship and distribution of two variables. </span></p>
<h2 id="uuid-685502fc-2fcb-4e2b-83e6-d3be4216be3b">Joint plots</h2>
<p>The joint plot is a multi-panel visualization; it shows the bivariate relationship and distribution of individual variables in a single graph. We can also plot a KDE using the <kbd>kind</kbd> parameter of <kbd>jointplot()</kbd>. By setting the <kbd>kind</kbd> parameter as <kbd>"kde"</kbd>, we can draw the KDE plot. Let's see the following example:</p>
<pre># Create joint plot using kernel density estimation(kde)<br/>sns.jointplot(x='satisfaction_level', y='last_evaluation', data=df, kind="kde")<br/><br/># Show figure<br/>plt.show()</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/f41ea0ea-fc2b-4abc-ad61-524a322e8e59.png" style=""/></div>
<p>In the preceding plot, we have created the joint plot using <kbd>jointplot()</kbd> and also added the <kbd>kde</kbd> plot using a <kbd>kind</kbd> parameter as <kbd>"kde"</kbd>. Let's jump to heatmaps for more diverse visualization.</p>
<h2 id="uuid-527b0af9-c0be-4837-8b0d-d76630593368">Heatmaps</h2>
<p>Heatmap offers two-dimensional grid representation. The individual cell of the grid contains a value of the matrix. The heatmap function also offers annotation on each cell:</p>
<pre># Import required library<br/>import seaborn as sns<br/><br/># Read iris data using load_dataset() function<br/>data = sns.load_dataset("iris")<br/><br/># Find correlation<br/>cor_matrix=data.corr()<br/><br/># Create heatmap<br/>sns.heatmap(cor_matrix, annot=True)<br/><br/># Show figure<br/>plt.show()</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/fa30eaf5-0f91-4a9d-ad6c-2e5c01d31fb3.png" style=""/></div>
<p>In the preceding example, the Iris dataset is loaded using <kbd>load_dataset()</kbd> and the correlation is calculated using the <kbd>corr()</kbd> function. The <kbd>corr()</kbd> function returns the correlation matrix. This correlation matrix is plotted using the <kbd>heatmap()</kbd> function for the grid view of the correlation matrix. It takes two parameters: the correlation matrix and <kbd>annot</kbd>. The <kbd>annot</kbd> parameter is passed as <kbd>True</kbd>. In the plot, we can see a symmetric matrix, and all the values on the diagonal are ones, which indicates a perfect correlation of a variable with itself. We can also set a new color map using the <kbd>cmap</kbd> parameter for different colors:</p>
<pre># Create heatmap<br/>sns.heatmap(cor_matrix, annot=True, cmap="YlGnBu")<br/><br/># Show figure<br/>plt.show()</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/9bde2842-cf24-496f-b49b-ace8bdc8ab4c.png" style=""/></div>
<p><span>In the preceding heatmap, we have changed the color map using the <kbd>cmap</kbd> parameter for different colors. Here, we are using the <kbd>YlGnBu</kbd> (yellow, green, and blue) combination for <kbd>cmap</kbd>. Now, we will move on to the pair plot for faster exploratory analysis.</span></p>
<h2 id="uuid-0aab87e3-d176-49a9-b3f5-d3a76a0aea28">Pair plots</h2>
<p>Seaborn offers quick exploratory data analysis with relationships and individual distribution using a pair plot. A pair plot offers a single distribution using a histogram and joint distribution using a scatter plot:</p>
<pre># Load iris data using load_dataset() function<br/>data = sns.load_dataset("iris")<br/><br/># Create a pair plot<br/>sns.pairplot(data)<br/><br/># Show figure<br/>plt.show()</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/3f3364c2-28ea-4ca1-8b03-35f622390a3b.png" style=""/></div>
<p>In the preceding example, the Iris dataset is loaded using <kbd>load_dataset()</kbd> and that dataset is <span>passed </span>into the <kbd>pairplot()</kbd> function. In the plot, it creates an <em>n</em> by <em>n</em> matrix or a grid of graphs. The diagonal shows the distribution of the columns, and the non-diagonal elements of the grid show the scatter plot to understand the relationship among all the variables.</p>
<p>In the preceding few sections, we have seen how to use the Seaborn plots. Now, we will jump to another important visualization library, which is Bokeh. In the upcoming sections, we will draw interactive and versatile plots using the Bokeh library.</p>
<h1 id="uuid-0525818b-085b-4ca8-a63d-1587cd6affeb">Interactive visualization with Bokeh</h1>
<p>Bokeh is an interactive, high-quality, versatile, focused, and more powerful visualization library for large-volume and streaming data. It offers interactive, rich charts, plots, layouts, and dashboards for modern web browsers. Its output can be mapped to a notebook, HTML, or server.</p>
<p>Both the Matplotlib and Bokeh <span>libraries</span><span> </span><span>have different intentions. Matplotlib focuses on static, simple, and fast visualization while Bokeh focuses on highly interactive, dynamic, web-based, and quality visualization. Matplotlib is generally used for publication images while Bokeh is for a web audience. In the remaining sections of this chapter, we will learn basic plotting using Bokeh. We can create more interactive visuals for data exploration using Bokeh.</span></p>
<p>The simplest way to install the Bokeh library is with the Anaconda distribution package. To install Bokeh, use the following command:</p>
<pre>conda install bokeh</pre>
<p>We can also install it using <kbd>pip</kbd>. To install Bokeh using <kbd>pip</kbd>, use the following command:</p>
<pre>pip install bokeh</pre>
<h2 id="uuid-eaefb542-e4d8-4e12-84bb-b588c09c4481">Plotting a simple graph</h2>
<p>Let's plot a first and simple plot using Bokeh. First, we need to import the basic <kbd>bokeh.plotting</kbd><span> </span><span>module.</span><span> The</span> <kbd>output_notebook()</kbd> <span>function defines that the plot will render on the Jupyter Notebook. The <kbd>figure</kbd> object is used as one of the core objects to draw charts and graphs. The <kbd>figure</kbd> object focuses on the plot title, size, label, grids, and style. The <kbd>figure</kbd> object also deals with plot style, title, axes labels, axes, grids, and various methods for adding data:</span></p>
<pre># Import the required modules<br/>from bokeh.plotting import figure<br/>from bokeh.plotting import output_notebook<br/>from bokeh.plotting import show<br/><br/># Create the data<br/>x = [1,3,5,7,9,11]<br/>y = [10,25,35,33,41,59]<br/><br/># Output to notebook<br/>output_notebook()<br/><br/># Instantiate a figure<br/>fig= figure(plot_width = 500, plot_height = 350)<br/><br/># Create scatter circle marker plot by rendering the circles<br/>fig.circle(x, y, size = 10, color = "red", alpha = 0.7)<br/><br/># Show the plot<br/>show(fig)</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/7ae25831-21b5-4559-87d4-5597bb34d3f1.png" style=""/></div>
<p>After setting up the <kbd>figure</kbd> object, we will create a scatter circle markers plot using a circle function. The <kbd>circle()</kbd> function will take <kbd>x</kbd> and <kbd>y</kbd> values. It also takes size, color, and alpha parameters. The <kbd>show()</kbd> function will finally plot the output once all the features and data are added to the plot.</p>
<h2 id="uuid-665eb188-ec80-4f9c-80b5-f87667b288d1">Glyphs</h2>
<p>Bokeh uses a visual glyph, which refers to the circles, lines, triangles, squares, bars, diamonds, and other shape graphs. The glyph is a unique symbol that is used to convey information in pictorial form. Let's create a line plot using the <kbd>line()</kbd> function:</p>
<pre># Import the required modules<br/>from bokeh.plotting import figure, output_notebook, show<br/><br/># Import the required modules<br/>from bokeh.plotting import figure<br/>from bokeh.plotting import output_notebook<br/>from bokeh.plotting import show<br/><br/># Create the data<br/>x_values = [1,3,5,7,9,11]<br/>y_values = [10,25,35,33,41,59]<br/><br/># Output to notebook<br/>output_notebook()<br/><br/># Instantiate a figure<br/>p = figure(plot_width = 500, plot_height = 350)<br/><br/># create a line plot<br/>p.line(x_values, y_values, line_width = 1, color = "blue")<br/><br/># Show the plot<br/>show(p)</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/186afe2d-4b28-4873-a0ce-a51a4bf80366.png" style=""/></div>
<p>In the preceding example, the <kbd>line()</kbd> function takes the <em>x</em>- and <em>y</em>-axis values. It also takes the <kbd>line_width</kbd> and <kbd>color</kbd> values of the line. In the next section, we will focus on the layouts for multiple plots.</p>
<h2 id="uuid-a2acb9f5-e5e5-423f-a9a3-e4fc73b1945a">Layouts</h2>
<p>Bokeh offers layouts for organizing plots and widgets. Layouts organize more than one plot in a single panel for interactive visualizations. They also allow setting the sizing modes for resizing the plots and widgets based on panel size. The layout can be of the following types:</p>
<ul>
<li><strong>Row layout</strong>: This organizes all the plots in a row or in a horizontal fashion.</li>
<li><strong>Column layout</strong>: This organizes all the plots in a column or in a vertical fashion.</li>
<li><strong>Nested layout</strong>: This is a combination of row and column layouts. </li>
<li><strong>Grid layout</strong>: This offers you a grid of matrices for arranging the plots in.</li>
</ul>
<p>Let's see a row layout example:</p>
<pre># Import the required modules<br/>from bokeh.plotting import figure<br/>from bokeh.plotting import output_notebook, show<br/>from bokeh.layouts import row, column<br/><br/># Import iris flower dataset as pandas DataFrame<br/>from bokeh.sampledata.iris import flowers as df<br/><br/># Output to notebook<br/>output_notebook()<br/><br/># Instantiate a figure<br/>fig1 = figure(plot_width = 300, plot_height = 300)<br/>fig2 = figure(plot_width = 300, plot_height = 300)<br/>fig3 = figure(plot_width = 300, plot_height = 300)<br/><br/><br/># Create scatter marker plot by render the circles<br/>fig1.circle(df['petal_length'], df['sepal_length'], size=8, color = "green", alpha = 0.5)<br/>fig2.circle(df['petal_length'], df['sepal_width'], size=8, color = "blue", alpha = 0.5)<br/>fig3.circle(df['petal_length'], df['petal_width'], size=8, color = "red", alpha = 0.5)<br/><br/># Create row layout<br/>row_layout = row(fig1, fig2, fig3)<br/><br/># Show the plot<br/>show(row_layout)</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/045edd8a-4c85-4a89-a200-aa5ad5a7b8af.png"/></div>
<p>In this layout plot, we have imported the row and column layouts, loaded the Iris data from Bokeh sample data, instantiated the three <kbd>figure</kbd> objects with plot width and height, created the three scatter circle markers on each figure object, and created the row layout. This row layout will take the <kbd>figure</kbd> objects as input and is drawn using the <kbd>show()</kbd> function. We can also create a column layout by creating a column layout in place of a row layout, as shown:</p>
<pre># Create column layout<br/>col_layout = column(fig1, fig2, fig3)<br/><br/># Show the plot<br/>show(col_layout)</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/29f71614-53d2-476e-9730-20d151492716.png" style=""/></div>
<p>In the preceding plot, we have created the column layout of three plots. Let's jump to the nested layouts for more powerful visualizations.</p>
<h3 id="uuid-efb28f6d-95c9-488c-bcca-d5d1e3db2061" class="mce-root">Nested layout using row and column layouts</h3>
<p>A nested layout is the combination of multiple row and column layouts. Let's see the example given here for a better practical understanding:</p>
<pre># Import the required modules<br/>from bokeh.plotting import figure, output_notebook, show<br/><br/># Import the required modules<br/>from bokeh.plotting import figure<br/>from bokeh.plotting import output_notebook<br/>from bokeh.plotting import show<br/>from bokeh.layouts import row, column<br/><br/><br/># Import iris flower dataset as pandas DataFrame<br/>from bokeh.sampledata.iris import flowers as df<br/><br/># Output to notebook<br/>output_notebook()<br/><br/># Instantiate a figure<br/>fig1 = figure(plot_width = 300, plot_height = 300)<br/>fig2 = figure(plot_width = 300, plot_height = 300)<br/>fig3 = figure(plot_width = 300, plot_height = 300)<br/><br/># Create scatter marker plot by render the circles<br/>fig1.circle(df['petal_length'], df['sepal_length'], size=8, color = "green", alpha = 0.5)<br/>fig2.circle(df['petal_length'], df['sepal_width'], size=8, color = "blue", alpha = 0.5)<br/>fig3.circle(df['petal_length'], df['petal_width'], size=8, color = "red", alpha = 0.5)<br/><br/># Create nested layout<br/>nasted_layout = row(fig1, column(fig2, fig3))<br/><br/># Show the plot<br/>show(nasted_layout)</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/82bfd6df-4a0e-46fa-867d-f35c9bab4452.png" style=""/></div>
<p>Here, you can see the row layout has two rows. In the first, <kbd>fig1</kbd> is assigned and the second row has the column layout of <kbd>fig2</kbd> and <kbd>fig3</kbd>. So, this layout becomes a 2*2 layout, in which the first column has only one component and the second column has two components.</p>
<h2 id="uuid-352ba412-5669-447d-9d85-f27ce62fedac">Multiple plots</h2>
<p>Multiple plots and objects can also be created using a grid layout. A grid layout arranges the plots and widget objects in a row-column matrix fashion. It takes a list of figure objects for each row. We can also use <kbd>None</kbd> as a placeholder:</p>
<pre># Import the required modules<br/>from bokeh.plotting import figure<br/>from bokeh.plotting import output_notebook<br/>from bokeh.plotting import show<br/>from bokeh.layouts import gridplot<br/><br/># Import iris flower dataset as pandas DataFrame<br/>from bokeh.sampledata.iris import flowers as df<br/><br/># Output to notebook<br/>output_notebook()<br/><br/># Instantiate a figure<br/>fig1 = figure(plot_width = 300, plot_height = 300)<br/>fig2 = figure(plot_width = 300, plot_height = 300)<br/>fig3 = figure(plot_width = 300, plot_height = 300)<br/><br/># Create scatter marker plot by render the circles<br/>fig1.circle(df['petal_length'], df['sepal_length'], size=8, color = "green", alpha = 0.5)<br/>fig2.circle(df['petal_length'], df['sepal_width'], size=8, color = "blue", alpha = 0.5)<br/>fig3.circle(df['petal_length'], df['petal_width'], size=8, color = "red", alpha = 0.5)<br/><br/># Create a grid layout<br/>grid_layout = gridplot([[fig1, fig2], [None,fig3]])<br/><br/># Show the plot<br/>show(grid_layout)</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/845b71f3-3c3a-4be5-a056-6433d52f602e.png" style=""/></div>
<p>The preceding layout is similar to the nested layout. Here, we have imported <kbd>gridplot()</kbd>. It arranges the components in rows and columns. The grid plot has taken a list of row figures. The first items in the list are <kbd>fig1</kbd> and <kbd>fig2</kbd>. The second items are <kbd>None</kbd> and <kbd>fig3</kbd>. Each item is a row in the grid matrix. The <kbd>None</kbd> placeholder is used to leave the cell empty or without components.</p>
<p>Sizing modes can help us to configure figures with resizing options. Bokeh offers the following sizing modes:</p>
<ul>
<li><kbd>fixed</kbd>: This retains the same original width and height.</li>
<li><kbd>stretch_width</kbd>: This stretches to the available width based on the type of the other component. It doesn't maintain the aspect ratio.</li>
<li><kbd>stretch_height</kbd>: This stretches to the available height based on the type of the other component. It doesn't maintain the aspect ratio.</li>
<li><kbd>stretch_both</kbd>: This stretches both the width and height based on the type of the other component without maintaining the original aspect ratio.</li>
<li><kbd>scale_width</kbd>: This stretches to the available width based on the type of the other component while maintaining the original aspect ratio.</li>
<li><kbd>scale_height</kbd>: This stretches to the available height based on the type of the other component while maintaining the original aspect ratio.</li>
<li><kbd>scale_both</kbd>: This stretches both the width and height based on the type of the other component while maintaining the original aspect ratio.</li>
</ul>
<p>After learning about layouts and multiple plots, it's time to learn about interactions for interactive visualizations.</p>
<h2 id="uuid-7853138c-a431-4b9e-afd5-4ccdd9605409">Interactions</h2>
<p>Bokeh offers interactive legends for runtime-actionable graphs. Legends can be hidden or muted by clicking on glyph plots. We can activate these modes by activating the <kbd>click_policy</kbd> property and clicking on the legend entry.</p>
<h3 id="uuid-b3f159d7-8540-4a0f-8859-31b6197aca60" class="mce-root">Hide click policy</h3>
<p>Hide click policy hides the desirable glyphs by clicking on the legend entry. Let's see an example of a hide click policy:</p>
<pre># Import the required modules<br/>from bokeh.plotting import figure<br/>from bokeh.plotting import output_notebook<br/>from bokeh.plotting import show <br/>from bokeh.models import CategoricalColorMapper<br/><br/># Import iris flower dataset as pandas DataFrame<br/>from bokeh.sampledata.iris import flowers as df<br/><br/># Output to notebook <br/>output_notebook() <br/><br/><br/># Instantiate a figure object <br/>fig = figure(plot_width = 500, plot_height = 350, title="Petal length Vs. Petal Width", <br/>           x_axis_label='petal_length', y_axis_label='petal_width')<br/><br/># Create scatter marker plot by render the circles <br/>for specie, color in zip(['setosa', 'virginica','versicolor'], ['blue', 'green', 'red']):<br/>    data = df[df.species==specie]<br/>    fig.circle('petal_length', 'petal_width', size=8, color=color, alpha = 0.7, legend_label=specie, source=data)<br/><br/># Set the legend location and click policy<br/>fig.legend.location = 'top_left'<br/>fig.legend.click_policy="hide"<br/><br/># Show the plot<br/>show(fig)</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/92f05d68-5e04-42b0-ad96-d38eab3ffddf.png" style=""/></div>
<p>Here, we can set the click policy with the <kbd>legend.click_policy</kbd> parameter of the <kbd>figure</kbd> object. Also, we need to run a <kbd>for</kbd> loop of each type of glyph or legend element on which you click. In our example, we are running a <kbd>for</kbd> loop for types of species and colors. On the click of any species in the legend, it will filter the data and hide that glyph. </p>
<h3 id="uuid-550ae65a-c15c-4d6a-93d9-d50edc516122">Mute click policy</h3>
<p>Mute click policy mutes the glyph by clicking on a legend entry. Here, the following code shows the desirable glyph with high intensity and uninteresting glyphs using lower intensity instead of hiding the whole glyph. Let's see an example of a mute click policy:</p>
<pre># Import the required modules<br/>from bokeh.plotting import figure <br/>from bokeh.plotting import output_notebook<br/>from bokeh.plotting import show <br/>from bokeh.models import CategoricalColorMapper<br/><br/># Import iris flower dataset as pandas DataFrame<br/>from bokeh.sampledata.iris import flowers as df<br/><br/># Output to notebook <br/>output_notebook() <br/><br/><br/># Instantiate a figure object <br/>fig = figure(plot_width = 500, plot_height = 350, title="Petal length Vs. Petal Width", <br/>           x_axis_label='petal_length', y_axis_label='petal_width')<br/><br/># Create scatter marker plot by render the circles <br/>for specie, color in zip(['setosa', 'virginica','versicolor'], ['blue', 'green', 'red']):<br/>    data = df[df.species==specie]<br/>    fig.circle('petal_length', 'petal_width', size=8, color=color, alpha = 0.7,legend_label=specie,source=data,<br/>            muted_color=color, muted_alpha=0.2)<br/><br/># Set the legend location and click policy<br/>fig.legend.location = 'top_left'<br/>fig.legend.click_policy="mute"<br/><br/># Show the plot<br/>show(fig)</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/bd36ff08-ab1a-46e0-adf1-31f3d6c9b06d.png"/></div>
<p class="mce-root"/>
<p><span>Here, we can set the mute click policy with the <kbd>legend.click_policy</kbd> parameter to mute figure objects. Also, we need to run the </span><kbd><span>for</span></kbd><span> l</span><span>oop of each type of glyph or legend element on which you click. In our example, we are running a <kbd>for</kbd> loop for types of species and colors. On the click of any species in the legend, it will filter the data and hide that glyph. In addition to that, we need to add a</span> <kbd>muted_color</kbd> <span>and</span> <kbd>muted_alpha</kbd> <span>parameter to the scatter circle marker.</span></p>
<h2 id="uuid-b39e68b7-2ea8-4eb0-aa7c-b7cb1b2baea4">Annotations</h2>
<p>Bokeh offers several annotations for supplementary information for visualizations. It helps the viewer by adding the following information:</p>
<ul>
<li><strong>Titles</strong>: This annotation provides a name to the plot.</li>
<li><strong>Axis labels</strong>: This annotation provides labels to the axis. It helps us to understand what the <em>x</em> and <em>y</em> axes represent.</li>
<li><strong>Legends</strong>: This annotation represents the third variable via color or shape and helps us to link features for easy interpretations.</li>
<li><strong>Color bars</strong>: Color bars are created using ColorMapper with the color palette.</li>
</ul>
<p>Let's see an annotation example:</p>
<pre># Import the required modules<br/>from bokeh.plotting import figure<br/>from bokeh.plotting import output_notebook<br/>from bokeh.plotting import show <br/>from bokeh.models import CategoricalColorMapper<br/><br/># Import iris flower dataset as pandas DataFrame<br/>from bokeh.sampledata.iris import flowers as df<br/><br/># Output to notebook <br/>output_notebook() <br/><br/># Create color mapper for categorical column <br/>color_mapper = CategoricalColorMapper(factors=['setosa', 'virginica', 'versicolor'], palette=['blue', 'green', 'red'])<br/><br/>color_dict={'field': 'species','transform': color_mapper }<br/><br/># Instantiate a figure object <br/>p = figure(plot_width = 500, plot_height = 350, title="Petal length Vs. Petal Width", <br/>           x_axis_label='petal_length', y_axis_label='petal_width')<br/><br/># Create scatter marker plot by render the circles <br/>p.circle('petal_length', 'petal_width', size=8, color=color_dict, alpha = 0.5, legend_group='species', source=df)<br/><br/># Set the legend location<br/>p.legend.location = 'top_left'<br/><br/># Show the plot<br/>show(p)</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/99f04a92-7d11-4c2f-a442-afa85a769048.png" style=""/></div>
<p>In the preceding example, <kbd>CategoricalColorMapper</kbd> is imported and objects are created by defining factors or unique items in iris species and their respective colors. A color dictionary is created by defining the <kbd>field</kbd> and <kbd>transform</kbd> parameters for the mapper. We need to define the figure title; <kbd>x_axis_label</kbd> and <kbd>y_axis_label</kbd> were defined inside the <kbd>figure</kbd> object. The legend is defined in the circle scatter marker function with the species column and its location is defined using the location attribute of the <kbd>figure</kbd> object with <kbd>top_left</kbd>.</p>
<h2 id="uuid-32b983b2-e719-41d6-93b5-f622ca0bd8af">Hover tool</h2>
<p>The hover tool shows the related information whenever the mouse pointer is placed over a particular area. Let's see examples to understand the hovering plots:</p>
<pre># Import the required modules<br/>from bokeh.plotting import figure <br/>from bokeh.plotting import output_notebook<br/>from bokeh.plotting import show <br/>from bokeh.models import CategoricalColorMapper<br/>from bokeh.models import HoverTool<br/><br/># Import iris flower dataset as pandas DataFrame<br/>from bokeh.sampledata.iris import flowers as df<br/><br/># Output to notebook <br/>output_notebook() <br/><br/># Create color mapper for categorical column <br/>mapper = CategoricalColorMapper(factors=['setosa', 'virginica', 'versicolor'], <br/>                                palette=['blue', 'green', 'red'])<br/><br/>color_dict={'field': 'species','transform': mapper}<br/><br/># Create hovertool and specify the hovering information<br/>hover = HoverTool(tooltips=[('Species type','@species'),<br/>                            ('IRIS Petal Length','@petal_length'),<br/>                            ('IRIS Petal Width', '@petal_width')])<br/><br/># Instantiate a figure object<br/>p = figure(plot_width = 500, plot_height = 350, title="Petal length Vs. Petal Width", <br/>           x_axis_label='petal_length', y_axis_label='petal_width',<br/>           tools=[hover, 'pan', 'wheel_zoom'])<br/><br/># Create scatter marker plot by render the circles <br/>p.circle('petal_length', 'petal_width', size=8, color=color_dict, alpha = 0.5,legend_group='species',source=df)<br/><br/># Set the legend location<br/>p.legend.location = 'top_left'<br/><br/># Show the plot<br/>show(p)</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/ce8e8bfd-6bbd-42a0-a272-c6c1eb6649ac.png" style=""/></div>
<p>In the preceding example, we have imported <kbd>HoverTool</kbd> from <kbd>bokeh.models</kbd> and created its object by defining the information that will be shown on mouse hover. In our example, we have defined information in the list of tuples. Each tuple has two arguments. The first is for the string label and the second is for the actual value (preceded with <kbd>@</kbd>). This hover object is passed into the <kbd>figure</kbd> object's <kbd>tools</kbd> parameter.</p>
<h2 id="uuid-6870df27-e0dd-4d6f-b0b6-46707e350a69">Widgets</h2>
<p>Widgets offer real-time interaction on the frontend. Widgets have the capability to modify and update plots at runtime. They can run <span>either</span><span> </span><span>a Bokeh server or a standalone HTML application. For using widgets, you need to specify the functionality. It can be nested inside the layout. There are two approaches to add the functionality of widgets into the program:</span></p>
<ul>
<li>CustomJS callback</li>
<li>With the Bokeh server and setup event handler, such as <kbd>onclick</kbd> or <kbd>onchange event</kbd></li>
</ul>
<h3 id="uuid-32d062c0-f4a1-463d-b9a7-2c1526d18911">Tab panel</h3>
<p>Tab panes allow us to create multiple plots and layouts in a single window. Let's see an example of a tab panel:</p>
<pre># Import the required modules<br/>from bokeh.plotting import figure<br/>from bokeh.plotting import output_notebook<br/>from bokeh.plotting import show<br/>from bokeh.models.widgets import Tabs<br/>from bokeh.models.widgets import Panel<br/><br/># Import iris flower dataset as pandas DataFrame<br/>from bokeh.sampledata.iris import flowers as df<br/><br/># Output to notebook<br/>output_notebook()<br/><br/># Instantiate a figure<br/>fig1 = figure(plot_width = 300, plot_height = 300)<br/>fig2 = figure(plot_width = 300, plot_height = 300)<br/><br/># Create scatter marker plot by render the circles<br/>fig1.circle(df['petal_length'], df['sepal_length'], size=8, color = "green", alpha = 0.5)<br/>fig2.circle(df['petal_length'], df['sepal_width'], size=8, color = "blue", alpha = 0.5)<br/><br/># Create panels<br/>tab1 = Panel(child=fig1, title='tab1')<br/>tab2 = Panel(child=fig2, title='tab2')<br/><br/># Create tab by putting panels into it<br/>tab_layout = Tabs(tabs=[tab1,tab2])<br/><br/># Show the plot<br/>show(tab_layout)</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/a5c7ec44-0173-496d-8875-107e55997926.png" style=""/><img src="assets/9fa9fdce-f755-4953-b135-330127ac4787.png" style=""/></div>
<p>In the preceding code, we have created the two panels by passing <kbd>figure</kbd> objects to a child parameter and <kbd>title</kbd> to a <kbd>title</kbd> parameter to <kbd>Panel</kbd>. Both panels are combined into a list and passed to the <kbd>Tabs</kbd> layout object. This <kbd>Tabs</kbd> object is shown by the <kbd>show()</kbd> function. You can change the tab by just clicking on it.</p>
<h3 id="uuid-1cf1f1b3-3373-4cdc-afde-0d9aa9dc53f7">Slider</h3>
<p>A slider is a graphical track bar that controls the value by moving it on a horizontal scale. We can change the values of the graph without affecting its formatting. Let's see an example of a slider:</p>
<pre># Import the required modules<br/>from bokeh.plotting import Figure <br/>from bokeh.plotting import output_notebook <br/>from bokeh.plotting import show<br/>from bokeh.models import CustomJS <br/>from bokeh.models import ColumnDataSource<br/>from bokeh.models import Slider<br/>from bokeh.layouts import column<br/><br/># Show output in notebook <br/>output_notebook() <br/><br/># Create list of data<br/>x = [x for x in range(0, 100)]<br/>y = x<br/><br/># Create a DataFrame<br/>df = ColumnDataSource(data={"x_values":x, "y_values":y})<br/><br/># Instantiate the Figure object <br/>fig = Figure(plot_width=350, plot_height=350)<br/><br/># Create a line plot <br/>fig.line('x_values', 'y_values', source=df, line_width=2.5, line_alpha=0.8)<br/><br/># Create a callback using CustomJS<br/>callback = CustomJS(args=dict(source=df), code="""<br/>    var data = source.data;<br/>    var f = cb_obj.value<br/>    var x_values = data['x_values']<br/>    var y_values = data['y_values']<br/>    for (var i = 0; i &lt; x_values.length; i++) {<br/>        y_values[i] = Math.pow(x_values[i], f)<br/>    }<br/>    source.change.emit();<br/>""")<br/><br/>slider_widget = Slider(start=0.0, end=10, value=1, step=.1, title="Display power of x")<br/><br/>slider_widget.js_on_change('value', callback)<br/><br/># Create layout<br/>slider_widget_layout = column(fig,slider_widget)<br/><br/># Display the layout<br/>show(slider_widget_layout)</pre>
<p><span>This results in the following o</span><span>utput:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/547ca4f5-0d95-4dcb-bfa4-11ac83724d45.png" style=""/></div>
<p><span>In the preceding code, the Bokeh <kbd>slider()</kbd> function takes <kbd>start</kbd>, <kbd>end</kbd>, <kbd>value</kbd>, <kbd>step</kbd>, <kbd>title</kbd>, and CustomJS callback as input. In our example, we are creating a line graph and changing its <kbd>y</kbd> variable by the power of the <kbd>x</kbd> variable using the slide bar. We can create the slider by passing <kbd>start</kbd>, <kbd>end</kbd>, <kbd>value</kbd>, <kbd>step</kbd>, <kbd>title</kbd>, and a CustomJS callback to the <kbd>Slider</kbd> object. We need to focus on the CustomJS callback. It takes the source DataFrame, gets the value of the slider using <kbd>cb_obj.value</kbd></span>, <span>and updates its values using the <kbd>change.emit()</kbd> function. We are updating <kbd>y_value</kbd> in the <kbd>for</kbd> loop by finding its power using the slider value.</span></p>
<h1 id="uuid-ed5b0323-2723-47d5-8765-70919dadbe79">Summary</h1>
<p>In this chapter, we discussed visualizing data using plotting with Matplotlib, <kbd>pandas</kbd>, Seaborn, and Bokeh. We covered various plots, such as line plots, pie plots, bar plots, histograms, scatter plots, box plots, bubble charts, heatmaps, KDE plots, violin plots, count plots, joint plots, and pair plots. We focused on accessories for charts, such as titles, labels, legends, layouts, subplots, and annotations. Also, we learned about interactive visualization using Bokeh layouts, interactions, hover tools, and widgets.</p>
<p>The next chapter, <span><a href="0a7bfc74-e20e-4613-949f-715cc06574aa.xhtml">Chapter 6</a>, <em>Retrieving, Processing, and Storing Data</em>, will teach us skills of data reading and writing from various sources such as files, objects, and relational and NoSQL databases. Although some people don't consider these skills for data analysis, an independent or assistant data analyst must know how they can fetch data from various file formats and databases for analysis purposes.</span></p>


            </article>

            
        </section>
    </body></html>
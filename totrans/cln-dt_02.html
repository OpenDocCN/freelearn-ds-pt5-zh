<html><head></head><body><div class="chapter" title="Chapter&#xA0;2.&#xA0;Fundamentals &#x2013; Formats, Types, and Encodings"><div class="titlepage" id="aid-J2B82"><div><div><h1 class="title"><a id="ch02"/>Chapter 2. Fundamentals – Formats, Types, and Encodings</h1></div></div></div><p>A few years ago, I received a very interesting present at my family's annual holiday gift exchange. It was a <span class="emphasis"><em>garde manger</em></span> kitchen toolset that included a bunch of different knives as well as peelers, scoops, and zesters used to prepare vegetables and fruits. I learned to use each of the tools, and over time, I developed a special fondness for the channel knife and the tomato shark. This chapter is like your introductory data cleaning toolset. We will review:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">File formats, including compression standards</li><li class="listitem">The fundamentals of data types (including different types of missing data)</li><li class="listitem">Character encodings</li></ul></div><p>We will need all these fundamentals as we progress to later chapters. Some of the concepts that we'll cover are so basic that you'll encounter them nearly every day, such as compression and file formats. These are so common; they are like a chef's knife. But some of these concepts, like character encodings, are more special-purpose and exotic, like a tomato shark!</p><div class="section" title="File formats"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec14"/>File formats</h1></div></div></div><p>This <a id="id23" class="indexterm"/>section describes the different file formats any data scientist is likely to encounter when dealing with data found in the wild—in other words, the kind of data you will <span class="emphasis"><em>not</em></span> find in those carefully constructed datasets that so many books rely on. Here, we encounter some strategies and limitations to interacting with the most common file formats, and then we review the various compression and archiving formats you are likely to run into.</p><div class="section" title="Text files versus binary files"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec07"/>Text files versus binary files</h2></div></div></div><p>When <a id="id24" class="indexterm"/>collecting data from online sources, you<a id="id25" class="indexterm"/> are likely to encounter data in one of these ways:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The<a id="id26" class="indexterm"/> data will be downloadable in a file</li><li class="listitem">The data will be available via an interactive frontend to a storage system, for example, via a database system with a query interface</li><li class="listitem">The <a id="id27" class="indexterm"/>data will be available through a continuous stream</li><li class="listitem">The data will be available through an <span class="strong"><strong>Application Programming Interface</strong></span> (<span class="strong"><strong>API</strong></span>).</li></ul></div><p>In any case, you may find yourself needing to create data files later on in order to share with others. Therefore, a solid foundation of the various data formats and their strengths and weaknesses is important.</p><p>First, we <a id="id28" class="indexterm"/>can think of computer files as belonging to two broad groups, commonly <a id="id29" class="indexterm"/>called <span class="strong"><strong>text files</strong></span> and <span class="strong"><strong>binary files</strong></span>. As all files consist of a sequence of bytes, one right after the other, strictly speaking, all files are binary. But if the bytes in the file are all text characters (for example, letters, numbers, and some control characters such as newlines, carriage returns, or tabs), then we say the file is a text file. In contrast, binary files are those files that contain bytes made up of mostly non-human-readable characters.</p><div class="section" title="Opening and reading files"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec01"/>Opening and reading files</h3></div></div></div><p>Text files<a id="id30" class="indexterm"/> can be read and written by a program called a text editor. If you try to<a id="id31" class="indexterm"/> open a file in a text editor and you can read it successfully (even if you do not understand it), then it is probably a text file. However, if you open the file in a text editor and it just looks like a jumble of garbled characters and weird illegible symbols, then it is probably a binary file.</p><p>Binary files are intended to be opened or edited with a particular application, not by a text editor. For example, a Microsoft Excel spreadsheet is intended to be opened and read by Microsoft Excel, and a photograph taken by a digital camera can be read by a graphics program, such as Photoshop or Preview. Sometimes, binary files can be read by multiple compatible software packages, for example, many different graphics programs can read and edit photos and even binary files designed for a proprietary format, such as Microsoft Excel or Microsoft Word files, can be read and edited by compatible software, such as Apache OpenOffice. There are also programs called binary editors, which will let you peek inside a binary file and edit it.</p><p>Sometimes, text files are also intended to be read by an application, yet you can still read them in a text editor. For example, web pages and computer source code consist of only text characters and can easily be edited in a text editor, yet they are difficult to understand without some training in the particular format, or layout, of the text itself.</p><p>It is usually possible to know what type of file you have even without opening it in an editor. For<a id="id32" class="indexterm"/> example, most people look for clues about the file, starting <a id="id33" class="indexterm"/>with the file's own name. Three-letter and four-letter file extensions are a common way to indicate the type of file it is. Common extensions that many people know include:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><code class="literal">.xlsx</code> for Excel files, <code class="literal">.docx</code> for Word files, <code class="literal">.pptx</code> for Powerpoint files</li><li class="listitem"><code class="literal">.png</code>, <code class="literal">.jpg</code>, and <code class="literal">.gif</code> for image files</li><li class="listitem"><code class="literal">.mp3</code>, <code class="literal">.ogg</code>, <code class="literal">.wmv</code>, and <code class="literal">.mp4</code> for music and video files</li><li class="listitem"><code class="literal">.txt</code> for text files</li></ul></div><p>There are also several websites that list file extensions and the programs that are affiliated with these particular extensions. One such popular site is <a class="ulink" href="http://fileinfo.com">fileinfo.com</a>, and Wikipedia also has an <a id="id34" class="indexterm"/>alphabetical list of file extensions available at <a class="ulink" href="https://en.wikipedia.org/wiki/List_of_filename_extensions_(alphabetical)">https://en.wikipedia.org/wiki/List_of_filename_extensions_(alphabetical)</a>.</p></div><div class="section" title="Peeking inside files"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec02"/>Peeking inside files</h3></div></div></div><p>If you <a id="id35" class="indexterm"/>must open an unknown file to peek inside, there are several command-line options you can use to see the first few bytes of the file.</p><div class="section" title="On OSX or Linux"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl4sec01"/>On OSX or Linux</h4></div></div></div><p>On an<a id="id36" class="indexterm"/> OSX Mac or in Linux, go to your terminal window (on Mac, you can<a id="id37" class="indexterm"/> find the standard terminal application available by navigating to <span class="strong"><strong>Applications</strong></span> | <span class="strong"><strong>Utilities</strong></span> | <span class="strong"><strong>Terminal</strong></span>), navigate to the location of your file using a combination of the print working directory (<code class="literal">pwd</code>) and change directory (<code class="literal">cd</code>) commands, and then use the <code class="literal">less</code> command to view the file page by page. Here is what my commands to perform this task looked like:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>flossmole2:~ megan$ pwd</strong></span>
<span class="strong"><strong>/Users/megan</strong></span>
<span class="strong"><strong>flossmole2:~ megan$ cd Downloads</strong></span>
<span class="strong"><strong>flossmole2:Downloads megan$ less OlympicAthletes_0.xlsx</strong></span>
<span class="strong"><strong>"OlympicAthletes_0.xlsx" may be a binary file. See it anyway?</strong></span>
</pre></div><p>If you are prompted to "view anyway", then the file is binary and you should prepare yourself to see garbled characters. You can type <code class="literal">y</code> to see the file or just type <code class="literal">n</code> to run in the other direction. The next figure shows you the result of viewing a file called <code class="literal">OlympicAthletes_0.xlsx</code> using the <code class="literal">less</code> command, as shown in the dialogue. What a mess!</p><div class="mediaobject"><img src="../Images/image00233.jpeg" alt="On OSX or Linux"/></div><p style="clear:both; height: 1em;"> </p><p>When <a id="id38" class="indexterm"/>you<a id="id39" class="indexterm"/> are done looking at it, you can type <code class="literal">q</code> to quit the <code class="literal">less</code> program.</p></div><div class="section" title="On Windows"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl4sec02"/>On Windows</h4></div></div></div><p>Windows <a id="id40" class="indexterm"/>has the <code class="literal">more</code> program available in its Command Prompt application as well. It works similarly to the <code class="literal">less</code> command described earlier (after all, <span class="emphasis"><em>less is more</em></span>). You can access the Windows Command Prompt with <span class="strong"><strong>cmd</strong></span> from the <span class="strong"><strong>Start</strong></span> menu in Windows 7. In Windows 8, navigate to <span class="strong"><strong>Apps</strong></span> | <span class="strong"><strong>Windows System</strong></span> | <span class="strong"><strong>Command Prompt</strong></span>. You can use <code class="literal">cd</code> and <code class="literal">pwd</code> to navigate to your file the same way as we did in the preceding example.</p></div></div></div><div class="section" title="Common formats for text files"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec08"/>Common formats for text files</h2></div></div></div><p>In<a id="id41" class="indexterm"/> this book, we are mostly concerned with text files<a id="id42" class="indexterm"/> rather than binary files. (Some special exceptions include compressed and archived files, which we will cover in the next section, and Excel and PDF files, each of which have their own chapters later in this book.)</p><p>The three<a id="id43" class="indexterm"/> main types of text files we will be concerned with in this book are:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The delimited format (structured data)</li><li class="listitem">The JSON format (semi-structured data)</li><li class="listitem">The HTML format (unstructured data)</li></ul></div><p>These files differ in layout (they just look different when we read them), and also in terms of how predictable their structures are. In other<a id="id44" class="indexterm"/> words, how much of the file is organized and has<a id="id45" class="indexterm"/> structured data? And how much of the data in the file is irregular or unstructured? Here, we discuss each of these text file formats individually.</p></div><div class="section" title="The delimited format"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec09"/>The delimited format</h2></div></div></div><p>Delimited files<a id="id46" class="indexterm"/> are extremely common as a way to share <a id="id47" class="indexterm"/>and transfer data. Delimited format files are just text files in which each data attribute (each <span class="emphasis"><em>column</em></span>) and each instance of the data (each <span class="emphasis"><em>row</em></span>) are separated by a consistent character symbol. We call the separator characters <span class="strong"><strong>delimiters</strong></span>. The <a id="id48" class="indexterm"/>two most common delimiters are tabs<a id="id49" class="indexterm"/> and commas. These two common choices<a id="id50" class="indexterm"/> are reflected in the <span class="strong"><strong>Tab Separated Values</strong></span> (<span class="strong"><strong>TSV</strong></span>) and <span class="strong"><strong>Comma Separated Values</strong></span> (<span class="strong"><strong>CSV</strong></span>) file extensions, respectively. Sometimes, delimited files are also called <span class="strong"><strong>record-oriented</strong></span> files, as the assumption<a id="id51" class="indexterm"/> is that each row represents a record.</p><p>Below are three instances of some data (three rows describing people), with data values separated by commas. The first row lists the names of the columns. This first row is also called the <span class="strong"><strong>header row</strong></span>, and<a id="id52" class="indexterm"/> it has been highlighted in the data to show it more clearly:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>First name,birth date,favorite color</strong></span>
Sally,1970-09-09,blue
Manu,1984-11-03,red
Martin,1978-12-10,yellow</pre></div><p>Notice that with this example of delimited data, there is no <span class="emphasis"><em>non-data</em></span> information. Everything is either a row or a data value. And the data is highly structured. Yet, there are still some options that can differentiate one delimited format from another. The first differentiator is how each instance of the data (each row) is separated. Usually at the end of a line, a new line, or a carriage return, or both are used depending on the operating environment in use during the creation of the file.</p><div class="section" title="Seeing invisible characters"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec03"/>Seeing invisible characters</h3></div></div></div><p>In the <a id="id53" class="indexterm"/>preceding example, the new line or carriage return is invisible. How do you see the invisible characters? We will read the same file in Text Wrangler on a Mac (similar full-featured editors such as Notepad++ are available for Windows), where we can use the <span class="strong"><strong>Show invisibles</strong></span> option (located by navigating to <span class="strong"><strong>View</strong></span> | <span class="strong"><strong>Text Display</strong></span>).</p><div class="mediaobject"><img src="../Images/image00234.jpeg" alt="Seeing invisible characters"/></div><p style="clear:both; height: 1em;"> </p><p>Another way to view the invisible characters is to use <code class="literal">vi</code> (a command-line text editor) on a Linux system or in <a id="id54" class="indexterm"/>the Terminal window on a Mac (this is not available on a Windows machine, by default). The process to view the invisible characters in a file using <code class="literal">vi</code> is as follows:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">First, use the command:<p><code class="literal">vi &lt;filename&gt;</code></p></li><li class="listitem">Then, type <code class="literal">:</code> to enter the <code class="literal">vi</code> edit mode.</li><li class="listitem">Then, type <code class="literal">set list</code> and press <span class="emphasis"><em>Enter</em></span> to view the invisible characters.</li></ol><div style="height:10px; width: 1px"/></div><p>The following screenshot shows the end-of-line characters that are revealed by <code class="literal">set list</code> in <code class="literal">vi</code>, showing line termination symbol $.</p><div class="mediaobject"><img src="../Images/image00235.jpeg" alt="Seeing invisible characters"/></div><p style="clear:both; height: 1em;"> </p></div><div class="section" title="Enclosing values to trap errant characters"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec04"/>Enclosing values to trap errant characters</h3></div></div></div><p>Another <a id="id55" class="indexterm"/>important option with delimited files is what character to use to enclose each value being separated. For example, comma-separated values are great unless you have numeric values with commas as the thousands separator. Consider the following example, where the salaries were given commas as their thousands separator, but commas are also the delimiter:</p><div class="informalexample"><pre class="programlisting">First name,birth date,favorite color,salary
Sally,1971-09-16,light blue,129,000
Manu,1984-11-03,red,159,960
Martin,1978-12-10,yellow,76,888</pre></div><p>How<a id="id56" class="indexterm"/> can this be fixed at the point of file creation? Well, we have two options:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Option 1</strong></span>: The person creating the delimited file would need to remove the commas in the final column before creating this table (in other words, no commas in salary amounts)</li><li class="listitem"><span class="strong"><strong>Option 2</strong></span>: The person creating this file would need to use an additional symbol to <a id="id57" class="indexterm"/>enclose the data values themselves.</li></ul></div><p>If<a id="id58" class="indexterm"/> option 2 is chosen, typically, a double quote separator is then added to enclose data values. So, <code class="literal">129,000</code> on the first line would become <code class="literal">"129,000"</code>.</p></div><div class="section" title="Escaping characters"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec05"/>Escaping characters</h3></div></div></div><p>What if <a id="id59" class="indexterm"/>the data itself has quotation marks in it? What if Sally's favorite color were listed and shown as <code class="literal">light "Carolina" blue</code>? Take a look:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>First name,birth date,favorite color,salary</strong></span>
"Sally","1971-09-16","light "Carolina" blue","129,000"
"Manu","1984-11-03","red","159,960"
"Martin","1978-12-10","yellow","76,888"</pre></div><p>Internal quotation marks will have to be escaped through the use of another special character, the backslash <code class="literal">\</code>:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>First name,birth date,favorite color,salary</strong></span>
"Sally","1971-09-16","light \"Carolina\" blue","129,000"
"Manu","1984-11-03","red","159,960"
"Martin","1978-12-10","yellow","76,888"</pre></div><div class="note" title="Note"><h3 class="title"><a id="tip03"/>Tip</h3><p>Or, we could try encapsulating with a single quote instead of double quotes, but then we might have issues with possessives such as "it's" or names such as O'Malley. There's always something!</p></div><p>Delimited files are very convenient in that they are easy to understand and easy to access in a simple text editor. However, as we have seen, they also require a bit of planning in advance in order to ensure that the data values are truly separated properly and everything is formatted the way it was intended.</p><p>If you find yourself the unlucky recipient of a file with delimiting errors such as the preceding ones, we'll give you some tricks and tips in <a class="link" title="Chapter 3. Workhorses of Clean Data – Spreadsheets and Text Editors" href="part0024.xhtml#aid-MSDG2">Chapter 3</a>, <span class="emphasis"><em>Workhorses of Clean Data – Spreadsheets and Text Editors</em></span>, for how to clean them up.</p></div><div class="section" title="The JSON format"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec06"/>The JSON format</h3></div></div></div><p><span class="strong"><strong>JavaScript Object Notation</strong></span> (<span class="strong"><strong>JSON</strong></span>), pronounced <span class="emphasis"><em>JAY-sahn</em></span>, is one of the more popular formats<a id="id60" class="indexterm"/> for what is <a id="id61" class="indexterm"/>sometimes<a id="id62" class="indexterm"/> called semi-structured data. Contrary to the implications in its name, JSON is not dependent upon JavaScript to be useful. The name refers to the fact that it was designed to serialize JavaScript objects.</p><p>A collection of data can be called semi-structured when its data values are labeled, but their order does not matter, and in fact, some of the data values may even be missing. A JSON file is just a collection of attribute-value pairs, such as this:</p><div class="informalexample"><pre class="programlisting">{
  "firstName": "Sally",
  "birthDate": "1971-09-16",
  "faveColor": "light\"Carolina\" blue",
  "salary":129000
}</pre></div><p>The <a id="id63" class="indexterm"/>attributes are on the left-hand side of the colon, and the <a id="id64" class="indexterm"/>values are on the right-hand side. Each attribute is separated by a comma. The entire entity is enclosed in curly braces.</p><p>A few things about JSON are similar to delimited files, and a few things are different. First, string values must be double-quoted, and therefore, any double quotes internal to a string must be escaped with a backslash. (The escape character \ , when used as a regular character, must also be escaped!)</p><p>In JSON, commas cannot be included in numeric values unless the values are treated as strings and properly quoted. (Be careful when stringifying numbers, though—are you sure you want to do that? Then, refer to the <span class="emphasis"><em>Data types</em></span> section in this chapter, which can help you with these issues.)</p><div class="informalexample"><pre class="programlisting">{
  "firstName": "Sally",
  "birthDate": "1971-09-16",
  "faveColor": "light\"Carolina\" blue",
  "salary": "129,000"
}</pre></div><p>Multivalue attributes are acceptable, as are hierarchical values (neither of these are available very easily with delimited files). Here is an example of a JSON file with a multivalue attribute for <code class="literal">pet</code> and a hierarchy of data for <code class="literal">jobTitle</code>. Note that we've moved the <code class="literal">salary</code> data inside this new <code class="literal">job</code> hierarchy:</p><div class="informalexample"><pre class="programlisting">{
  "firstName": "Sally",
  "birthDate": "1971-09-16",
  "faveColor": "light\"Carolina\" blue",
  "pet":
  [
    {
      "type": "dog",
      "name": "Fido"
    },
    {
      "type": "dog",
      "name": "Lucky"
    }
  ],
  "job": {
    "jobTitle": "Data Scientist",
    "company": "Data Wizards, Inc.",
    "salary":129000
  }
}</pre></div><div class="section" title="Experimenting with JSON"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl4sec03"/>Experimenting with JSON</h4></div></div></div><p>JSON is an<a id="id65" class="indexterm"/> extremely popular choice of data exchange format because of its extensibility, simplicity, and its support for multivalue attributes, missing attributes, and nested attributes / hierarchies of attributes. The increasing popularity of APIs for distributing datasets has also contributed to JSON's usefulness.</p><p>To see an <a id="id66" class="indexterm"/>example of how an API uses a search term to produce a <span class="strong"><strong>dataset</strong></span> encoded in JSON, we can experiment with the iTunes API. iTunes is a music service run by Apple. Anyone can query the iTunes service for details about songs, artists, and<a id="id67" class="indexterm"/> albums. Search terms can be appended onto the iTunes API URL as follows:</p><p><a class="ulink" href="https://itunes.apple.com/search?term=the+growlers">https://itunes.apple.com/search?term=the+growlers</a></p><p>In this URL, everything after the <code class="literal">=</code> sign is a search term. In this case, I searched for a band I like, called The Growlers. Note that there is a + sign to represent the space character, as URLs do not allow spaces.</p><p>The iTunes API returns 50 results from its music database for my search keywords. The entire set is<a id="id68" class="indexterm"/> formatted as a JSON object. As with all JSON objects, it is formatted as a collection of <span class="strong"><strong>name-value</strong></span> pairs. The JSON returned in this example appears very long, because there are 50 results returned, but each result is actually very simplistic—there are no multivalue attributes or even any hierarchical data in the iTunes data shown in this URL.</p><div class="note" title="Note"><h3 class="title"><a id="note03"/>Note</h3><p>For more details on how to use the iTunes API, visit the Apple iTunes developer documentation at <a class="ulink" href="https://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html">https://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html</a>.</p></div></div></div><div class="section" title="The HTML format"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec07"/>The HTML format</h3></div></div></div><p>HTML <a id="id69" class="indexterm"/>files, or web page files, are another type of text file <a id="id70" class="indexterm"/>that often have a lot of juicy data in them. How many times have you seen an interesting table, or list of information on a website, and wanted to save the data? Sometimes, copying and pasting works to try to create a delimited file from the web page, but most of the time, copying and pasting does not work effectively. HTML files can be terribly messy and thus, are a potentially painful way to extract data. For this reason, sometimes, we refer to web files as unstructured data. Even though web pages may have some HTML tags that could be used to attempt a delimiting type of pattern-based organization of data, they don't always. And there is also a lot of room for error in how these various HTML tags are applied, both across different websites and even within the same website.</p><p>The following <a id="id71" class="indexterm"/>figure shows just a small portion of the <a class="ulink" href="http://weather.com">http://weather.com</a> website. Even though there are pictures and colors and other non-text things in this screenshot, at its base level, this web page is written in HTML, and if we want to pull text data out of this page, we can do that.</p><div class="mediaobject"><img src="../Images/image00236.jpeg" alt="The HTML format"/></div><p style="clear:both; height: 1em;"> </p><p>If we <a id="id72" class="indexterm"/>view the HTML source for the web page, we can <a id="id73" class="indexterm"/>locate a few lines of the nearly 1,000 lines of HTML code that comprise the data and layout instructions for the browser to show that particular weather table:</p><div class="mediaobject"><img src="../Images/image00237.jpeg" alt="The HTML format"/></div><p style="clear:both; height: 1em;"> </p><p>Unstructured <a id="id74" class="indexterm"/>indeed! Of course, it is technically possible to<a id="id75" class="indexterm"/> pull the data value <code class="literal">43</code> (for the temperature in Fahrenheit) from this page, but it's not going to be a fun process, and we have no guarantee that our method to do that will be the same tomorrow or the day after that, as <a class="ulink" href="http://weather.com">http://weather.com</a> could change the source code for the site at any moment. Nonetheless, there is a ton of data on the Web, so in <a class="link" title="Chapter 5. Collecting and Cleaning Data from the Web" href="part0033.xhtml#aid-VF2I1">Chapter 5</a>, <span class="emphasis"><em>Collecting and Cleaning Data from the Web</em></span>, we cover a few strategies to extract data from web-based, unstructured files.</p></div></div></div></div>
<div class="section" title="Archiving and compression"><div class="titlepage" id="aid-K0RQ2"><div><div><h1 class="title"><a id="ch02lvl1sec15"/>Archiving and compression</h1></div></div></div><p>When is a text file also a binary file? When it's been compressed or archived, of course. What are <a id="id76" class="indexterm"/>archiving and compression? In this section, we'll learn what file <a id="id77" class="indexterm"/>archives and compressed files are, how archiving and compression work, and the various standards for each.</p><p>This is an important section as a lot of real-world data (especially, delimited data) will be compressed when you find it out in the real world. What are the most common compression formats that you as a data scientist are likely to run into? We will definitely find the answer to this question. You might also want to compress your data when you share it with others. How can you figure out which compression method is the best choice?</p><div class="section" title="Archive files"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec10"/>Archive files</h2></div></div></div><p>An archive file <a id="id78" class="indexterm"/>is simply a single file that contains many files inside it. The files inside can be either text or binary or a mixture of both. Archive files are created by a special program that takes a list of files and changes them into a single file. Of course, the archive files are created in such a way that they can be expanded back into many files.</p><div class="section" title="tar"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec08"/>tar</h3></div></div></div><p>The most common archived files that you are likely to encounter when doing data science work are<a id="id79" class="indexterm"/> so-called <span class="strong"><strong>Tape ARchive</strong></span> (<span class="strong"><strong>TAR</strong></span>) files, created using the tar program<a id="id80" class="indexterm"/> and usually given a <code class="literal">.tar</code> extension. Their original purpose was to create<a id="id81" class="indexterm"/> archives of magnetic tapes.</p><p>The tar program is available on Unix-like operating systems, and we can access it in the Mac OSX Terminal as well.</p><p>To create a tar file, you simply instruct the tar program which files you want included and what the output file name should be. (Program option <code class="literal">c</code> is used to indicate that we're creating a new archive file, and option <code class="literal">v</code> prints the filenames as they are extracted. The <code class="literal">f</code> option lets us specify the name of the output file.)</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>tar cvf fileArchive.tar reallyBigFile.csv anotherBigFile.csv</strong></span>
</pre></div><p>To "untar" a file (or expand it into the full listing of all the files), you just direct the tar program to the file you want expanded. The <code class="literal">x</code> letter in <code class="literal">xvf</code> stands for eXtract:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>tar xvf fileArchive.tar</strong></span>
</pre></div><p>So, a <code class="literal">.tar</code> archive file includes multiple files, but how many and what are the files? You'll want to make sure that before you start extracting files, you have enough available disk space and that the files are really what you wanted to begin with. The <code class="literal">t</code> option in the tar command will show a list of the files inside a tar file:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>tar –tf fileArchive.tar</strong></span>
</pre></div><p>There are many more archive programs apart from tar, but some of the interesting ones (for example, the built-in archiving ZIP compressor on OSX and the various ZIP and RAR utilities on Windows) also perform compression on the files, in addition to archiving, so we should probably discuss this concept next.</p></div></div><div class="section" title="Compressed files"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec11"/>Compressed files</h2></div></div></div><p>Compressed files<a id="id82" class="indexterm"/> are those files that have been made smaller so that they will take up less space. Smaller files mean less storage space on the disk and a faster transfer time if the file needs to be shared over the network. In the case of data files, like the ones we are interested in, the assumption is that the compressed file can be easily uncompressed back to the original.</p><div class="section" title="How to compress files"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec09"/>How to compress files</h3></div></div></div><p>There<a id="id83" class="indexterm"/> are numerous ways of creating compressed files, and which one you choose will depend on the operating system you are using and what compression software you have installed. On OSX, for example, any file or folder (or group) can easily be compressed by selecting it in <span class="strong"><strong>Finder</strong></span>, right-clicking on it, and choosing <span class="strong"><strong>Compress</strong></span> from the menu. This action will create a compressed (<code class="literal">.zip</code> extension) file in the same directory as the original file. This is shown in the following image:</p><div class="mediaobject"><img src="../Images/image00238.jpeg" alt="How to compress files"/></div><p style="clear:both; height: 1em;"> </p></div><div class="section" title="How to uncompress files"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec10"/>How to uncompress files</h3></div></div></div><p>The collection step of the data science process will often include downloading compressed files. These<a id="id84" class="indexterm"/> might be delimited text files, such as the ones we described earlier in this chapter, or they might be files containing multiple types of data files, such as spreadsheets or SQL commands used to build a database.</p><p>In any case, uncompressing a file returns the data to a state where we can use it to accomplish our goals. How do we know which program to use to uncompress the file? The first and biggest clue is the file's extension. This is a key tip-off as to what compression program created the file. Knowing how to uncompress the file is dependent on knowing how it was compressed.</p><p>In Windows, you can see the installed program that is associated with your file extension by right-clicking on the file and choosing <span class="strong"><strong>Properties</strong></span>. Then, look for the <span class="strong"><strong>Open With</strong></span> option to see which program Windows thinks will uncompress the file.</p><p>The remainder of this section will outline how to use command-line programs on OSX or a Linux system.</p><div class="section" title="Compression with zip, gzip, and bzip2"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl4sec04"/>Compression with zip, gzip, and bzip2</h4></div></div></div><p>zip, gzip and bzip2 are<a id="id85" class="indexterm"/> the most <a id="id86" class="indexterm"/>common<a id="id87" class="indexterm"/> compression programs. Their uncompression partners are called Unzip, Gunzip, and Bunzip2, respectively.</p><p>The following table shows a sample command-line for compressing and uncompressing in each of these programs.</p><div class="informaltable"><table border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th valign="bottom"> </th><th valign="bottom">
<p>Compress</p>
</th><th valign="bottom">
<p>Uncompress</p>
</th></tr></thead><tbody><tr><td valign="top">
<p><span class="strong"><strong>Zip</strong></span></p>
</td><td valign="top">
<p><span class="strong"><strong>zip filename.csv filename.zip</strong></span></p>
</td><td valign="top">
<p><span class="strong"><strong>unzip filename.zip</strong></span></p>
</td></tr><tr><td valign="top">
<p><span class="strong"><strong>gzip</strong></span></p>
</td><td valign="top">
<p><span class="strong"><strong>gzip filename.csv filename.gz</strong></span></p>
</td><td valign="top">
<p><span class="strong"><strong>gunzip filename.gz</strong></span></p>
</td></tr><tr><td valign="top">
<p><span class="strong"><strong>bzip2</strong></span></p>
</td><td valign="top">
<p><span class="strong"><strong>bzip2 filename.csv filename.bz2</strong></span></p>
</td><td valign="top">
<p><span class="strong"><strong>bunzip2 filename.bz2</strong></span></p>
</td></tr></tbody></table></div><p>Sometimes, you <a id="id88" class="indexterm"/>will see a file that includes both a <code class="literal">.tar</code> and a <code class="literal">.gz</code> extension or a <code class="literal">.bz2</code> extension like this: <code class="literal">somefile.tar.gz</code>. Other combinations<a id="id89" class="indexterm"/> that are common include: <code class="literal">.tgz</code> and <code class="literal">.tbz2</code>, as <a id="id90" class="indexterm"/>in <code class="literal">somefile.tgz</code>. These are files that have been tarred (archived) first and then compressed using gzip or bzip2. The reason for this is that gzip and bzip2 are not archiving programs; they are only compressors. Therefore, they can only compress a single file (or file archive) at a time. As tar's job is to make multiple files into single files, these programs are found together very often.</p><p>The tar program even has a built-in option that will gzip or bzip2 a file immediately after tarring it. To gzip the newly created <code class="literal">.tar</code> file, we can simply add <code class="literal">z</code> to the preceding tar command, and modify the filename:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>tar cvzf fileArchive.tar.gz reallyBigFile.csv anotherBigFile.csv</strong></span>
</pre></div><p>Or, you can do this in two steps:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>tar cvf fileArchive.tar reallyBigFile.csv anotherBigFile.csv</strong></span>
<span class="strong"><strong>gzip fileArchive.tar</strong></span>
</pre></div><p>This sequence of commands will create the <code class="literal">fileArchive.tar.gz</code> file:</p><p>To uncompress a tar.gz file, use two steps:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>gunzip fileArchive.tar.gz</strong></span>
<span class="strong"><strong>tar xvf fileArchive.tar</strong></span>
</pre></div><p>These steps also work for bzip2 files:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>tar cvjf fileArchive.tar.bz2 reallyBigFile.csv anotherBigFile.csv</strong></span>
</pre></div><p>To uncompress a tar.bz2 file, use two steps:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>bunzip2 fileArchive.tar.bz</strong></span>
<span class="strong"><strong>tar xvf fileArchive.tar</strong></span>
</pre></div></div><div class="section" title="Compression options"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl4sec05"/>Compression options</h4></div></div></div><p>When <a id="id91" class="indexterm"/>compressing and uncompressing, there are many other options you should take into consideration in order to make your data cleaning job easier:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Do you want to compress a file and also keep the original? By default, most compression and archiving programs will remove the original file. If you want to keep the original file and also create a compressed version of it, you can usually specify this.</li><li class="listitem">Do <a id="id92" class="indexterm"/>you want to add new files to an existing compressed file? There <a id="id93" class="indexterm"/>are options for this in most archiving and compression programs. Sometimes, this is called <span class="strong"><strong>updating</strong></span> or <span class="strong"><strong>replacing</strong></span>.</li><li class="listitem">Do you want to encrypt the compressed file and require a password to open it? Many compression programs provide an option for this.</li><li class="listitem">When<a id="id94" class="indexterm"/> uncompressing, do you want to overwrite files in the directory with the same name? Look for a <span class="strong"><strong>force</strong></span> option.</li></ul></div><p>Depending on which compression software you are using and what its options are, you can use many of these options to make the job of dealing with files easier. This is especially true with large files—either large in size or large in number!</p></div></div><div class="section" title="Which compression program should I use?"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec11"/>Which compression program should I use?</h3></div></div></div><p>The<a id="id95" class="indexterm"/> concepts in this section on archiving and compression are widely applicable for any operating system and any type of compressed data files. Most of the time, we will be downloading compressed files from somewhere, and our main concern will be uncompressing these files efficiently.</p><p>However, what if you are creating compressed files yourself? What if you need to uncompress a data file, clean it, then recompress it and send it to a coworker? Or what if you are given a choice of files to download, each in a different compression format: zip, bz2, or gz? Which format should you choose?</p><p>Assuming that we are in an operating environment that allows you to work with multiple compression types, there are a few rules of thumb for what the various strengths and weaknesses of the different compression types are.</p><p>Some of the<a id="id96" class="indexterm"/> factors we use when making a compression decision are:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The speed of compressing and uncompressing</li><li class="listitem">The compression ratio (how much smaller did the file get?)</li><li class="listitem">The interoperability of the compression solution (can my audience easily decompress this file?)</li></ul></div><div class="section" title="Rules of thumb"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl4sec06"/>Rules of thumb</h4></div></div></div><p>Gzip is faster to compress and decompress, and it is readily available on every OSX and Linux machine. However, some <a id="id97" class="indexterm"/>Windows users will not have<a id="id98" class="indexterm"/> a gunzip program readily available.</p><p>Bzip2 makes smaller files than gzip and zip, but it takes longer to do so. It is widespread on OSX and Linux. Windows<a id="id99" class="indexterm"/> users will probably struggle to handle <a id="id100" class="indexterm"/>bzip2 files if they have not already installed special software.</p><p>Zip is <a id="id101" class="indexterm"/>readily available on Linux, OSX, and Windows, and its speed to compress and decompress is not terrible. However, it does not create very favorable compression ratios (other compressors make smaller files). Still, its ubiquity and relative speed (compared to bzip2, for example) are strong points in its favor.</p><p>RAR is a<a id="id102" class="indexterm"/> widely available archiving and compression solution for Windows; however, its availability for OSX and Linux requires special software, and its compression speed is not as good as some of the other solutions.</p><p>Ultimately, you will have to decide on a compression standard based on the particular project you are working on and the needs of your audience or user, whether that is yourself, a customer, or a client.</p></div></div></div></div>
<div class="section" title="Data types, nulls, and encodings"><div class="titlepage" id="aid-KVCC2"><div><div><h1 class="title"><a id="ch02lvl1sec16"/>Data types, nulls, and encodings</h1></div></div></div><p>This<a id="id103" class="indexterm"/> section provides an overview of the most common data types that data<a id="id104" class="indexterm"/> scientists must deal with on a regular basis and some of the variations<a id="id105" class="indexterm"/> between these types. We also talk about converting between data types and how to safely convert without losing information (or at least understanding the risks beforehand).</p><p>This section also covers the mysterious world of empties, nulls, and blanks. We explore the various types of missing data and describe how missing data can negatively affect results of data analysis. We will compare choices and trade-offs for handling the missing data and some of the pros and cons of each method.</p><p>As much of our data will be stored as strings, we will learn to identify different character encodings and some of the common formats you will encounter with real-world data. We will learn how to identify character encoding problems and how to determine the proper type of character encoding for a particular dataset. We will write some Python code to convert from one encoding scheme to another. We will also cover the limitations of this strategy.</p><div class="section" title="Data types"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec12"/>Data types</h2></div></div></div><p>Whether we<a id="id106" class="indexterm"/> are cleaning data stored in a text file, a database system, or in some other format, we will start to recognize the same types of data make an appearance over and over: numbers of various kinds, dates, times, characters, strings of characters, and more. The upcoming sections describe a few of the most common data types, along with some examples of each.</p><div class="section" title="Numeric data"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec12"/>Numeric data</h3></div></div></div><p>In this <a id="id107" class="indexterm"/>section, we will discover that there are many ways to store a<a id="id108" class="indexterm"/> number, and some of them are easier to clean and manage than others. Still, numbers are fairly straightforward compared to strings and dates, so we will start with these before moving on to trickier data types.</p><div class="section" title="Integers"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl4sec07"/>Integers</h4></div></div></div><p>Integers, or <a id="id109" class="indexterm"/>whole numbers, can be positive or negative, and just like the name implies, they do not have decimal points or fractions. Depending on what kind of storage system the integers are stored in, for example, in a <span class="strong"><strong>Database Management System</strong></span> (<span class="strong"><strong>DBMS</strong></span>), we may also have additional information about how large <a id="id110" class="indexterm"/>an integer can be stored as well as whether it is allowed to be signed (positive or negative values) or only unsigned (all positive values).</p></div><div class="section" title="Numbers with decimals"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl4sec08"/>Numbers with decimals</h4></div></div></div><p>In our<a id="id111" class="indexterm"/> data cleaning work, numbers with a fractional component—such as prices, averages, measurements, and the like—are typically expressed using a decimal point (rather than a numerator/denominator). Sometimes, the particular storage system in place also has rules specifying the number of digits that<a id="id112" class="indexterm"/> are allowed to come after the decimal point (<span class="strong"><strong>scale</strong></span>) as <a id="id113" class="indexterm"/>well as the total number of digits allowed in the number (<span class="strong"><strong>precision</strong></span>). For example, we say that the number 34.984 has a precision of 3 and a scale of 5.</p><p>Different data storage systems will also allow for different types of decimal numbers. For example, a DBMS may allow us to declare whether we will be storing floating-point numbers, decimal numbers, and currency/money numbers at the time we set up our database. Each of these will act slightly differently—in math problems, for instance. We will need to read the guidance provided by the DBMS for each data type and stay on top of changes. Many times, the DBMS provider will change the specifications for a particular data type because of memory concerns or the like.</p><p>Spreadsheet applications, on the other hand, unlike DBMS applications, are designed to display data in addition to just storing it. Therefore, we may actually be able to store a number in one format and display it in another. This can cause some confusion if formatting has been applied to data cells in a spreadsheet. The following figure shows an example of some decimal display properties being set for a cell. The formula bar shows the full number 34.984, but the cell shows that the number appears to have been rounded down.</p><div class="mediaobject"><img src="../Images/image00239.jpeg" alt="Numbers with decimals"/></div><p style="clear:both; height: 1em;"> </p><div class="note" title="Note"><h3 class="title"><a id="tip04"/>Tip</h3><p>In<a id="id114" class="indexterm"/> many locations around the world, the comma character separates the decimal from the nondecimal portion of a number rather than a dot or period character. This is a good reminder that it is always worth inspecting the localization settings of the system you are on and making sure that they match the expectations of the data you are working with. For example, in OSX, there is a <span class="strong"><strong>Language &amp; Region</strong></span> dialogue located in the <span class="strong"><strong>Systems Preferences</strong></span> menu. From here, you can change your localization settings if you need to.</p></div><p>Unlike in a DBMS, a raw text file has no options to specify the size or expectations of a number field, and unlike a spreadsheet, the text file has no display options for a given data value either. If a text file shows a value of 34.98, then that may be all we know about that number.</p></div><div class="section" title="When numbers are not numeric"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl4sec09"/>When numbers are not numeric</h4></div></div></div><p>Numeric<a id="id115" class="indexterm"/> data is first and foremost comprised of sequences of digits 0-9 and, sometimes, a decimal point. But a key point about true numeric data is that it is primarily designed to have calculations performed on it. We should choose numeric storage for our data when we expect to be able to <span class="emphasis"><em>do math</em></span> on a data value, when we expect to compare one value to another numerically, or when we want items to be sorted in numeric order. In these cases, the data values need to be stored as numbers. Consider the following list of numbers sorted by their number value, low to high:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">1</li><li class="listitem">10</li><li class="listitem">11</li><li class="listitem">123</li><li class="listitem">245</li><li class="listitem">1016</li></ul></div><p>Now, consider the same list sorted as if they are text values in an address field:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">1 Elm Lane</li><li class="listitem">10 Pine Cir.</li><li class="listitem">1016 Pine Cir.</li><li class="listitem">11 Front St.</li><li class="listitem">123 Main St.</li><li class="listitem">245 Oak Ave.</li></ul></div><p>Telephone<a id="id116" class="indexterm"/> numbers and postal codes (and house numbers in street addresses as in the previous example) are often comprised of numeric digits, but when we think of them as data values, do they have more in common with text or with numeric data? Do we plan to add them, subtract them, or take their averages or standard deviations? If not, they may more appropriately be stored as text values.</p></div></div><div class="section" title="Dates and time"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec13"/>Dates and time</h3></div></div></div><p>You <a id="id117" class="indexterm"/>are probably familiar with many different ways of writing the same date, and you probably have some that you prefer over others. For instance, here are a few common ways of writing the same date:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">11-23-14</li><li class="listitem">11-23-2014</li><li class="listitem">23-11-2014</li><li class="listitem">2014-11-23</li><li class="listitem">23-Nov-14</li><li class="listitem">November 23, 2014</li><li class="listitem">23 November 2014</li><li class="listitem">Nov. 23, 2014</li></ul></div><p>Regardless of our preference for writing dates, a complete date is made up of three parts: month, day, and year. Any date should be able to be parsed into these component parts. Areas of confusion with dates are usually in two areas: lack of clarity about the month signifier and a day signifier for numbers below 12, and confusion about specifying years. For example, if we only see "11-23", we can assume November 23, as there is no month abbreviated "23", but what year is it? If we see a date of "11-12", is that the 12th of November or the 11th of December? And in what year? Does a year of 38 signify 1938 or 2038?</p><p>Most DBMSes have a particular way you should import data if you have specified it as a date, and if you export data, you will get it back in that date format too. However, these systems also have many functions that you can apply to reformat dates or pull out just the pieces you want. For example, MySQL has many interesting date functions that allow us to pull out just the month or day, as well as more complicated functions that allow us to find out what week in the year a particular date falls in or what day of the week it was. For example, the following SQL counts the messages in the Enron dataset from <a class="link" title="Chapter 1. Why Do You Need Clean Data?" href="part0014.xhtml#aid-DB7S1">Chapter 1</a>, <span class="emphasis"><em>Why Do You Need Clean Data?</em></span>, that were sent on May 12 each year, and it also prints the day of the week:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>SELECT YEAR(date) AS yr, DAYOFWEEK(date) AS day, COUNT(mid) FROM message WHERE MONTHNAME(date) = "May" AND DAY(date) = 12</strong></span>
<span class="strong"><strong>GROUP BY yr, day</strong></span>
<span class="strong"><strong>ORDER BY yr ASC;</strong></span>
</pre></div><p>Some<a id="id118" class="indexterm"/> spreadsheet programs, such as Excel, internally store dates as numbers but then allow the user to display the values in any format that they like using either built-in or custom formats. Excel stores a given date value as a fractional number of days since Dec 31, 1899. You can see the internal representation of a date in Excel by entering a date and asking for <span class="strong"><strong>General</strong></span> formatting, as shown in the following figure. Excel stores May 21, 1986 as <span class="strong"><strong>31553</strong></span>.</p><div class="mediaobject"><img src="../Images/image00240.jpeg" alt="Dates and time"/></div><p style="clear:both; height: 1em;"> </p><p>So, when you convert back and forth between different formats, switching the slashes to dashes, or swapping the order of months and days, Excel is just applying a different <span class="emphasis"><em>look</em></span> to the date as you see it, but underneath, its internal representation of the date value has not changed.</p><p>Why does Excel need a fractional number to store the date since 1899? Isn't the number of days a whole number? It turns out that the fraction part is the way Excel stores time.</p><div class="mediaobject"><img src="../Images/image00241.jpeg" alt="Dates and time"/></div><p style="clear:both; height: 1em;"> </p><p>In the preceding figure, we can see how an internal date of 31553 is mapped to midnight, but 31553.5 (halfway through the day) is noon, and 31553.75 is 6 p.m. The greater precision we add to the decimal points, the greater time specificity we will get in the internal representation.</p><p>But not all <a id="id119" class="indexterm"/>data storage systems store dates and time as fractions, and they do not all start at the same spot. Some systems store dates and time as a number of seconds since the Unix epoch (00:00:00, January 1, 1970, universal time), and a negative number is used to store time before the epoch.</p><p>Both DBMS and spreadsheet applications allow for some date math, just like with numbers. In both types of systems, there are functions that allow dates to be subtracted to find a difference, or other calculations, such as adding a number of weeks to a day and getting a new day value.</p></div><div class="section" title="Strings"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec14"/>Strings</h3></div></div></div><p>Strings<a id="id120" class="indexterm"/> represent sequences of any character data, including alphabetic<a id="id121" class="indexterm"/> letters, numbers, spaces and punctuation, characters in hundreds of languages, and all kinds of special purpose symbols. Strings are very flexible, and this makes them the most common way to store data. Plus, as they can store nearly any other type of data (not necessarily efficiently), strings become the lowest common denominator to communicate data or move it from one system to another.</p><p>As with numeric data, the storage mechanism we are using at the moment may have some guidelines we are expected to use with strings. For example, a DBMS or spreadsheet may require that we state in advance what size we expect our strings to be or what types of characters we are expecting. Character encoding is an interesting and important area on its own, so we have a whole section on it coming up later in this chapter.</p><p>Or, there may be guidelines for the size of the data we are allowed to work with in a particular environment. In the world of databases, there are fixed and variable width character columns, which are designed to hold shorter strings, and some DBMS vendors have designed a text type that is intended to hold longer strings.</p><div class="note" title="Note"><h3 class="title"><a id="note04"/>Note</h3><p>Generically, many data scientists extend this terminology. As string data gets bigger and more unwieldy, it is referred to as text data, and its analysis becomes text analysis or text mining.</p></div><p>String (or text) data can be found in any of the file formats we talked about earlier in the chapter (delimited files, JSON, or web pages) and can be stored in or accessed by many of the storage solutions we talked about (APIs, DBMS, spreadsheets, and flat files). But no matter what the storage and delivery mechanism, it seems as though strings are most often discussed in same breath as big, messy, unstructured data. An Excel expert will be unfazed if asked to parse out the pieces of a few hundred street addresses or sort a few thousand book titles into categories. No statistician or programmer is going to blink if asked to count <a id="id122" class="indexterm"/>the character frequency in a word list. But when string <a id="id123" class="indexterm"/>manipulation turns into "extract the source code found embedded in 90 million e-mail messages written in Russian" or "calculate the lexical diversity of the entire contents of the Stack Overflow website", things get a lot more interesting.</p></div><div class="section" title="Other data types"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec15"/>Other data types</h3></div></div></div><p>Numbers, dates/times, and strings are the <span class="emphasis"><em>big three</em></span> data types, but there are many other types of exotic data that we will run into depending on what environment we are working in. Here is a quick rundown of some of the more interesting ones:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Sets/enums</strong></span>: If <a id="id124" class="indexterm"/>your data seems to only have a few choices for possible data values, you may be looking at a set or enumerated (enum) type. An example of enumerated data might be the set of possible final grades in a college course: {A, A-, B+, B, B-, C+, C, C-, D+, D, D-, F, W}.</li><li class="listitem"><span class="strong"><strong>Booleans</strong></span>: If <a id="id125" class="indexterm"/>your data is limited to one of just two selections, and they evaluate to 0/1 or true/false, you may be looking at Boolean data. A database column called <code class="literal">package_shipped</code> might have values of either yes or no, indicating whether a package has been shipped out.</li><li class="listitem"><span class="strong"><strong>Blobs (binary large objects)</strong></span>: If your data is binary, for example, you are storing the <a id="id126" class="indexterm"/>actual bytes for a picture file (not just the link to it) or the actual bytes for an mp3 music file, then you are probably looking at blob data.</li></ul></div></div></div><div class="section" title="Converting between data types"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec13"/>Converting between data types</h2></div></div></div><p>Conversions<a id="id127" class="indexterm"/> between data types are an inevitable part of the cleaning job. You may be given string data, but you know that you need to perform math on it, so you wish to store it as a number. You may be given a date string in one format but you want it in a different date format. Before we go any further, though, we need to <a id="id128" class="indexterm"/>discuss a potential problem with conversions.</p><div class="section" title="Data loss"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec16"/>Data loss</h3></div></div></div><p>There is a<a id="id129" class="indexterm"/> risk of losing data when converting from one data type to another. Usually, this happens when the target data type is not capable of storing as much detail as the original data type. Sometimes, we are not upset by data loss (in fact, there may even be times when a cleaning procedure will warrant some intentional loss), but if we are not <a id="id130" class="indexterm"/>expecting the data loss, it can be devastating. Risk factors include:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Converting between different sizes of the same data type</strong></span>: Suppose you have a string column that is 200 characters long and you decide to move the data to a column that is only 100 characters long. Any data that exceeds 100 characters might be chopped off or truncated. This can also happen when switching between different sizes of numeric columns, for example, when going from big integers to regular integers or from regular integers to tiny integers.</li><li class="listitem"><span class="strong"><strong>Converting between different levels of precision</strong></span>: Suppose you have a list of decimal numbers that are precise to four digits, and then you convert them to two digits of precision, or even worse, to integers. Each number will be rounded off or truncated, and you will lose the precision that you had.</li></ul></div></div></div><div class="section" title="Strategies for conversion"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec14"/>Strategies for conversion</h2></div></div></div><p>There <a id="id131" class="indexterm"/>are many strategies to handle data type conversions, and which one you use depends on where the data is being stored at the moment. We are going to cover two of the most common ways in which we encounter data type conversions in the data science cleaning process.</p><p>The<a id="id132" class="indexterm"/> first strategy, SQL-based manipulation, will <a id="id133" class="indexterm"/>apply if we have data in a database. We can use database functions, available in nearly every database system, to slice and dice the data into a different format, suitable for either exporting as a query result or for storing in another column.</p><p>The second <a id="id134" class="indexterm"/>strategy, file-based manipulation, comes<a id="id135" class="indexterm"/> into play when we have been given a flat file of data—for example, a spreadsheet or JSON file—and we need to manipulate the data types in some way after reading them out of the file.</p><div class="section" title="Type conversion at the SQL level"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec17"/>Type conversion at the SQL level</h3></div></div></div><p>Here, we<a id="id136" class="indexterm"/> will walk through <a id="id137" class="indexterm"/>a few common cases when SQL can be used to manipulate data types.</p><div class="section" title="Example one – parsing MySQL date into a formatted string"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl4sec10"/>Example one – parsing MySQL date into a formatted string</h4></div></div></div><p>For this<a id="id138" class="indexterm"/> example, we will return to the Enron e-mail dataset we used in <a class="link" title="Chapter 1. Why Do You Need Clean Data?" href="part0014.xhtml#aid-DB7S1">Chapter 1</a>, <span class="emphasis"><em>Why Do You Need Clean Data?</em></span>. As with the previous example, we are going to look in the message table, where we have been using the date column, which is stored as a <code class="literal">datetime</code> MySQL data type. Suppose we want to print a full date with spelled-out months (as opposed to numbers) and even the day of the week and time of day. How can we best achieve this?</p><p>For the record with the message ID (mid) of 52, we have:</p><div class="informalexample"><pre class="programlisting">2000-01-21 04:51:00</pre></div><p>We want is this:</p><div class="informalexample"><pre class="programlisting">4:51am, Friday, January 21, 2000</pre></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Option 1: Use <code class="literal">concat()</code> and individual date and time functions, as shown in the following code sample. The weakness of this option is that the a.m./p.m. is not printed easily:<div class="informalexample"><pre class="programlisting"><span class="strong"><strong>SELECT concat(hour(date),</strong></span>
<span class="strong"><strong>':',</strong></span>
<span class="strong"><strong>minute(date),</strong></span>
<span class="strong"><strong>', ',</strong></span>
<span class="strong"><strong>dayname(date),</strong></span>
<span class="strong"><strong>', ',</strong></span>
<span class="strong"><strong>monthname(date),</strong></span>
<span class="strong"><strong>' ',</strong></span>
<span class="strong"><strong>day(date),</strong></span>
<span class="strong"><strong>', ',</strong></span>
<span class="strong"><strong>year(date))</strong></span>
<span class="strong"><strong>FROM message WHERE mid=52;</strong></span>
</pre></div><p>Result:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>4:51, Friday, January 21, 2000</strong></span>
</pre></div><p>If we decided that we really wanted the a.m./p.m., we could use an if statement that tests the hour and prints "a.m". if the hour is less than 12 and "pm" otherwise:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>SELECT concat(</strong></span>
<span class="strong"><strong>  concat(hour(date),</strong></span>
<span class="strong"><strong>    ':',</strong></span>
<span class="strong"><strong>    minute(date)),</strong></span>
<span class="strong"><strong>  if(hour(date)&lt;12,'am','pm'),</strong></span>
<span class="strong"><strong>  concat(</strong></span>
<span class="strong"><strong>    ', ',</strong></span>
<span class="strong"><strong>    dayname(date),</strong></span>
<span class="strong"><strong>    ', ',</strong></span>
<span class="strong"><strong>    monthname(date),</strong></span>
<span class="strong"><strong>    ' ',</strong></span>
<span class="strong"><strong>    day(date),</strong></span>
<span class="strong"><strong>    ', ',</strong></span>
<span class="strong"><strong>    year(date)</strong></span>
<span class="strong"><strong>  )</strong></span>
<span class="strong"><strong>)</strong></span>
<span class="strong"><strong>FROM message</strong></span>
<span class="strong"><strong>WHERE mid=52;</strong></span>
</pre></div><p>Result:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>4:51am Friday, January 21, 2000</strong></span>
</pre></div><div class="note" title="Note"><h3 class="title"><a id="tip05"/>Tip</h3><p>MySQL<a id="id139" class="indexterm"/> date and time functions, such as <code class="literal">day()</code> and <code class="literal">year()</code>, are described in their documentation: <a class="ulink" href="http://dev.mysql.com/doc/refman/5.7/en/date-and-time-functions.html">http://dev.mysql.com/doc/refman/5.7/en/date-and-time-functions.html</a>, and <a id="id140" class="indexterm"/>their string functions, such as <code class="literal">concat()</code>, can be found here: <a class="ulink" href="http://dev.mysql.com/doc/refman/5.7/en/string-functions.html">http://dev.mysql.com/doc/refman/5.7/en/string-functions.html</a>. Other database management systems will have similar versions of these functions.</p></div></li><li class="listitem">Option 2: Use the more sophisticated <code class="literal">date_format()</code> MySQL function. This function takes a series of string specifiers for how you want the date to be formatted. There is a very long list of these specifiers in the MySQL documentation. A completed example to convert the date into our desired format is shown in the following code:<div class="informalexample"><pre class="programlisting"><span class="strong"><strong>SELECT date_format(date, '%l:%i%p, %W, %M %e, %Y')</strong></span>
<span class="strong"><strong>FROM message</strong></span>
<span class="strong"><strong>WHERE mid=52;</strong></span>
</pre></div><p>Result:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>4:51AM, Friday, January 21, 2000</strong></span>
</pre></div><p>This is pretty close to what we said we wanted, and it is much shorter than Option 1. The only difference is that the a.m./p.m. is capitalized. If we really want it lowercased, we can do this:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>SELECT concat(</strong></span>
<span class="strong"><strong>  date_format(date, '%l:%i'),</strong></span>
<span class="strong"><strong>  lower(date_format(date,'%p ')),</strong></span>
<span class="strong"><strong>  date_format(date,'%W, %M %e, %Y')</strong></span>
<span class="strong"><strong>)</strong></span>
<span class="strong"><strong>FROM message</strong></span>
<span class="strong"><strong>WHERE mid=52;</strong></span>
</pre></div><p>Result:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>4:51am, Friday, January 21, 2000</strong></span>
</pre></div></li></ul></div></div><div class="section" title="Example two – converting a string into MySQL's date type"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl4sec11"/>Example two – converting a string into MySQL's date type</h4></div></div></div><p>For<a id="id141" class="indexterm"/> this example, let's look at a new table in the Enron schema: the table called <code class="literal">referenceinfo</code>. This table shows the messages to which the other messages refer. For example, the first entry in that table, with a <code class="literal">rfid</code> <code class="literal">2</code>, contains the text of the e-mail to which message 79 refers. The column is a string, and its data looks like this (in part):</p><div class="informalexample"><pre class="programlisting">&gt; From: Le Vine, Debi&gt; Sent: Thursday, August 17, 2000 6:29 PM&gt; To: ISO Market Participants&gt; Subject: Request for Bids - Contract for Generation Under Gas&gt; Curtailment Conditions&gt;&gt; Attached is a Request for Bids to supply the California ISO with&gt; Generation</pre></div><p>This is a very messy string! Let's take on the job of extracting the date shown on the top line and converting it into a MySQL date type, suitable for inserting into another table or for performing some date math.</p><p>To do this, we will use the built-in <code class="literal">str_to_date()</code>MySQL function. This function is a bit like <code class="literal">date_format()</code> that we saw earlier, except that it's backwards. Here is a working example that will look for the word <code class="literal">Sent:</code> and extract the following characters up to the <code class="literal">&gt;</code> symbol and then turn these characters into a real MySQL datetime data type:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>SELECT</strong></span>
<span class="strong"><strong>str_to_date(</strong></span>
<span class="strong"><strong>  substring_index(</strong></span>
<span class="strong"><strong>    substring_index(reference,'&gt;',3),</strong></span>
<span class="strong"><strong>    'Sent: ',</strong></span>
<span class="strong"><strong>    -1</strong></span>
<span class="strong"><strong>  ),</strong></span>
<span class="strong"><strong>  '%W,%M %e, %Y %h:%i %p'</strong></span>
<span class="strong"><strong>)</strong></span>
<span class="strong"><strong>FROM referenceinfo</strong></span>
<span class="strong"><strong>WHERE mid=79;</strong></span>
</pre></div><p>Result:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>2000-08-17 18:29:00</strong></span>
</pre></div><p>Now we<a id="id142" class="indexterm"/> have a datetime value that is ready for inserting into a new MySQL column or for performing more date functions or calculations on it.</p></div><div class="section" title="Example three – casting or converting MySQL string data to a decimal number"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl4sec12"/>Example three – casting or converting MySQL string data to a decimal number</h4></div></div></div><p>In this example, let's consider how to convert numbers hiding inside a text column into a format suitable for calculations.</p><p>Suppose we were interested in extracting the price for a barrel of oil (abbreviated <span class="emphasis"><em>bbl</em></span>) from some e-mail messages sent to Enron from a mailing list. We could write a query such that every time we see the <code class="literal">/bbl</code> string in an e-mail message from a certain sender, we look for the preceding dollar sign and extract the attached numeric value as a decimal number.</p><p>Here is a sample snippet from an e-mail message in the Enron message table with a message ID (<code class="literal">mid</code>) of 270516, showing how the number looks inside the string:</p><div class="informalexample"><pre class="programlisting">March had slipped by 51 cts at the same time to trade at $18.47/bbl.</pre></div><p>The MySQL command to perform this string extraction and conversion to a decimal is as follows:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>SELECT convert(</strong></span>
<span class="strong"><strong>         substring_index(</strong></span>
<span class="strong"><strong>           substring(</strong></span>
<span class="strong"><strong>             body,</strong></span>
<span class="strong"><strong>             locate('$',body)+1</strong></span>
<span class="strong"><strong>           ),</strong></span>
<span class="strong"><strong>           '/bbl',</strong></span>
<span class="strong"><strong>           1</strong></span>
<span class="strong"><strong>         ),</strong></span>
<span class="strong"><strong>         decimal(4,2)</strong></span>
<span class="strong"><strong>      ) as price</strong></span>
<span class="strong"><strong>FROM message</strong></span>
<span class="strong"><strong>WHERE body LIKE "%$%" AND body LIKE "%/bbl%" AND sender = 'energybulletin@platts.com';</strong></span>
</pre></div><p>The <code class="literal">WHERE</code> clause restrictions are added so that we make sure we are only getting messages that have bbl oil prices in them.</p><p>The <code class="literal">convert()</code> function is similar to <code class="literal">cast()</code> in MySQL. Most modern database systems will have a<a id="id143" class="indexterm"/> way of converting data types into numbers like this.</p></div></div><div class="section" title="Type conversion at the file level"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec18"/>Type conversion at the file level</h3></div></div></div><p>In this <a id="id144" class="indexterm"/>section, we will show<a id="id145" class="indexterm"/> some common cases when data types will need to be manipulated at the file level.</p><div class="note" title="Note"><h3 class="title"><a id="tip06"/>Tip</h3><p>This material really only applies to file types where there is an implicit typing structure, for example, spreadsheets and semi-structured data like JSON. We have no examples here that use delimited (text-only) flat files, as in a text file, all data is text data!</p></div><div class="section" title="Example one – type detection and converting in Excel"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl4sec13"/>Example one – type detection and converting in Excel</h4></div></div></div><p>You<a id="id146" class="indexterm"/> may be familiar with type converting in Excel and similar spreadsheet applications via the cell formatting menu options. The typical procedure involves selecting the cells you want to change and using the drop-down menu located on the ribbon.</p><div class="mediaobject"><img src="../Images/image00242.jpeg" alt="Example one – type detection and converting in Excel"/></div><p style="clear:both; height: 1em;"> </p><p>Or, if that does not offer enough options, there is also the <span class="strong"><strong>Format Cells</strong></span> dialogue, located in the format menu, which offers more granular control over the output of the conversion process.</p><div class="mediaobject"><img src="../Images/image00243.jpeg" alt="Example one – type detection and converting in Excel"/></div><p style="clear:both; height: 1em;"> </p><p>The<a id="id147" class="indexterm"/> lesser-known <code class="literal">istext()</code> and <code class="literal">isnumber()</code> functions may also be useful in formatting data in Excel.</p><p> </p><div class="mediaobject"><img src="../Images/image00244.jpeg" alt="Example one – type detection and converting in Excel"/></div><p style="clear:both; height: 1em;"> </p><p>These functions can be applied to any cell, and they return <span class="strong"><strong>TRUE</strong></span> or <span class="strong"><strong>FALSE</strong></span> depending on whether the data is text or not, or in the case of <code class="literal">isnumber()</code>, whether the number is really a <a id="id148" class="indexterm"/>number or not. Paired with a feature like conditional formatting, these two formulas can help you locate bad values or incorrectly typed values in small amounts of data.</p><p>Excel also has a few simple functions for manipulating strings into other data types, other than using the menus. The following figure shows the <code class="literal">TEXT()</code> function being used to convert a numeric date to a string version of that date in the yyyy-mm-dd format. In the formula bar, we type <code class="literal">=TEXT(A4,"yyyy-mm-dd")</code>, and the <code class="literal">36528</code> number is converted into <code class="literal">2000-01-03</code>. The date string now appears in the format we specified.</p><div class="mediaobject"><img src="../Images/image00245.jpeg" alt="Example one – type detection and converting in Excel"/></div><p style="clear:both; height: 1em;"> </p></div><div class="section" title="Example two – type converting in JSON"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl4sec14"/>Example two – type converting in JSON</h4></div></div></div><p>JSON, as a semi-structured text-based format, does not offer a lot of options in the way of formatting and <a id="id149" class="indexterm"/>data types. Recall from the JSON description earlier in this chapter that JSON objects are constructed as name-value pairs. The only options for formatting the value part of a name-value pair are a text string, a number, or a list. While it is possible to build JSON objects by hand—for example, by typing them out in a text editor—usually, we build JSON objects programmatically, either by exporting JSON from a database or by writing a small program to convert a flat text file into JSON.</p><p>What happens if our program that is designed to generate JSON is flawed? Suppose the program gives us strings instead of numbers. This happens occasionally and it can have unintended consequences for any program designed to consume JSON. The following is an example showing some simple PHP code that is designed to generate JSON, which will later be read into D3 to build a graph.</p><p>The PHP code to generate a JSON representation of a dataset from a database is straightforward. The sample code, as shown in the following example, connects to the Enron database, builds a query, runs the query, puts each part of the query result into an array, and then encodes the array values as JSON name-value pairs. Here is the code to build a list of dates and counts, just like the dates and counts we used in <a class="link" title="Chapter 1. Why Do You Need Clean Data?" href="part0014.xhtml#aid-DB7S1">Chapter 1</a>, <span class="emphasis"><em>Why Do You Need Clean Data?</em></span>:</p><div class="informalexample"><pre class="programlisting">&lt;?php
// connect to db
$dbc = mysqli_connect('localhost','username','password','enron')
       or die('Error connecting to database!' . mysqli_error());
       
// the same sample count-by-date query from chapter 1
$select_query = "SELECT date(date) AS dateSent, count(mid) AS numMsg FROM message GROUP BY 1 ORDER BY 1";
$select_result = mysqli_query($dbc, $select_query);
// die if the query failed
if (!$select_result)
       die ("SELECT failed! [$select_query]" .  mysqli_error());
// build a new array, suitable for json printing
$counts = array();
while($row = mysqli_fetch_array($select_result))
{
     array_push($counts, array('dateSent' =&gt; $row['dateSent'], 'numMsg'   =&gt; $row['numMsg']));
}
echo json_encode($counts);
?&gt;</pre></div><div class="note" title="Note"><h3 class="title"><a id="tip07"/>Tip</h3><p>Note that the <code class="literal">json_encode()</code> function requires PHP version 5.3 or higher, and this example relies on the same working Enron database that we built in <a class="link" title="Chapter 1. Why Do You Need Clean Data?" href="part0014.xhtml#aid-DB7S1">Chapter 1</a>, <span class="emphasis"><em>Why Do You Need Clean Data?</em></span>.</p></div><p>The <a id="id150" class="indexterm"/>problem here is that the result is stringified—PHP has placed the numeric values for <code class="literal">numMsg</code> in quotation marks, which in JSON means string values:</p><div class="informalexample"><pre class="programlisting">[
  {"dateSent":"0001-05-30","numMsg":"2"},
  {"dateSent":"0001-06-18","numMsg":"1"}
]</pre></div><p>To nudge the PHP function to be really careful about numeric values and not just assume that everything is a string, we will need to specifically convert the values to numbers before printing them to the screen. Simply change the way we call <code class="literal">json_encode()</code> so that it looks like this:</p><div class="informalexample"><pre class="programlisting">echo json_encode($counts, JSON_NUMERIC_CHECK);</pre></div><p>Now the JSON result includes actual numbers for <code class="literal">numMsg</code>:</p><div class="informalexample"><pre class="programlisting">[
  {"dateSent":"0001-05-30","numMsg":2},
  {"dateSent":"0001-06-18","numMsg":1}
]</pre></div><p>PHP includes similar functions for converting big integers to strings as well. This can be useful when you have extremely large numbers but you need them to be stored as string data for some reason, for example, when storing session values or Facebook or Twitter user ID values.</p><p>If we do not control the PHP code that is generating the JSON output—for example, if we are accessing the JSON via an API and we don't have any control over its generation—then we'll have to perform a conversion after the JSON has already been built. In this case, we need to ask our D3 JavaScript code to coerce the strings into numbers using a <code class="literal">+</code> operator on that data value. In this example, we have read the JSON output and are preparing to build a graph. The <code class="literal">numMsg</code> value has been coerced from a string to a number:</p><div class="informalexample"><pre class="programlisting">d3.json("counts.json", function(d) {
  return {
    dateSent: d.dateSent,
    numMsg: +d.numMsg
  };
}, function(error, rows) {
  console.log(rows);
});</pre></div></div></div></div><div class="section" title="If a null falls in a forest…"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec15"/>If a null falls in a forest…</h2></div></div></div><p>In this <a id="id151" class="indexterm"/>section, we are going to dip our chef's ladle into the mysterious stew of zeroes, empties, and nulls.</p><p>What is the difference between these? Well, as I mentioned stew, consider this illustration first. Imagine you have a top-of-the-line stove in your fancy chef's kitchen, and on that stove, you are going to prepare a pot of thick, hearty stew. Your sous chef asks you, "How much stew is in the pot?". Take a look at these options:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">At the beginning of the day, you observe that there is no pot on the stove. The question "how much stew is in the pot?" is unanswerable. There is no pot! The answer is not a positive value, it is not a zero value, and it is not even empty. The value is <span class="strong"><strong>NULL</strong></span>.</li><li class="listitem">A few hours later, after much cleaning and chopping, you look in the pot and see three liters of delicious stew. Great; you now have an answer to the question. In this case, our answer is a <span class="strong"><strong>data value of 3</strong></span>.</li><li class="listitem">After the lunch rush, you look in the pot again and discover that there is no more stew. Every last drop has been sold. You looked, you measured, and you found the answer to "how much stew is in the pot?" is a <span class="strong"><strong>zero</strong></span> value. You send the pot to be washed at the sink.</li><li class="listitem">Just before the evening meal, you grab the clean pot from the sink. As you walk across the kitchen, the sous chef asks, "What's in the pot?" Currently, the pot is <span class="strong"><strong>empty</strong></span>. There is nothing in the pot. Note that the answer is not zero, because the question he asked was not a numeric one. The answer is also not NULL because we <span class="emphasis"><em>DO</em></span> have a pot, and we <span class="emphasis"><em>DID</em></span> look inside it, but there was just no answer.</li></ol><div style="height:10px; width: 1px"/></div><p>Different data and programming environments (DBMS, storage systems, and programming languages) treat these zero, empty, and NULL concepts slightly differently. Not all of them clearly distinguish between all four cases. Therefore, this chapter is written somewhat generically, and when examples are given, we try to point out which environment we are applying them to. It is important to be aware of what <span class="emphasis"><em>you</em></span> mean in each environment when you say that something is null, empty, or zero. And when you see these values in real-world datasets, it is important to be clear about what you can (and cannot) assume about each.</p><div class="note" title="Note"><h3 class="title"><a id="tip08"/>Tip</h3><p>A special caveat for those dealing with Oracle databases: empty, blank, and NULL are different in Oracle when compared to many other systems. Proceed with caution through this section and consult your database documentation for details specific to Oracle.</p></div><div class="section" title="Zero"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec19"/>Zero</h3></div></div></div><p>First things first. Of the zeroes, empties, and NULLs, the easiest to deal with is the zero value. Zero<a id="id152" class="indexterm"/> is a measurable quantity and has meaning in a numeric system. We can sort zeroes (they come before 1, 2, 3…), and we can compare other numbers to zero using the handy number line (-2, -1, 0, 1, 2, 3…). We can also perform math on zeroes (except for division by zero, which is always awkward).</p><p>As a legitimate value, zero works best as numeric data. A string value of zero does not make much sense as it would end up just needing to be interpreted as 0, or the character of 0, which is probably not really the spirit of what we intended.</p></div><div class="section" title="Empties"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec20"/>Empties</h3></div></div></div><p>Empties <a id="id153" class="indexterm"/>are a bit more tricky to work with than zeroes, but they make a lot of <a id="id154" class="indexterm"/>sense in some cases, for instance, when working with strings. For example, suppose we have an attribute called middle name. Well, I have no middle name so I would always like to leave this field empty. (Fun fact: my mother still tells the story of how my Kindergarten graduation certificate shows a middle name that I made up on the spot, too shy to admit to my teacher that I lacked a middle name.) Filling in a space or a hyphen (or making up something) for a value that is truly empty does not make a lot of sense. Space is not the same thing as empty. The correct value in the case of an empty string may, in fact, be "empty".</p><p>In a CSV or delimited file, an empty value can look like this—here, we have emptied out the favorite color values for the second two records:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>First name,birth date,favorite color,salary</strong></span>
"Sally","1971-09-16","light blue",129000
"Manu","1984-11-03","",159960
"Martin","1978-12-10","",76888</pre></div><p>In an <code class="literal">INSERT</code> database, for example, to put the <code class="literal">Manu</code> record into a MySQL system, we would use some code like this:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>INSERT INTO people (firstName, birthdate, faveoriteColor, salary) VALUES ("Manu","1984-11-03","",159960);</strong></span>
</pre></div><p>Sometimes, semi-structured data formats, such as JSON, will allow a blank object and blank strings. Consider this example:</p><div class="informalexample"><pre class="programlisting">{
  "firstName": "Sally",
  "birthDate": "1971-09-16",
  "faveColor": "",
  "pet": [],
  "job": {
    "jobTitle": "Data Scientist",
    "company": "Data Wizards, Inc.",
    "salary":129000
  }
}</pre></div><p>Here, we<a id="id155" class="indexterm"/> have <a id="id156" class="indexterm"/>taken away Sally's pets and made her favorite color an empty string.</p><div class="section" title="Blanks"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl4sec15"/>Blanks</h4></div></div></div><p>Be <a id="id157" class="indexterm"/>aware that <code class="literal">" "</code> (two double quotes with a space in between, sometimes called<a id="id158" class="indexterm"/> a blank but more appropriately called a <span class="strong"><strong>space</strong></span>) is not necessarily the same thing as "" (two double quotes right next to each other, sometimes also called a blank but more appropriately called <span class="strong"><strong>empty</strong></span>). Consider the difference<a id="id159" class="indexterm"/> between these two MySQL INSERT statements:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>-- this SQL has an empty for Sally's favoriteColor and a space for Frank's</strong></span>
<span class="strong"><strong>INSERT INTO people (firstName, birthdate, faveoriteColor, salary)</strong></span>
<span class="strong"><strong>VALUES ("Sally","1971-09-16","",129000),</strong></span>
<span class="strong"><strong>       ("Frank","1975-10-23"," ",76000);</strong></span>
</pre></div><p>In addition to spaces, other invisible characters that sometimes get accidentally interpreted as empty or blank include tabs and carriage returns / line feeds. Be careful of these, and when in doubt, use some of the tricks introduced earlier in this chapter to uncover invisible characters.</p></div></div><div class="section" title="Null"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec21"/>Null</h3></div></div></div><p>I know<a id="id160" class="indexterm"/> that if you look up <span class="strong"><strong>null</strong></span> in the dictionary, it might say that it means zero. But do not be fooled. In computing, we have a whole host of special definitions for NULL. To us, NULL is not nothing; in fact, it is the absence of even nothing.</p><p>How is this different than empty? First, empty can be equal to empty, as the length of the empty string will be 0. So, we can imagine a value existing, against which we can perform comparisons. However, NULL cannot be equal to NULL, and NOT NULL will not be equal to NOT NULL either. I have heard it suggested that we should all repeat as a mantra that <span class="emphasis"><em>NULL is not equal to anything, even itself</em></span>.</p><p>We use NULL when we legitimately want no entry of any kind for the data value. We do not even want to put the pot on the stove!</p><div class="section" title="Why is the middle name example &quot;empty&quot; and not NULL?"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl4sec16"/>Why is the middle name example "empty" and not NULL?</h4></div></div></div><p>Good question. Recall <a id="id161" class="indexterm"/>from the stew pot analogy that if we ask the question and the answer is empty, it is different from never getting an answer (NULL). If you asked me what my middle name was and I told you I did not have one, then the data value is empty. But if you just do not know whether I have a middle name or not, then the data value is NULL.</p></div><div class="section" title="Is it ever useful to clean data using a zero instead of an empty or null?"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl4sec17"/>Is it ever useful to clean data using a zero instead of an empty or null?</h4></div></div></div><p>Maybe. Remember<a id="id162" class="indexterm"/> in the e-mail example from <a class="link" title="Chapter 1. Why Do You Need Clean Data?" href="part0014.xhtml#aid-DB7S1">Chapter 1</a>, <span class="emphasis"><em>Why Do You Need Clean Data?</em></span>, when we discussed adding missing dates to our line graph and how the various spreadsheet programs automatically filled in a count of zero when creating a line graph with missing dates? Even though we had not counted the e-mails on those dates, our graphs interpolated the missing values as if they were zeroes. Are we OK with this? Well, it depends. If we can confirm the fact that the e-mail system was live and working on these dates, and we are confident that we have the full collection of e-mails sent, then the count for these dates could truly be inferred to be zero. However, in the case of the Enron e-mails we were using in <a class="link" title="Chapter 1. Why Do You Need Clean Data?" href="part0014.xhtml#aid-DB7S1">Chapter 1</a>, <span class="emphasis"><em>Why Do You Need Clean Data?</em></span>, we were pretty sure that was <span class="emphasis"><em>not</em></span> the case.</p><p>Another case where it might be useful to store a zero-type data instead of empty is when we have a dummy date or only part of a date, for example, if you know the month and year, but not the day, and you have to insert data into a full date column. Filling in 2014-11-00 might be the way to go in that instance. But you should, of course, document this action (refer to the <span class="emphasis"><em>Communicating about data cleaning</em></span> section in <a class="link" title="Chapter 1. Why Do You Need Clean Data?" href="part0014.xhtml#aid-DB7S1">Chapter 1</a>, <span class="emphasis"><em>Why Do You Need Clean Data?</em></span>) because what you did and why is probably not going to be obvious to you looking at this data six months from now!</p></div></div></div><div class="section" title="Character encodings"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec16"/>Character encodings</h2></div></div></div><p>In the <a id="id163" class="indexterm"/>olden days of computing, every string value had to be constructed from only 128 different symbols. This early encoding system, called <span class="strong"><strong>American Standard Code for Information Exchange</strong></span> (<span class="strong"><strong>ASCII</strong></span>), was largely based on the <a id="id164" class="indexterm"/>English alphabet, and it was set in stone. The 128 characters included a-z, A-Z, 0-9, some punctuation and spaces, as well as some now-useless Teletype codes. In our data science kitchen, using this type of encoding system today would be like cooking a frozen dinner. Yes, it is cheap, but it also lacks variety and nutrition, and you really cannot expect to serve it to a guest.</p><p>In the early<a id="id165" class="indexterm"/> 1990s, a variable length encoding system, now called <span class="strong"><strong>UTF-8</strong></span>, was proposed and standardized. This variable length scheme allows many more natural language symbols to be encoded properly as well as all the mathematical symbols and provides plenty of room to grow in the future. (The list of all these symbols is called <span class="strong"><strong>Unicode</strong></span>. The<a id="id166" class="indexterm"/> encoding for the Unicode symbols is called UTF-8.) There is also now a UTF-16 encoding, where each character takes a minimum of two bytes to encode. At the time of writing this, UTF-8 is the predominant encoding for the Web.</p><p>For our purposes in this book, we are mostly concerned with what to do with data that exists in one encoding and must be cleaned by converting it to another encoding. Some example scenarios where this could be relevant include:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">You have a MySQL database that has been created using a simple encoding (such as one of the 256-bit Latin-1 character sets that are the default on MySQL), and which stores UTF-8 data as Latin-1, but you would now like to convert the entire table to UTF-8.</li><li class="listitem">You<a id="id167" class="indexterm"/> have a Python 2.7 program that uses functions designed for ASCII but must now handle UTF-8 files or strings.</li></ul></div><p>In this section, we will work through a few basic examples based on these scenarios. There are many more equally likely situations where you will encounter character encoding issues, but this will be a starting point.</p><div class="section" title="Example one – finding multibyte characters in MySQL data"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec22"/>Example one – finding multibyte characters in MySQL data</h3></div></div></div><p>Suppose <a id="id168" class="indexterm"/>we have a column of data and we are curious about how many values in that column actually have multibyte encoding. Characters that appear as a single character but take multiple bytes to encode can be discovered by comparing their length in bytes (using the <code class="literal">length()</code> function) to their length in characters (using the <code class="literal">char_length()</code> function).</p><div class="note" title="Note"><h3 class="title"><a id="tip09"/>Tip</h3><p>The following example uses the MyISAM version of the MySQL World database <a id="id169" class="indexterm"/>that is available as part of the MySQL documentation at <a class="ulink" href="http://dev.mysql.com/doc/index-other.html">http://dev.mysql.com/doc/index-other.html</a></p></div><p>By default, the MyISAM version of the MySQL World test database uses the <code class="literal">latin1_swedish_ci</code> character encoding. So, if we run a query on a country name that has a special character in it, we might see something like the following for Côte d'Ivoire:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>SELECT Name, length(Name)</strong></span>
<span class="strong"><strong>FROM Country</strong></span>
<span class="strong"><strong>WHERE Code='CIV';</strong></span>
</pre></div><p>This shows the length of 15 for the country, and the name of the country Côte d'Ivoire is encoded as CÃ™te dÃ­Ivoire. There are several other entries in various columns that are encoded strangely as well. To fix this, we can change the default collation of the name column to <code class="literal">utf8</code> with the following SQL command:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>ALTER TABLE  Country CHANGE Name `Name` CHAR(52) CHARACTER SET utf8 COLLATE utf8_general_ci</strong></span>
<span class="strong"><strong>  NOT NULL DEFAULT  '';</strong></span>
</pre></div><p>Now we can empty the table and insert the 239 Country rows again:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>TRUNCATE Country;</strong></span>
</pre></div><p>Now we have <code class="literal">Country</code> names that use UTF-8 encoding. We can test to see whether any of the countries are using a multibyte character representation for their name now by running the following SQL:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>SELECT *  FROM Country WHERE length(Name) != char_length(Name);</strong></span>
</pre></div><p>It shows <a id="id170" class="indexterm"/>that the Côte d'Ivoire and the French island Réunion both have multibyte character representations.</p><p>Here is another example if you do not have access to the world dataset, or in fact, any dataset at all. You can run a comparison of multibyte characters as a MySQL select command:</p><div class="informalexample"><pre class="programlisting">SELECT length('私は、データを愛し'), char_length('私は、データを愛し');</pre></div><p>In this example, the Japanese characters have a length of 27 but a character length of 9.</p><p>This technique is used when we want to test the character set of our data—maybe you have too many rows to look one at a time, and you simply want a SQL statement that can show you all the multibyte entries at once so that you can make a plan for how to clean them. This command shows us the data that currently has a multibyte format.</p></div><div class="section" title="Example two – finding the UTF-8 and Latin-1 equivalents of Unicode characters stored in MySQL"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec23"/>Example two – finding the UTF-8 and Latin-1 equivalents of Unicode characters stored in MySQL</h3></div></div></div><p>The following code will use the <code class="literal">convert()</code> function and the <code class="literal">RLIKE</code> operator to print the UTF-8 equivalent of Unicode strings that have been saved to MySQL using Latin-1. This is useful if you have multibyte data that has been stored in Latin-1 encoded text columns in MySQL, an unfortunately common occurrence as Latin-1 is still the default (as of MySQL 5).</p><p>This code uses the publicly available and widely used Movielens database of movies and their reviews. The<a id="id171" class="indexterm"/> entire movielens dataset is widely available on many websites, including from the original project site: <a class="ulink" href="http://grouplens.org/datasets/movielens/">http://grouplens.org/datasets/movielens/</a>. Another SQL-friendly link is here: <a class="ulink" href="https://github.com/ankane/movielens.sql">https://github.com/ankane/movielens.sql</a>. To make it easier to work through these examples, the <code class="literal">CREATE</code> and <code class="literal">INSERT</code> statements for just a small subset of the relevant rows have been made available on the author's GitHub site for this book: <a class="ulink" href="https://github.com/megansquire/datacleaning/blob/master/ch2movies.sql">https://github.com/megansquire/datacleaning/blob/master/ch2movies.sql</a>. This way, if you prefer, you can simply create this one table using that code and work through the following example.</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>SELECT convert(</strong></span>
<span class="strong"><strong>  convert(title USING BINARY) USING latin1 ) AS 'latin1 version', </strong></span>
<span class="strong"><strong>convert(</strong></span>
<span class="strong"><strong>  convert(title USING BINARY) USING utf8</strong></span>
<span class="strong"><strong>) AS 'utf8 version'</strong></span>
<span class="strong"><strong>FROM movies WHERE convert(title USING BINARY)</strong></span>
<span class="strong"><strong>    RLIKE concat(</strong></span>
<span class="strong"><strong>    '[', unhex('80'), '-', unhex('FF'), ']'</strong></span>
<span class="strong"><strong>  );</strong></span>
</pre></div><p>The <a id="id172" class="indexterm"/>following screenshot shows the results for the first three movies after running this command in phpMyAdmin on the Latin-1 encoded title column in the movies table within the Movielens database:</p><div class="mediaobject"><img src="../Images/image00246.jpeg" alt="Example two – finding the UTF-8 and Latin-1 equivalents of Unicode characters stored in MySQL"/></div><p style="clear:both; height: 1em;"> </p><div class="note" title="Note"><h3 class="title"><a id="note05"/>Note</h3><p>Any advice for converting an existing database to UTF-8?</p><p>Because of the ubiquity of UTF-8 on the Web and its importance in accurately conveying information written in natural languages from around the world, we strongly recommend that you create new databases in a UTF-8 encoding scheme. It will be far easier to start off in a UTF-8 encoding than not.</p><p>However, if you have the tables already created in a non-UTF-8 encoding, but they are not yet populated with data, you will have to alter the table to a UTF-8 encoding and change the character set of each column to a UTF-8 encoding. Then, you will be ready to insert UTF-8 data.</p><p>The hardest case is when you have a large amount of data already in a non-UTF-8 encoding, and you want to convert it in place in the database. In this case, you have some planning to do. You'll have to take a different approach depending on whether you can get away with running commands on a few tables and/or a few columns or whether you have a very long list of columns and tables to adjust. In planning this conversion, you should consult the documentation specific to your database system. For example, when performing MySQL conversions, there are solutions that use either the <code class="literal">mysqldump</code> utility or those that use a combination of <code class="literal">SELECT</code>, <code class="literal">convert()</code>, and <code class="literal">INSERT</code>. You will have to determine which of these is right for your database system.</p></div></div><div class="section" title="Example three – handling UTF-8 encoding at the file level"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec24"/>Example three – handling UTF-8 encoding at the file level</h3></div></div></div><p>Sometimes, you will need to adjust your code to deal with UTF-8 data at file level. Imagine a<a id="id173" class="indexterm"/> simple program designed to collect and print web content. If the majority of web content is now UTF-8 encoded, then our program internals need to be ready to handle that. Unfortunately, many programming languages still need a little bit of coaxing in order to handle UTF-8 encoded data cleanly. Consider the following example of a Python 2.7 program designed to connect to Twitter using its API and write 10 tweets to a file:</p><div class="informalexample"><pre class="programlisting">import twitter
import sys

####################
def oauth_login():
    CONSUMER_KEY = ''
    CONSUMER_SECRET = ''
    OAUTH_TOKEN = ''
    OAUTH_TOKEN_SECRET = ''
    auth = twitter.oauth.OAuth(OAUTH_TOKEN, OAUTH_TOKEN_SECRET,
                               CONSUMER_KEY, CONSUMER_SECRET)
    twitter_api = twitter.Twitter(auth=auth)
    return twitter_api
###################

twitter_api = oauth_login()
codeword = 'DataCleaning'
twitter_stream = twitter.TwitterStream(auth=twitter_api.auth)
stream = twitter_stream.statuses.filter(track=codeword) 

f = open('outfile.txt','wb')
counter = 0
max_tweets = 10
for tweet in stream:
    print counter, "-", tweet['text'][0:10]
    f.write(tweet['text'])
    f.write('\n')
    counter += 1
    if counter &gt;= max_tweets:
        f.close()
        sys.exit()</pre></div><div class="note" title="Note"><h3 class="title"><a id="tip10"/>Tip</h3><p>If you are worried about setting up Twitter authentication in order to get the keys<a id="id174" class="indexterm"/> and tokens used in this script, do not worry. You can either work your way through the simple setup procedure at <a class="ulink" href="https://dev.twitter.com/apps/new">https://dev.twitter.com/apps/new</a>, or we have a much longer, in-depth example of Twitter mining in <a class="link" title="Chapter 10. Twitter Project" href="part0067.xhtml#aid-1VSLM1">Chapter 10</a>, <span class="emphasis"><em>Twitter Project</em></span>. In that chapter, we walk through the entire setup of a Twitter developer account and go over the tweet collection procedure in much more detail.</p></div><p>This little <a id="id175" class="indexterm"/>program finds 10 recent tweets that use the <a id="id176" class="indexterm"/>keyword <span class="strong"><strong>DataCleaning</strong></span>. (I chose this keyword because I recently posted several tweets full of emojis and UTF-8 characters using this hashtag, I was pretty sure it would quickly generate some nice results characters within the first 10 tweets.) However, asking Python to save these tweets to a file using this code results in the following error message:</p><div class="informalexample"><pre class="programlisting">UnicodeEncodeError: 'ascii' codec can't encode character u'\u00c9' in position 72: ordinal not in range(128)</pre></div><p>The issue is that <code class="literal">open()</code> is not prepared to handle UTF-8 characters. We have two choices for a fix: strip out UTF-8 characters or change the way we write files.</p><div class="section" title="Option one – strip out the UTF-8 characters"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl4sec18"/>Option one – strip out the UTF-8 characters</h4></div></div></div><p>If we take this route, we need to understand that by stripping out characters, we have lost data that could be meaningful. As we discussed earlier in this chapter, data loss is generally an undesirable thing. Still, if we did want to strip these characters, we could make the following changes to the original <code class="literal">for</code> loop:</p><div class="informalexample"><pre class="programlisting">for tweet in stream:
    encoded_tweet = tweet['text'].encode('ascii','ignore')
    print counter, "-", encoded_tweet[0:10]
    f.write(encoded_tweet)</pre></div><p>This new code changes an original tweet written in Icelandic like this:</p><div class="informalexample"><pre class="programlisting">Ég elska gögn</pre></div><p>To this:</p><div class="informalexample"><pre class="programlisting">g elska ggn</pre></div><p>For text analysis purposes, this sentence no longer makes any sense as g and ggn are not words. This is probably not our best option for cleaning the character encoding of these tweets.</p></div><div class="section" title="Option two – write the file in a way that can handle UTF-8 characters"><div class="titlepage"><div><div><h4 class="title"><a id="ch02lvl4sec19"/>Option two – write the file in a way that can handle UTF-8 characters</h4></div></div></div><p>Another option is to just use the <code class="literal">codecs</code> or <code class="literal">io</code> libraries, which allow UTF-8 encoding to be specified at the time the file is opened. Add an import codec line at the top of the file, and then change the line where you open the file like this:</p><div class="informalexample"><pre class="programlisting">f = codecs.open('outfile.txt', 'a+', 'utf-8')</pre></div><p>The <code class="literal">a+</code> parameter <a id="id177" class="indexterm"/>states we want to append the data to the file if it has already been created.</p><p>Another option is to include the <code class="literal">io</code> library at the top of your program and then use its version of <code class="literal">open()</code>, which can be passed a particular encoding, as follows:</p><div class="informalexample"><pre class="programlisting">f= io.open('outfile.txt', 'a+', encoding='utf8')</pre></div><div class="note" title="Note"><h3 class="title"><a id="note06"/>Note</h3><p>Can we just use Python 3? Why are you still using 2.7?</p><p>It is true that Python 3 handles UTF-8 encodings more easily than Python 2.7. Feel free to use Python 3 if the rest of your development environment can handle it. In my world, I prefer to use Enthought Canopy to work in data analysis and data mining and to teach my students. Many distributions of Python—Enthought included—are written for 2.7 and will not be moved to Python 3 for quite some time. The reason for this is that Python 3 made some major changes to the internals of the language (for example, in supporting UTF-8 encodings naturally, as we just discussed), and this means that there were a lot of important and useful packages that still have to be rewritten to work with it. This <a id="id178" class="indexterm"/>rewriting process takes a long time. For more on this issue, visit <a class="ulink" href="https://wiki.python.org/moin/Python2orPython3">https://wiki.python.org/moin/Python2orPython3</a></p></div></div></div></div></div>
<div class="section" title="Summary" id="aid-LTSU1"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec17"/>Summary</h1></div></div></div><p>This chapter covered a whirlwind of fundamental topics that we will need in order to clean data in the rest of this book. Some of the techniques we learned here were simple, and some were exotic. We learned about file formats, compression, data types, and character encodings at both the file level and database level. In the next chapter, we will tackle two more workhorses of clean data: the spreadsheet and the text editor.</p></div></body></html>
<html><head></head><body><div class="preface" title="Preface" id="aid-7K4G1"><div class="titlepage"><div><div><h1 class="title"><a id="pref05"/>Preface</h1></div></div></div><div class="blockquote"><table border="0" cellspacing="0" cellpadding="0" class="blockquote" summary="Block quote"><tr><td valign="top"> </td><td valign="top"><p><span class="emphasis"><em>"Pray, Mr. Babbage, if you put into the machine the wrong figures, will the right answer come out?"</em></span></p></td><td valign="top"> </td></tr><tr><td valign="top"> </td><td colspan="2" align="right" valign="top" style="text-align: center">--<span class="attribution"><span class="emphasis"><em>Charles Babbage (1864)</em></span></span></td></tr></table></div><div class="blockquote"><table border="0" cellspacing="0" cellpadding="0" class="blockquote" summary="Block quote"><tr><td valign="top"> </td><td valign="top"><p><span class="emphasis"><em>"Garbage in, garbage out"</em></span></p></td><td valign="top"> </td></tr><tr><td valign="top"> </td><td colspan="2" align="right" valign="top" style="text-align: center">--<span class="attribution"><span class="emphasis"><em>The United States Internal Revenue Service (1963)</em></span></span></td></tr></table></div><div class="blockquote"><table border="0" cellspacing="0" cellpadding="0" class="blockquote" summary="Block quote"><tr><td valign="top"> </td><td valign="top"><p><span class="emphasis"><em>"There are no clean datasets."</em></span></p></td><td valign="top"> </td></tr><tr><td valign="top"> </td><td colspan="2" align="right" valign="top" style="text-align: center">--<span class="attribution"><span class="emphasis"><em>Josh Sullivan, Booz Allen VP in <span class="emphasis"><em>Fortune</em></span> (2015)</em></span></span></td></tr></table></div><p>In his 1864 collection of essays, Charles Babbage, the inventor of the first calculating machine, recollects being dumbfounded at the "confusion of ideas" that would prompt someone to assume that a computer could calculate the correct answer despite being given the wrong input. Fast-forward another 100 years, and the tax bureaucracy started patiently explaining "garbage in, garbage out" to express the idea that even for the all-powerful tax collector, computer processing is still dependent on the quality of its input. Fast-forward another 50 years to 2015: a seemingly magical age of machine learning, autocorrect, anticipatory interfaces, and recommendation systems that know me better than I know myself. Yet, all of these helpful algorithms still require high-quality data in order to learn properly in the first place, and we lament "there are no clean datasets".</p><p>This book is for anyone who works with data on a regular basis, whether as a data scientist, data journalist, software developer, or something else. The goal is to teach practical strategies to quickly and easily bridge the gap between the data we want and the data we have. We want high-quality, perfect data, but the reality is that most often, our data falls far short. Whether we are plagued with missing data, data in the wrong format, data in the wrong location, or anomalies in the data, the result is often, to paraphrase rapper Notorious B.I.G., "more data, more problems".</p><p>Throughout the book, we will envision data cleaning as an important, worthwhile step in the data science process: easily improved, never ignored. Our goal is to reframe data cleaning away from being a dreaded, tedious task that we must slog through in order to get to the <span class="emphasis"><em>real</em></span> work. Instead, armed with a few tried-and-true procedures and tools, we will learn that just like in a kitchen, if you wash your vegetables first, your food will look better, taste better, and be better for you. If you learn a few proper knife skills, your meat will be more succulent and your vegetables will be cooked more evenly. The same way that a great chef will have their favorite knives and culinary traditions, a great data scientist will want to work with the very best data possible and under the very best conditions.</p><div class="section" title="What this book covers"><div class="titlepage"><div><div><h1 class="title"><a id="ch00lvl1sec02"/>What this book covers</h1></div></div></div><p><a class="link" title="Chapter 1. Why Do You Need Clean Data?" href="part0014.xhtml#aid-DB7S1">Chapter 1</a>, <span class="emphasis"><em>Why Do You Need Clean Data?</em></span> motivates our quest for clean data by showing the central role of data cleaning in the overall data science process. We follow with a simple example showing some dirty data from a real-world dataset. We weigh the pros and cons of each potential cleaning process, and then we describe how to communicate our cleaning changes to others.</p><p><a class="link" title="Chapter 2. Fundamentals – Formats, Types, and Encodings" href="part0020.xhtml#aid-J2B82">Chapter 2</a>, <span class="emphasis"><em>Fundamentals – Formats, Types, and Encodings</em></span>, sets up some foundational knowledge about file formats, compression, and data types, including missing and empty data and character encodings. Each section has its own examples taken from real-world datasets. This chapter is important because we will rely on knowledge of these basic concepts for the rest of the book.</p><p><a class="link" title="Chapter 3. Workhorses of Clean Data – Spreadsheets and Text Editors" href="part0024.xhtml#aid-MSDG2">Chapter 3</a>, <span class="emphasis"><em>Workhorses of Clean Data – Spreadsheets and Text Editors</em></span>, describes how to get the most data cleaning utility out of two common tools: the text editor and the spreadsheet. We will cover simple solutions to common problems, including how to use functions, search and replace, and regular expressions to correct and transform data. At the end of the chapter, we will put our skills to test using both of these tools to clean some real-world data regarding universities.</p><p><a class="link" title="Chapter 4. Speaking the Lingua Franca – Data Conversions" href="part0028.xhtml#aid-QMFO2">Chapter 4</a>, <span class="emphasis"><em>Speaking the Lingua Franca – Data Conversions</em></span>, focuses on converting data from one format to another. This is one of the most important data cleaning tasks, and it is useful to have a variety of tools at hand to easily complete this task. We first proceed through each of the different conversions step by step, including back and forth between common formats such as comma-separated values (CSV), JSON, and SQL. To put our new data conversion skills into practice, we complete a project where we download a Facebook friend network and convert it into a few different formats so that we can visualize its shape.</p><p><a class="link" title="Chapter 5. Collecting and Cleaning Data from the Web" href="part0033.xhtml#aid-VF2I1">Chapter 5</a>, <span class="emphasis"><em>Collecting and Cleaning Data from the Web</em></span>, describes three different ways to clean data found inside HTML pages. This chapter presents three popular tools to pull data elements from within marked-up text, and it also provides the conceptual foundation to understand other methods besides the specific tools shown here. As our project for this chapter, we build a set of cleaning procedures to pull data from web-based discussion forums.</p><p><a class="link" title="Chapter 6. Cleaning Data in PDF Files" href="part0039.xhtml#aid-1565U1">Chapter 6</a>, <span class="emphasis"><em>Cleaning Data in PDF Files</em></span>, introduces several ways to meet this most stubborn and all-too-common challenge for data cleaners: extracting data that has been stored in Adobe's Portable Document Format (PDF) files. We first examine low-cost tools to accomplish this task, then we try a few low-barrier-to-entry tools, and finally, we experiment with the Adobe non-free software itself. As always, we use real-world data for our experiments, and this provides a wealth of experience as we learn to work through problems as they arise.</p><p><a class="link" title="Chapter 7. RDBMS Cleaning Techniques" href="part0045.xhtml#aid-1AT9A1">Chapter 7</a>, <span class="emphasis"><em>RDBMS Cleaning Techniques</em></span>, uses a publicly available dataset of tweets to demonstrate numerous strategies to clean data stored in a relational database. The database shown is MySQL, but many of the concepts, including regular-expression based text extraction and anomaly detection, are readily applicable to other storage systems as well.</p><p><a class="link" title="Chapter 8. Best Practices for Sharing Your Clean Data" href="part0054.xhtml#aid-1JFUC2">Chapter 8</a>, <span class="emphasis"><em>Best Practices for Sharing Your Clean Data</em></span>, describes some strategies to make your hard work as easy for others to use as possible. Even if you never plan to share your data with anyone else, the strategies in this chapter will help you stay organized in your own work, saving you time in the future. This chapter describes how to create the ideal data package in a variety of formats, how to document your data, how to choose and attach a license to your data, and also how to publicize your data so that it can live on if you choose.</p><p><a class="link" title="Chapter 9. Stack Overflow Project" href="part0059.xhtml#aid-1O8H61">Chapter 9</a>, <span class="emphasis"><em>Stack Overflow Project</em></span>, guides you through a full-length project using a real-world dataset. We start by posing a set of authentic questions that we can answer about that dataset. In answering this set of questions, we will complete the entire data science process introduced in <a class="link" title="Chapter 1. Why Do You Need Clean Data?" href="part0014.xhtml#aid-DB7S1">Chapter 1</a>, <span class="emphasis"><em>Why Do You Need Clean Data?</em></span> and we will put into practice many of the cleaning processes we learned in the previous chapters. In addition, because this dataset is so large, we will introduce a few new techniques to deal with the creation of test datasets.</p><p><a class="link" title="Chapter 10. Twitter Project" href="part0067.xhtml#aid-1VSLM1">Chapter 10</a>, <span class="emphasis"><em>Twitter Project</em></span>, is a full-length project that shows how to perform one of the hottest and fastest-changing data collection and cleaning tasks out there right now: mining Twitter. We will show how to find and collect an existing archive of publicly available tweets on a real-world current event while adhering to legal restrictions on the usage of the Twitter service. We will answer a simple question about the dataset while learning how to clean and extract data from JSON, the most popular format in use right now with API-accessible web data. Finally, we will design a simple data model for long-term storage of the extracted and cleaned data and show how to generate some simple visualizations.</p></div></div>
<div class="section" title="What you need for this book" id="aid-8IL21"><div class="titlepage"><div><div><h1 class="title"><a id="ch00lvl1sec03"/>What you need for this book</h1></div></div></div><p>To complete the projects in this book, you will need the following tools:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">A web browser, Internet access, and a modern operating system. The browser and operating system should not matter, but access to a command-line terminal window is ideal (for example, the Terminal application in OS X). In <a class="link" title="Chapter 5. Collecting and Cleaning Data from the Web" href="part0033.xhtml#aid-VF2I1">Chapter 5</a>, <span class="emphasis"><em>Collecting and Cleaning Data from the Web</em></span>, one of the three activities relies on a browser-based utility that runs in the Chrome browser, so keep this in mind if you would like to complete this activity.</li><li class="listitem">A text editor, such as Text Wrangler for Mac OSX or Notepad++ for Windows. Some integrated development environments (IDEs, such as Eclipse) can also be used as a text editor, but they typically have many features you will not need.</li><li class="listitem">A spreadsheet application, such as Microsoft Excel or Google Spreadsheets. When possible, generic examples are provided that can work on either of these tools, but in some cases, one or the other is required.</li><li class="listitem">A Python development environment and the ability to install Python libraries. I recommend the Enthought Canopy Python environment, which is available here: <a class="ulink" href="https://www.enthought.com/products/canopy/">https://www.enthought.com/products/canopy/</a>.</li><li class="listitem">A MySQL 5.5+ server installed and running.</li><li class="listitem">A web server (running any server software) and PHP 5+ installed.</li><li class="listitem">A MySQL client interface, either the command-line interface, MySQL Workbench, or phpMyAdmin (if you have PHP running).</li></ul></div></div>
<div class="section" title="Who this book is for" id="aid-9H5K1"><div class="titlepage"><div><div><h1 class="title"><a id="ch00lvl1sec04"/>Who this book is for</h1></div></div></div><p>If you are reading this book, I guess you are probably in one of two groups. One group is the group of data scientists who already spend a lot of time cleaning data, but you want to get better at it. You are probably frustrated with the tedium of data cleaning, and you are looking for ways to speed it up, become more efficient, or just use different tools to get the job done. In our kitchen metaphor, you are the chef who just needs to brush up on a few knife skills.</p><p>The other group is made up of people doing the data science work but who never really cared about data cleaning before. But now, you are starting to think that maybe your results might actually get better if you had a cleaning process. Maybe the old adage "garbage in, garbage out" is starting to feel a little too real. Maybe you are interested in sharing your data with others, but you do not feel confident about the quality of the datasets you are producing. With this book, you will gain enough confidence to "cook in public" by learning a few tricks and creating new habits that will ensure a tidy, clean data science environment.</p><p>Either way, this book will help you reframe data cleaning away from being a symbol of drudgery and toward being your hallmark of quality, good taste, style, and efficiency. You should probably have a bit of programming background, but you do not have to be great at it. As with most data science projects, a willingness to learn and experiment as well as a healthy sense of curiosity and a keen attention to detail are all very important and valued.</p></div>
<div class="section" title="Conventions" id="aid-AFM61"><div class="titlepage"><div><div><h1 class="title"><a id="ch00lvl1sec05"/>Conventions</h1></div></div></div><p>In this book, you will find a number of text styles that distinguish between different kinds of information. Here are some examples of these styles and an explanation of their meaning.</p><p>Code words in text, database table names, folder names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles are shown as follows: " The issue is that <code class="literal">open()</code> is not prepared to handle UTF-8 characters."</p><p>A block of code is set as follows:</p><div class="informalexample"><pre class="programlisting">for tweet in stream:
    encoded_tweet = tweet['text'].encode('ascii','ignore')
    print counter, "-", encoded_tweet[0:10]
    f.write(encoded_tweet)</pre></div><p>When we wish to draw your attention to a particular part of a code block, the relevant lines or items are set in bold:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>First name,birth date,favorite color,salary</strong></span>
"Sally","1971-09-16","light blue",129000
"Manu","1984-11-03","",159960
"Martin","1978-12-10","",76888</pre></div><p>Any command-line input or output is written as follows:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>tar cvf fileArchive.tar reallyBigFile.csv anotherBigFile.csv</strong></span>
<span class="strong"><strong>gzip fileArchive.tar</strong></span>
</pre></div><p><span class="strong"><strong>New terms</strong></span> and <span class="strong"><strong>important words</strong></span> are shown in bold. Words that you see on the screen, for example, in menus or dialog boxes, appear in the text like this: "Hold down the <span class="strong"><strong>Option</strong></span> key and select the text in columns."</p><div class="note" title="Note"><h3 class="title"><a id="note01"/>Note</h3><p>Warnings or important notes appear in a box like this.</p></div><div class="note" title="Note"><h3 class="title"><a id="tip01"/>Tip</h3><p>Tips and tricks appear like this.</p></div></div>
<div class="section" title="Reader feedback" id="aid-BE6O1"><div class="titlepage"><div><div><h1 class="title"><a id="ch00lvl1sec06"/>Reader feedback</h1></div></div></div><p>Feedback from our readers is always welcome. Let us know what you think about this book—what you liked or disliked. Reader feedback is important for us as it helps us develop titles that you will really get the most out of.</p><p>To send us general feedback, simply e-mail <code class="email">&lt;<a class="email" href="mailto:feedback@packtpub.com">feedback@packtpub.com</a>&gt;</code>, and mention the book's title in the subject of your message.</p><p>If there is a topic that you have expertise in and you are interested in either writing or contributing to a book, see our author guide at <a class="ulink" href="http://www.packtpub.com/authors">www.packtpub.com/authors</a>.</p></div>
<div class="section" title="Customer support" id="aid-CCNA1"><div class="titlepage"><div><div><h1 class="title"><a id="ch00lvl1sec07"/>Customer support</h1></div></div></div><p>Now that you are the proud owner of a Packt book, we have a number of things to help you to get the most from your purchase.</p><div class="section" title="Downloading the color images of this book"><div class="titlepage"><div><div><h2 class="title"><a id="ch00lvl2sec03"/>Downloading the color images of this book</h2></div></div></div><p>We also provide you with a PDF file that has color images of the screenshots/diagrams used in this book. The color images will help you better understand the changes in the output. You can download this file from <a class="ulink" href="https://www.packtpub.com/sites/default/files/downloads/Clean_Data_Graphics.zip">https://www.packtpub.com/sites/default/files/downloads/Clean_Data_Graphics.zip</a>.</p></div><div class="section" title="Errata"><div class="titlepage"><div><div><h2 class="title"><a id="ch00lvl2sec04"/>Errata</h2></div></div></div><p>Although we have taken every care to ensure the accuracy of our content, mistakes do happen. If you find a mistake in one of our books—maybe a mistake in the text or the code—we would be grateful if you could report this to us. By doing so, you can save other readers from frustration and help us improve subsequent versions of this book. If you find any errata, please report them by visiting <a class="ulink" href="http://www.packtpub.com/submit-errata">http://www.packtpub.com/submit-errata</a>, selecting your book, clicking on the <span class="strong"><strong>Errata Submission Form</strong></span> link, and entering the details of your errata. Once your errata are verified, your submission will be accepted and the errata will be uploaded to our website or added to any list of existing errata under the Errata section of that title.</p><p>To view the previously submitted errata, go to <a class="ulink" href="https://www.packtpub.com/books/content/support">https://www.packtpub.com/books/content/support</a> and enter the name of the book in the search field. The required information will appear under the <span class="strong"><strong>Errata</strong></span> section.</p></div><div class="section" title="Piracy"><div class="titlepage"><div><div><h2 class="title"><a id="ch00lvl2sec05"/>Piracy</h2></div></div></div><p>Piracy of copyrighted material on the Internet is an ongoing problem across all media. At Packt, we take the protection of our copyright and licenses very seriously. If you come across any illegal copies of our works in any form on the Internet, please provide us with the location address or website name immediately so that we can pursue a remedy.</p><p>Please contact us at <code class="email">&lt;<a class="email" href="mailto:copyright@packtpub.com">copyright@packtpub.com</a>&gt;</code> with a link to the suspected pirated material.</p><p>We appreciate your help in protecting our authors and our ability to bring you valuable content.</p></div><div class="section" title="Questions"><div class="titlepage"><div><div><h2 class="title"><a id="ch00lvl2sec06"/>Questions</h2></div></div></div><p>If you have a problem with any aspect of this book, you can contact us at <code class="email">&lt;<a class="email" href="mailto:questions@packtpub.com">questions@packtpub.com</a>&gt;</code>, and we will do our best to address the problem.</p></div></div></body></html>
- en: Exploratory Analysis for Customer Behavior
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, as the first step toward future topics in the following chapters,
    we are going to discuss what customer analytics is, the importance and benefits
    of analyzing and having a better understanding of the customer base, and the use
    cases of customer analytics in different aspects of marketing. As we gather and
    track more data on customers and their behavior regarding individual sales, marketing
    platforms, and channels, it becomes easier for marketers to analyze and understand
    how different customers react to different marketing strategies. Customer analytics
    helps marketers understand their customers better by utilizing this data. Furthermore,
    it can help marketers to form better marketing strategies that can improve engagement,
    retention, and conversion rates.
  prefs: []
  type: TYPE_NORMAL
- en: 'In this chapter, we will cover the following topics:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Customer analytics: understanding customer behavior'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Conducting customer analytics with Python
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Conducting customer analytics with R
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Customer analytics – understanding customer behavior
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**Customer analytics** is a process of understanding and gaining insights into
    customer behavior through analyzing customer behavior data. It ranges from simple
    data analysis and visualization to more advanced customer segmentation and predictive
    analytics. The information and insights gained through customer analytics can
    then be utilized in forming marketing strategies, optimizing sales channels, and
    making other key business decisions.'
  prefs: []
  type: TYPE_NORMAL
- en: The importance of customer analytics is rising. Because access to customer data
    became easier for many businesses and also because customers now have easier access
    to data and information on similar products and contents provided by other competitors,
    it is critical to many businesses to be able to understand and predict what their
    customers are likely to purchase or view. The deeper the understanding you have
    about your customers, the better competitive power you will have against your
    competitors.
  prefs: []
  type: TYPE_NORMAL
- en: Customer analytics use cases
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Customer analytics can be used at any point of the marketing process. It can
    be used to monitor and track how customers interact with the products or react
    to different marketing strategies. This typically requires using data analysis
    and visualization techniques to build reports or dashboards that can easily show
    **key performance indicators** (**KPIs**).
  prefs: []
  type: TYPE_NORMAL
- en: Sales funnel analytics
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: One of the common use cases of customer analytics is **sales funnel analytics**.
    By analyzing sales funnel data, we can monitor and track the life cycle of customers,
    gaining insights such as through which marketing channel they sign up, how often
    they log into the system, what types of products they browsed and purchased, or
    how they fall off from each step of the funnel.
  prefs: []
  type: TYPE_NORMAL
- en: Customer segmentation
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Customer analytics can also be used to identify different groups of customers
    based on their behavior. **Customer segmentation** is a good example and outcome
    of customer analytics. Through identifying subgroups of similar customers, you
    can better understand the target populations. For example, the marketing strategy
    for low-engagement customers should be different from the marketing strategy for
    high-engagement customers. By effectively segmenting the customer base by the
    level of engagement, you can have a deeper understanding of how different groups
    of customers behave and react to different marketing strategies. This further
    helps you better target certain subgroups of customers.
  prefs: []
  type: TYPE_NORMAL
- en: Predictive analytics
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Another good use case of customer analytics is using **predictive analytics**
    on customer data. With customer data, you can have a deeper understanding of what
    attributes and characteristics of customers are highly correlated with the outcomes
    of your interest. For example, if you'd like to improve the response and engagement
    rates, you can analyze the data to identify those characteristics of customers
    that result in higher responses and engagement rates. Then, you can build predictive
    models that predict how likely it is that your customers are going to respond
    to your marketing messages.
  prefs: []
  type: TYPE_NORMAL
- en: Another example of the usage of predictive analytics can be for marketing channel
    optimization. With the insights gained from customer analytics, you can build
    predictive models to optimize marketing channels. The customers are going to respond
    differently to different marketing channels. For instance, younger cohorts, who
    use smartphones more heavily than the rest of the population, are more likely
    to respond to marketing via smartphones. On the other hand, more senior cohorts
    are more likely to respond better to marketing on more traditional media, such
    as TV or newspaper advertisements. With customer analytics, you can identify correlations
    between certain attributes of customers and the performances of different marketing
    channels.
  prefs: []
  type: TYPE_NORMAL
- en: As we have discussed so far, the applications of customer analytics are broad
    and can be used at any point of the marketing process. In the following programming
    exercises, we are going to discuss how we can use customer analytics to monitor
    and track different marketing strategies and see some of the ways to segment and
    analyze the customer base to gain insights. Then, in the following chapters, we
    are going to explore other use cases of customer analytics, such as optimizing
    engagement and retention rates, and customer segmentation.
  prefs: []
  type: TYPE_NORMAL
- en: Conducting customer analytics with Python
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this section, we are going to discuss how to conduct customer analytics using
    Python. We will be mainly using the `pandas` and `matplotlib` packages to analyze
    and visualize the customer behavior observed in the dataset. For those readers
    who would like to use R instead of Python for this exercise, you can skip to the
    next section. We will start this section by analyzing and understanding the behaviors
    of engaged customers and then discuss a simple way to segment the customer base
    by certain criteria.
  prefs: []
  type: TYPE_NORMAL
- en: 'For this exercise, we will be using one of the publicly available datasets
    from IBM, which can be found at this link: [https://www.ibm.com/communities/analytics/watson-analytics-blog/marketing-customer-value-analysis/](https://www.ibm.com/communities/analytics/watson-analytics-blog/marketing-customer-value-analysis/).
    You can follow this link and download the data that is available in CSV format,
    named `WA_Fn UseC_ Marketing Customer Value Analysis.csv`. Once you have downloaded
    this data, you can load it into your Jupyter Notebook by running the following
    command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'Similar to [Chapter 6](d3ba7047-2873-4b03-9a44-4c1d55b84178.xhtml), *Recommending
    the Right Products*, we are using the `read_csv` function in the `pandas` package
    to load the data in CSV format. Once you have loaded this data into a `pandas` `DataFrame`,
    it should look as in the following:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/b23d93a6-8144-45cc-8396-3a9ba57edc9c.png)'
  prefs: []
  type: TYPE_IMG
- en: As you can see from this data, there is a column named `Response`, which contains
    information about whether a customer responded to the marketing efforts. Also,
    the `Renew Offer Type` and `Sales Channel` columns represent the type of the renewal
    offer presented to the customer and which sales channel was used to contact the
    customer. There are numerous other columns that represent the socio-economic backgrounds
    of the customers and types of insurance coverage that the customers currently
    have. We will be utilizing this information to analyze and understand the customer
    behavior better, especially in regards to their responses and engagement with
    the marketing and sales efforts.
  prefs: []
  type: TYPE_NORMAL
- en: Analytics on engaged customers
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Now that we have loaded the data into our Python environment, we are going
    to analyze it to understand how different customers behave and react to different
    marketing strategies. We are going to follow these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Overall engagement rate
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Engagement rates by offer type
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Engagement rates by offer type and vehicle class
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Engagement rates by sales channel
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Engagement rates by sales channel and vehicle size
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Overall engagement rate
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The first thing we are going to need to understand is the overall marketing
    response or engagement rate. We can use the following code to get the total number
    of customers who have responded:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: As you have seen from the data, the `Response` column contains information about
    whether a customer responded to the marketing call or not (`Yes` for those who
    have responded and `No` for those who have not). We are simply grouping by this
    column by using the `groupby` function in a `pandas` DataFrame and counting the
    number of customers in each category with the `count` function in the `pandas`
    package.
  prefs: []
  type: TYPE_NORMAL
- en: 'The result looks as in the following:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/b1213d1b-3be9-42ef-a946-1b689515836d.png)'
  prefs: []
  type: TYPE_IMG
- en: 'In order to visualize this in a plot, you can use the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'The plot looks as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/951a86d2-84f1-47a2-8284-ab730249da2e.png)'
  prefs: []
  type: TYPE_IMG
- en: 'As you can see from these results, the majority of the customers did not respond
    to the marketing calls. Let''s take a look at these numbers in percentages, using
    the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'When you run this code, the result looks as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/c845dafb-2535-41bd-b5af-b1bc15418860.png)'
  prefs: []
  type: TYPE_IMG
- en: From these results, we can see that only about 14% of the customers responded
    to the marketing calls. Let's dive deeper into the customers who responded and
    get a better understanding of what worked best for them.
  prefs: []
  type: TYPE_NORMAL
- en: Engagement rates by offer type
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Different types of offers will work differently for the customers. In this
    section, we are going to look into what types of offers worked best for the engaged
    customers. Take a look at the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: 'As you can see from this code, we are grouping by the `Renew Offer Type` column,
    where we have four different types of offers. We count the number of engaged customers
    for each type of these renewal offers first by filtering for those with `Yes`
    values in the `Response` column. Then, we are dividing these numbers by the total
    number of customers in each renewal offer type to get the engagement rates per
    renewal offer type. The result looks as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/6efa9588-98e0-4073-979a-a07bfbadd141.png)'
  prefs: []
  type: TYPE_IMG
- en: 'We can visualize these results in a bar plot, using the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: 'The bar plot looks as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/f27b321b-e08a-4fe8-b359-88624355263a.png)'
  prefs: []
  type: TYPE_IMG
- en: As you can easily notice from this plot, `Offer2` had the highest engagement
    rate among the customers. When conducting customer analytics, as discussed earlier,
    we often want to know the demographics and attributes of customers for each event,
    so that we can understand what works best for which type of customers. This can
    lead to further improvements in the next marketing campaign by better targeting
    those subgroups of customers. Let's take a step further into this data.
  prefs: []
  type: TYPE_NORMAL
- en: Engagement rates by offer type and vehicle class
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In the previous section, we have learned that `Renewal Offer Type 2` worked
    best for the customers. The marketers can benefit from this information itself,
    as this finding provides a useful insight into which type of offer worked best
    and had the highest response rate from customers. However, we can gain more insights
    on how different customers with different backgrounds or characteristics react
    differently to each offer types. In this section, we will show an example of what
    you can do as a marketer to understand how customers with different attributes
    respond differently to different marketing messages.
  prefs: []
  type: TYPE_NORMAL
- en: 'Let''s see whether there is any noticeable difference in the response rates
    for each offer type for customers with different vehicle classes. We are going
    to look at the engagement rates by each offer type and `Vehicle Class` using the
    following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: As you can see from this code, we are grouping the data by two columns, `Renew
    Offer Type` and `Vehicle Class`, and computing the engagement rates for each group.
  prefs: []
  type: TYPE_NORMAL
- en: 'The result looks as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/e6ead66a-c793-4307-858d-e586838d92b5.png)'
  prefs: []
  type: TYPE_IMG
- en: 'To make this more readable, we can transform this data by using the following
    code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'As you can see from this code, we are using the `unstack` function in a `pandas`
    `DataFrame` to pivot the data and extract and transform the inner-level group
    to columns. It will be easier to look at the result. The result looks as in the
    following:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/1d7cf33a-516b-485f-a369-1139a3edb001.png)'
  prefs: []
  type: TYPE_IMG
- en: 'As you can see here, `Vehicle Class` now becomes the columns after applying
    the `unstack` function. We can visualize this data as a bar plot, using the following
    code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: 'The plot looks as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/9cdd184b-44bb-40d2-b89d-dea10a29310d.png)'
  prefs: []
  type: TYPE_IMG
- en: Let's take a closer look at this chart. We have seen that `Offer2` had the highest
    response rate among the customers in the previous section. Here, we can see how
    customers with different vehicle classes engage differently with other types of
    renewal offers. For example, customers with `Four-Door Car` respond the most frequently
    for all offer types. However, customers with `SUV` respond with a higher chance
    to `Offer1` than to `Offer2`. As you can see from these results, we can gain more
    insights by breaking down the customer demographics further. If we see any significant
    difference in the response rates among different customer segments, we can fine-tune
    who to target for different sets of offers. In our example, if we believe customers
    with `SUV` respond to `Offer1` with a significantly higher degree of engagement
    than to `Offer2`, then we can target `SUV` customers with `Offer1`. On the other
    hand, if we believe customers with `Two-Door Car` respond to `Offer2` with a significantly
    higher degree of engagement than to other offer types, then we can target `Two-Door
    Car` owners with `Offer2`.
  prefs: []
  type: TYPE_NORMAL
- en: Engagement rates by sales channel
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Let''s take a look at another example. We will analyze how engagement rates
    differ by different sales channels. Take a look at the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: 'The result looks as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/74f2b1af-c6d4-4c11-9946-a38c64ee8e71.png)'
  prefs: []
  type: TYPE_IMG
- en: 'It will be easier to look at this result with a visualization. You can use
    the following code to visualize this data:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: 'The plot looks as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/1fa55aa5-5ab3-4730-9a47-3d0a9007cfc5.png)'
  prefs: []
  type: TYPE_IMG
- en: As you can see from this plot, `Agent` works the best in terms of getting responses
    from the customers. Then, sales through `Web` works the second best. As before,
    let's break down this result deeper and analyze to see whether the behavior change
    among customers with different characteristics.
  prefs: []
  type: TYPE_NORMAL
- en: Engagement rates by sales channel and vehicle size
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In this section, we will take a look at whether customers with various vehicle
    sizes respond differently to different sales channels. Take a look at the following
    code to compute the engagement rates per sales channel and vehicle size:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: 'The result looks as in the following:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/03e1f43c-f151-4c55-9219-f9f9e1d6e624.png)'
  prefs: []
  type: TYPE_IMG
- en: 'As before, we can `unstack` this data into a more visible format, using the
    following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
- en: 'The result looks as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/afe21b5d-805d-483f-814c-e96f6b1eec0d.png)'
  prefs: []
  type: TYPE_IMG
- en: 'We can visualize these results into a bar chart, using the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs: []
  type: TYPE_PRE
- en: 'The plot now looks as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/d713eff8-a1e8-4e4c-a0e3-87f26ecb5770.png)'
  prefs: []
  type: TYPE_IMG
- en: As you can see from this plot, customers with `Medsize` vehicles respond the
    best to all sales channels. The engagement rates across different sales channels
    differ slightly between `Large` and `Small` vehicle owners. For example, `Small`
    vehicle owners respond better through `Agent` and `Call Center` channels, while
    on the other hand, `Large` vehicle owners respond better through the `Branch`
    and `Web` channels. As discussed previously, we can utilize this insight in the
    next marketing efforts. For example, as `Small` car owners respond with a higher
    chance through `Agent` and `Call Center`, we can utilize those two channels more
    heavily for `Small` car owners.
  prefs: []
  type: TYPE_NORMAL
- en: Segmenting customer base
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: We are going to briefly discuss how we can segment the customer base in this
    section. We are going to expand this concept and discuss further how we can utilize
    machine learning for customer segmentation in [Chapter 10](5955002d-2a75-4d5a-aa6a-86710a3bf00e.xhtml), *Data-Driven
    Customer Segmentation*, but this section will give you some basic idea on what
    customer segmentation is and what it looks like.
  prefs: []
  type: TYPE_NORMAL
- en: 'In this section, we will be segmenting our customer base by `Customer Lifetime
    Value` and `Months Since Policy Inception`. Feel free to try different features
    for segmenting the customer base. Take a look at the following distribution of
    the `Customer Lifetime Value` column:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/c5fc27ea-09e8-48f4-8d69-6c9f8aacb4e3.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Based on this information, we are going to define those customers with a `Customer
    Lifetime Value` higher than the median as high-CLV customers and those with a
    CLV below the median as low-CLV customers. You can use the following code for
    encoding:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs: []
  type: TYPE_PRE
- en: 'We are going to go through the same process for the `Months Since Policy Inception` field.
    Take a look at the following distribution for `Months Since Policy Inception`:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/7299d079-1270-4c64-aced-2d8172e44ec2.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Similarly, we are going to define those customers with `Months Since Policy
    Inception` higher than the median as high `Policy Age Segment` customers and those
    below the median as low `Policy Age Segment` customers. You can use the following
    code for encoding:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE15]'
  prefs: []
  type: TYPE_PRE
- en: 'We can visualize these segments using the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  prefs: []
  type: TYPE_PRE
- en: Let's take a closer look at this code. In the first code block, we are creating
    a scatter plot using the `plot.scatter` function in the `pandas` package for those
    customers in the `High CLV` and `High Policy Age` segments. By using the `logy=True`
    flag, we can easily transform the scale to log scale. Log scale is often used
    for monetary values, as they often have high skewness in their values. We repeat
    this process four times for the four segments we have created previously.
  prefs: []
  type: TYPE_NORMAL
- en: 'The resulting scatter plot looks as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/d1193fdc-9dd2-45e9-9f2b-1b791ca21712.png)'
  prefs: []
  type: TYPE_IMG
- en: As you can see from this scatter plot, the data points in red represent those
    customers in the `High CLV` and `High Policy Age` segment. Those in orange represent
    the `High CLV` and `Low Policy Age` group, those in blue represent the `Low CLV`
    and `High Policy Age` group, and lastly, those in green represent the `Low CLV`
    and `Low Policy Age` group.
  prefs: []
  type: TYPE_NORMAL
- en: 'Now that we have created these four segments, let''s see whether there is any
    noticeable difference in the engagement rates among these four segments. Take
    a look at the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  prefs: []
  type: TYPE_PRE
- en: 'As you can see from this code, we are grouping by the two newly-created columns,
    `CLV Segment` and `Policy Age Segment`, and computing the engagement rates for
    these four segments. The result looks as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/7cccfc52-40b2-48ca-8ebf-8e230e1361aa.png)'
  prefs: []
  type: TYPE_IMG
- en: 'It will be easier to look at the differences in a chart. You can use the following
    code to create a bar plot for this data:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE18]'
  prefs: []
  type: TYPE_PRE
- en: 'Now the plot looks as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/490c82bd-8555-4258-b807-c44faf44fc07.png)'
  prefs: []
  type: TYPE_IMG
- en: As you can notice from this plot, `High Policy Age Segment` has higher engagement
    than the `Low Policy Age Segment`. This suggests that those customers who have
    been insured by this company longer respond better. It is also noticeable that
    the `High Policy Age` and `Low CLV` segment has the highest engagement rate among
    the four segments. By creating different customer segments based on customer attributes,
    we can better understand how different groups of customers behave differently.
    We are going to further expand and experiment the concept of customer segmentation
    in more depth in [Chapter 9](9b3d36ba-d690-491c-9a6f-b8c00f59cfb4.xhtml), *Customer
    Lifetime Value*.
  prefs: []
  type: TYPE_NORMAL
- en: The full code for this Python exercise can be found in this link: [https://github.com/yoonhwang/hands-on-data-science-for-marketing/blob/master/ch.7/python/CustomerBehaviors.ipynb](https://github.com/yoonhwang/hands-on-data-science-for-marketing/blob/master/ch.7/python/CustomerBehaviors.ipynb)
  prefs: []
  type: TYPE_NORMAL
- en: Conducting customer analytics with R
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this section, we are going to discuss how to conduct customer analytics using
    R. We will be mainly using the `dplyr` and `ggplot2` libraries to analyze and
    visualize the customer behavior observed in the dataset. For those readers who
    would like to use Python instead of R for this exercise, you can refer to the
    previous section. We will start this section by analyzing and understanding the
    behaviors of engaged customers and then discuss a simple way to segment the customer
    base by certain criteria.
  prefs: []
  type: TYPE_NORMAL
- en: 'For this exercise, we will be using one of the publicly available datasets
    from **IBM**, which can be found at this link: [https://www.ibm.com/communities/analytics/watson-analytics-blog/marketing-customer-value-analysis/](https://www.ibm.com/communities/analytics/watson-analytics-blog/marketing-customer-value-analysis/).
    You can follow this link and download the data that is available in CSV format
    named `WA_Fn UseC_ Marketing Customer Value Analysis.csv`. Once you have downloaded
    this data, you can load it into your RStudio by running the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE19]'
  prefs: []
  type: TYPE_PRE
- en: 'Similar to the previous chapter, we are using the `read.csv` function in R to
    load the data in CSV format. Once you have loaded this data into a `DataFrame`,
    it should look as in the following:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/04ca623a-2f0b-4784-83b4-46c6fb656e33.png)'
  prefs: []
  type: TYPE_IMG
- en: As you can see from this data, there is a column named `Response`, which contains
    information about whether a customer responded to the marketing efforts. Also,
    the `Renew.Offer.Type` and `Sales.Channel` columns represent the type of renewal
    offer presented to the customer and which sales channel was used to contact the
    customer. There are numerous other columns that represent the socio-economic backgrounds
    of the customers and types of insurance coverages that the customers currently
    have. We will be utilizing this information to analyze and understand the customer
    behavior better, especially in regards to their responses and engagements with
    the marketing and sales efforts.
  prefs: []
  type: TYPE_NORMAL
- en: 'Before we dive into the data, we will encode the `Response` column into numeric
    values—`0` for `No` and `1` for `Yes`. This will make our computations easier
    for future analyses. You can use the following code for encoding:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE20]'
  prefs: []
  type: TYPE_PRE
- en: Analytics on engaged customers
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Now that we have loaded the data into our environment, we are going to analyze
    it to understand how different customers behave and react to different marketing
    strategies. We are going to follow these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Overall engagement rate
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Engagement rates by offer type
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Engagement rates by offer type and vehicle class
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Engagement rates by sales channel
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Engagement rates by sales channel and vehicle size
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Overall engagement rate
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The first thing we are going to need to understand is the overall marketing
    response or engagement rate. We can use the following code to get the total number
    of customers who have responded:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE21]'
  prefs: []
  type: TYPE_PRE
- en: As you have seen from the data, the `Response` column contains information about
    whether a customer responded to the marketing call or not (`Yes` for those who
    have responded and `No` for those who have not). We are simply grouping by this
    column by using the `group_by` function in the `dplyr` library and counting the
    number of customers in each category with the `n()` function. Then, using the `mutate`
    function, we compute the engagement rate by dividing `Count` by the total number
    of records in the `DataFrame`.
  prefs: []
  type: TYPE_NORMAL
- en: 'The result looks as in the following:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/f85d9bff-c9dd-4bb7-aa93-5a5052eff192.png)'
  prefs: []
  type: TYPE_IMG
- en: 'In order to visualize this in a plot, you can use the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE22]'
  prefs: []
  type: TYPE_PRE
- en: 'The plot looks as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/be920818-b631-4019-9ac3-09be8d7da43f.png)'
  prefs: []
  type: TYPE_IMG
- en: As you can see from these results, the majority of the customers did not respond
    to the marketing calls. As shown from the data, only about 14% of the customers
    responded to the marketing calls. We are going to now dive deeper into the customers
    who responded and get a better understanding of what worked best for them.
  prefs: []
  type: TYPE_NORMAL
- en: Engagement rates by offer type
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Different types of offers will work differently for different customers. In
    this section, we are going to look into what types of offers worked best for the
    engaged customers. Take a look at the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE23]'
  prefs: []
  type: TYPE_PRE
- en: As you can see from this code, we are grouping by the `Renew.Offer.Type`  column,
    where we have four different types of offers. Then, in the `summarise` function,
    we count the total number of records using the `n()` function, and we count the
    number of engaged customers by summing over the encoded column, `Engaged`. Lastly,
    in the `mutate` function, we compute `EngagementRate` by dividing `NumEngaged`
    by `Count` and multiplying it by `100.0`.
  prefs: []
  type: TYPE_NORMAL
- en: 'The result looks as in the following:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/5a4e6b82-dd04-41d9-8fec-16cc97cedf30.png)'
  prefs: []
  type: TYPE_IMG
- en: 'We can visualize these results in a bar plot, using the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE24]'
  prefs: []
  type: TYPE_PRE
- en: 'The bar plot now looks as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/8f482d83-3bc8-459a-bb62-6f432933a81a.png)'
  prefs: []
  type: TYPE_IMG
- en: As you can easily notice from this plot, `Offer 2` had the highest engagement
    rate among the customers. When conducting customer analytics, as discussed earlier,
    we often want to know the demographics and attributes of customers for each event,
    so that we can understand what works best for which type of customers. This can
    lead to further improvements in the next marketing campaign by better targeting
    those subgroups of customers. Let's take a step further into this data.
  prefs: []
  type: TYPE_NORMAL
- en: Engagement rates by offer type and vehicle class
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In the previous section, we have learned that `Renewal Offer Type 2` worked
    best for the customers. The marketers can benefit from this information itself,
    as this finding provides a useful insight into which type of offer worked best
    and had the highest response rate from customers. However, we can gain more insights
    on how different customers with different backgrounds or characteristics react
    differently to each offer types. In this section, we will show an example of what
    you can do as a marketer to understand how customers with different attributes
    respond differently to different marketing messages.
  prefs: []
  type: TYPE_NORMAL
- en: 'Let''s see whether there is any noticeable difference in the response rates
    for each offer type for customers with different vehicle classes. We are going
    to look at the engagement rates by each offer type and vehicle class, using the
    following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE25]'
  prefs: []
  type: TYPE_PRE
- en: As you can see from this code, we are grouping the data by two columns, `Renew.Offer.Type` and `Vehicle.Class`, and
    counting the number of engaged customers for each group. Then, we join this data
    with the `engagementRateByOfferType` variable by the `Renew.Offer.Type` column
    to get the total number of engaged customers for each offer type. Lastly, we compute
    the engagement rate in the `mutate` function.
  prefs: []
  type: TYPE_NORMAL
- en: 'The result looks as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/9035c50e-b457-4a6e-9090-26d64ae45a4c.png)'
  prefs: []
  type: TYPE_IMG
- en: 'To make this more readable, we can visualize this data using bar plots. Take
    a look at the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE26]'
  prefs: []
  type: TYPE_PRE
- en: 'Using this code, we can build a bar plot that looks as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/fcbb8d90-9491-454f-86cb-671af0b8eaeb.png)'
  prefs: []
  type: TYPE_IMG
- en: Let's take a closer look at this chart. We have seen that `Offer2` had the highest
    response rate among the customers in the previous section. Here, we can see how
    customers with different vehicle classes engage differently with other types of
    renewal offers. For example, customers with `Four-Door Car` respond the most frequently
    for all offer types. However, customers with `SUV` respond with a higher chance
    to `Offer1` than to `Offer2`. As you can see from these results, we can gain more
    insights by breaking down the customer demographics further. If we see any significant
    difference in the response rates among different customer segments, we can fine-tune
    who to target for different sets of offers. In our example, if we believe customers
    with `SUV` respond to `Offer1` with a significantly higher chance than to `Offer2`,
    then we can target `SUV` customers with `Offer1`. On the other hand, if we believe
    customers with `Two-Door Car` respond to `Offer2` with a significantly higher
    chance than to other offer types, then we can target `Two-Door Car` owners with `Offer2`.
  prefs: []
  type: TYPE_NORMAL
- en: Engagement rates by sales channel
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Let''s take a look at another example. We will analyze how engagement rates
    differ by different sales channels. Take a look at the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE27]'
  prefs: []
  type: TYPE_PRE
- en: 'The result looks as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ebbba6a4-96a6-4acb-8d62-3b079deb960b.png)'
  prefs: []
  type: TYPE_IMG
- en: 'It will be easier to understand this result with a visualization. You can use
    the following code to visualize this data:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE28]'
  prefs: []
  type: TYPE_PRE
- en: 'The plot looks as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/f8d131db-9772-4dfa-a8a3-c688bc8012e5.png)'
  prefs: []
  type: TYPE_IMG
- en: As you can see from this plot, `Agent` works best in terms of getting responses
    from the customers. Then, sales through `Web` works the second best. As before,
    let's break down this result deeper and analyze it to see whether the behavior
    changes among customers with different characteristics.
  prefs: []
  type: TYPE_NORMAL
- en: Engagement rates by sales channel and vehicle size
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In this section, we will take a look at whether customers with various vehicle
    sizes respond differently to different sales channels. Take a look at the following
    code to compute the engagement rates per sales channel and vehicle size:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE29]'
  prefs: []
  type: TYPE_PRE
- en: 'The result looks as in the following:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ab0cb4cb-5593-42e6-bcbb-11fedf3e33c7.png)'
  prefs: []
  type: TYPE_IMG
- en: 'As before, we can visualize this data in a bar plot to make it easier to read.
    You can use the following code to visualize this data:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE30]'
  prefs: []
  type: TYPE_PRE
- en: 'The plot now looks as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/7a7d9766-077a-408c-bee1-f99e71666807.png)'
  prefs: []
  type: TYPE_IMG
- en: As you can see from this plot, customers with `Medsize` vehicles respond best
    to all sales channels. The engagement rates across different sales channels differ
    slightly between `Large` and `Small` vehicle owners. For example, `Small` vehicle
    owners respond better through `Agent` and `Call Center` channels, while on the
    other hand, `Large` vehicle owners respond better through the `Branch` and `Web` channels.
    As discussed previously, we can utilize this insight in the next marketing efforts.
    For example, as `Small` car owners respond with a higher degree of engagement
    through `Agent` and `Call Center`, we can utilize those two channels more heavily
    for `Small` car owners.
  prefs: []
  type: TYPE_NORMAL
- en: Segmenting customer base
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: We are going to briefly discuss how we can segment the customer base in this
    section. We are going to expand this concept and discuss further how we can utilize
    machine learning for customer segmentation in [Chapter 9](9b3d36ba-d690-491c-9a6f-b8c00f59cfb4.xhtml),
    *Customer Lifetime Value*, but this section will give you some basic ideas on
    what customer segmentation is and what it looks like.
  prefs: []
  type: TYPE_NORMAL
- en: 'In this section, we will be segmenting our customer base by `Customer.Lifetime.Value` and `Months.Since.Policy.Inception`.
    Feel free to try different features for segmenting the customer base. Let''s first
    take a look at the following distribution of the `Customer.Lifetime.Value` column:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/1c7412fa-3581-4066-b761-2830664bdb3f.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Based on this information, we are going to define customers with a CLV higher
    than the median as high-CLV customers and those with a CLV below the median as
    low-CLV customers. You can use the following code for encoding:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE31]'
  prefs: []
  type: TYPE_PRE
- en: As you can see from this code, we have defined the `clv_encode_fn` function,
    which encodes those customers with a CLV higher than the median as `High` and
    those with a CLV lower than the median as `Low`. Then, using the `sapply` function,
    we encode the values in the `Customer.Lifetime.Value` column and store those encoded
    values as a new column named `CLV.Segment`.
  prefs: []
  type: TYPE_NORMAL
- en: 'We are going to go through the same process for the `Months.Since.Policy.Inception` field.
    Take a look at the following distribution for `Months.Since.Policy.Inception`:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/fb159b82-5b9b-483e-97f6-94b144ea0cec.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Similarly, we are going to define those customers with a `Months.Since.Policy.Inception` value
    higher than the median as high `Policy.Age.Segment` customers and those with a
    value below the median as low `Policy.Age.Segment` customers. You can use the
    following code for encoding:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE32]'
  prefs: []
  type: TYPE_PRE
- en: 'We can visualize these segments, using the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE33]'
  prefs: []
  type: TYPE_PRE
- en: Let's take a closer look at this code. We plot the High `CLV` and High `Policy
    Age` segment first in red. Then, we repeat the same process to building scatter
    plots for the High `CLV` and Low `Policy Age` group in orange, the Low `CLV` and
    Low `Policy Age` group in green, and lastly, the Low `CLV` and High `Policy Age`
    group in blue. One thing to note here is how we define the `y` values in the `aes`
    function. As you can see from this code, `y=log(Customer.Lifetime.Value)`, we
    are transforming the CLV values into log scale. Log scale is often used for monetary
    values, as they often have high skewness in their values.
  prefs: []
  type: TYPE_NORMAL
- en: 'The resulting scatter plot looks as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/bae4fa4d-8a79-4fc1-bbb5-7c5105c06f77.png)'
  prefs: []
  type: TYPE_IMG
- en: As you can see from this scatter plot, the data points in red represent those
    customers in the `High CLV` and `High Policy Age` segment. Those in orange represent
    the `High CLV` and `Low Policy Age` group, those in blue represent the `Low CLV` and `High
    Policy Age` group, and lastly, those in green represent the `Low CLV` and `Low
    Policy Age` group.
  prefs: []
  type: TYPE_NORMAL
- en: 'Now that we have created these four segments, let''s see whether there is any
    noticeable difference in engagement rates among these four segments. Take a look
    at the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE34]'
  prefs: []
  type: TYPE_PRE
- en: 'As you can see from this code, we are grouping by the two newly-created columns, `CLV.Segment` and `Policy.Age.Segment`, and
    computing the engagement rates for these four segments. The result looks as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/4537f69b-2617-4b3b-b376-d86cb5b0e817.png)'
  prefs: []
  type: TYPE_IMG
- en: 'It will be easier to understand the differences in a chart. You can use the
    following code to create a bar plot for this data:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE35]'
  prefs: []
  type: TYPE_PRE
- en: 'Now the plot looks as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/2596b8f1-3a46-4dc5-acb0-1946a0023dec.png)'
  prefs: []
  type: TYPE_IMG
- en: As you can notice from this plot, `High Policy.Age.Segment` has a higher engagement
    than `Low Policy.Age.Segment`. This suggests that those customers who have been
    insured by this company longer respond better. It is also noticeable that the `High
    Policy Age` and `Low CLV` segment has the highest engagement rate among the four
    segments. By creating different customer segments based on customer attributes,
    we can better understand how different groups of customers behave differently.
    We are going to further expand and experiment the concept of customer segmentation in more
    depth in [Chapter 9](9b3d36ba-d690-491c-9a6f-b8c00f59cfb4.xhtml), *Customer Lifetime
    Value*.
  prefs: []
  type: TYPE_NORMAL
- en: The full code for this R exercise can be found at the following link: [https://github.com/yoonhwang/hands-on-data-science-for-marketing/blob/master/ch.7/R/CustomerBehaviors.R](https://github.com/yoonhwang/hands-on-data-science-for-marketing/blob/master/ch.7/R/CustomerBehaviors.R).
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, we have discussed customer analytics. We have learned about
    what customer analytics is and the importance and benefits of conducting customer
    analytics, as well as different use cases of customer analytics. We have discussed
    how the rising accessibility of customer data to businesses and the abundance
    of data available about customers is resulting in higher competition, and we emphasized
    the importance of having a good understanding of what customers like. Conducting
    customer analytics is an important step to gain insights on the behavior of customers,
    which helps in forming better marketing strategies, optimizing sales channels,
    and making other key business decisions. Using customer analytics, you can monitor
    and track KPIs on how customers react to different products and marketing strategies,
    effectively build segments of similar customers, and build predictive models to
    improve engagement and retention rates, as well as optimize marketing channels.
  prefs: []
  type: TYPE_NORMAL
- en: In the next chapter, we are going to learn how we can use predictive analytics
    to forecast the likelihood of marketing engagements. We will discuss some of the
    machine learning algorithms that are frequently used to build predictive models
    and experiment with their prediction performances on the dataset.
  prefs: []
  type: TYPE_NORMAL

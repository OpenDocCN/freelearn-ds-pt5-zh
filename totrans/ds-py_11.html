<html><head></head><body><div id="sbo-rt-content"><div class="appendix" title="Appendix A. PixieApp Quick-Reference"><div class="titlepage"><div><div><h1 class="title"><a id="appA"/>Appendix A. PixieApp Quick-Reference</h1></div></div></div><p>This appendix is a developer quick-reference guide that provides a summary of all the PixieApp attributes.</p><div class="section" title="Annotations"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec01"/>Annotations</h1></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">@PixieApp</code>: Class annotation that must be added to any class that is a PixieApp.<p>Arguments: None</p><p>Example:</p><div class="informalexample"><pre class="programlisting">from pixiedust.display.app import *
@PixieApp
class MyApp():
    pass</pre></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">@route</code>: Method annotation required to denote that a method—which can have any name—is associated with a route.<p>Arguments: <code class="literal">**kwargs</code>. Keyword arguments (key-value pairs) representing the route definition. The PixieApp dispatcher will match the current kernel request with a route according to the following rules:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The route with the highest number of arguments get evaluated first.</li><li class="listitem" style="list-style-type: disc">All arguments must match for a route to be selected. Argument values can use <code class="literal">*</code> to denote that any value will match.</li><li class="listitem" style="list-style-type: disc">If a route is not found, then the default route (the one with no argument) is selected.</li><li class="listitem" style="list-style-type: disc">Each key of the route argument can be either a transient state (defined by the <code class="literal">pd_options</code> attribute) or persisted (field of the PixieApp class that remains present until explicitly changed).</li><li class="listitem" style="list-style-type: disc">The method can have any number of arguments. When invoking the method, the PixieApp dispatcher will try to match the method argument with the route arguments with the same name.</li></ul></div><p>Return: The method must return an HTML fragment (except if the <code class="literal">@captureOutput</code> annotation is used) that will be injected in the frontend. The method can leverage the Jinja2 template syntax to generate the HTML. The HTML template has access to a certain number of variables:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>this</strong></span>: Reference to the PixieApp class (Note that we use <code class="literal">this</code> instead of <code class="literal">self</code> because <code class="literal">self</code> is already used by the Jinja2 framework itself)</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>prefix</strong></span>: String ID that is unique to the PixieApp instance</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>entity</strong></span>: The current data entity for the request</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Method arguments</strong></span>: All arguments of the method can be accessed as a variable in the Jinja2 template<div class="informalexample"><pre class="programlisting">from pixiedust.display.app import *
@PixieApp
class MyApp():
    @route(key1=”value1”, key2=”*”)
    def myroute_screen(self, key1, key2):
        return “&lt;div&gt;fragment: Key1 = {{key1}} - Key2 = {{key2}}”</pre></div></li></ul></div><p>Example:</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note001"/>Note</h3><p>You can find the code file here:</p><p>
<a class="ulink" href="https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode25.py">https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode25.py</a>
</p></div></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">@templateArgs</code>: Annotation that enables any local variable to be used within the Jinja2 template. Note that <code class="literal">@templateArgs</code> cannot be used in combination with <code class="literal">@captureOutput</code>:<p>Arguments: None</p><p>Example:</p><div class="informalexample"><pre class="programlisting">from pixiedust.display.app import *
@PixieApp
class MyApp():
    @route(key1=”value1”, key2=”*”)
    @templateArgs
    def myroute_screen(self, key1, key2):
        local_var = “some value”
        return “&lt;div&gt;fragment: local_var = {{local_var}}”</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note002"/>Note</h3><p>You can find the code file here:</p><p>
<a class="ulink" href="https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode26.py">https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode26.py</a>
</p></div></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">@captureOutput</code>: Annotation that changes the contract with the route method, so that it doesn’t have to return an HTML fragment anymore. Instead, the method body can simply output the results as it would in a Notebook cell. The framework will capture the output and return it as HTML. Note that you cannot use Jinja2 template in this case.<p>Arguments: None</p><p>Example:</p><div class="informalexample"><pre class="programlisting">from pixiedust.display.app import *
import matplotlib.pyplot as plt
@PixieApp
class MyApp():
    @route()
    @captureOutput
    def main_screen(self):
        plt.plot([1,2,3,4])
        plt.show()</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note003"/>Note</h3><p>You can find the code file here:</p><p>
<a class="ulink" href="https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode27.py">https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode27.py</a>
</p></div></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">@Logger</code>: Add logging capabilities by adding logging methods to the class: <code class="literal">debug</code>, <code class="literal">warn</code>, <code class="literal">info</code>, <code class="literal">error</code>, <code class="literal">critical</code>, <code class="literal">exception</code>.<p>Arguments: None</p><p>Example:</p><div class="informalexample"><pre class="programlisting">from pixiedust.display.app import *
from pixiedust.utils import Logger
@PixieApp
@Logger()
class MyApp():
    @route()
    def main_screen(self):
        self.debug(“In main_screen”)
        return “&lt;div&gt;Hello World&lt;/div&gt;”</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note004"/>Note</h3><p>You can find the code file here:</p><p>
<a class="ulink" href="https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode28.py">https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode28.py</a>
</p></div></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note005"/>Note</h3><p>You can find the code file here:</p><p>
<a class="ulink" href="https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode28.py">https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode28.py</a>
</p></div></div></li></ul></div></div></div></div>



  
<div id="sbo-rt-content"><div class="section" title="Custom HTML attributes"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec02"/>Custom HTML attributes</h1></div></div></div><p>These can be used with any regular HTML elements to configure kernel requests. The PixieApp framework can trigger these requests when the element receives a click or change event, or right after the HTML fragment has completed loading.</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">pd_options</code>: List of key-value pairs that define transient states for the kernel request, according to the following format: <code class="literal">pd_options=”key1=value1;key2=value2;...”</code>. When used in combination with the <code class="literal">pd_entity</code> attribute, the <code class="literal">pd_options</code> attribute invokes the PixieDust <code class="literal">display()</code> API. In this case, you can get the values from the metadata of a separate Notebook cell in which you have used the <code class="literal">display()</code> API. When using <code class="literal">pd_options</code> in <code class="literal">display()</code> mode, it is recommended for convenience, to use the JSON notation of <code class="literal">pd_options</code> by creating a child element called <code class="literal">&lt;pd_options&gt;</code> and include the JSON values as text.<p>Example with <code class="literal">pd_options</code> as child element invoking <code class="literal">display()</code>:</p><div class="informalexample"><pre class="programlisting">&lt;div pd_entity&gt;
    &lt;pd_options&gt;
        {
            “mapboxtoken”: “XXXXX”,
            “chartsize”: “90”,
            “aggregation”: “SUM”,
            “rowCount”: “500”,
            “handlerId”: “mapView”,
            “rendererId”: “mapbox”,
            “valueFields”: “IncidntNum”,
            “keyFields”: “X,Y”,
            “basemap”: “light-v9”
        }
    &lt;/pd_options&gt;
&lt;/div&gt;</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note006"/>Note</h3><p>You can find the code file here:</p><p>
<a class="ulink" href="https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode29.html">https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode29.html</a>
</p></div></div><p>Example with <code class="literal">pd_options</code> as HTML attribute:</p><div class="informalexample"><pre class="programlisting">&lt;!-- Invoke a route that displays a chart --&gt;
&lt;button type=”submit” pd_options=”showChart=true” pd_target=”chart{{prefix}}”&gt;
    Show Chart
&lt;/button&gt;</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note007"/>Note</h3><p>You can find the code file here:</p><p>
<a class="ulink" href="https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode30.html">https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode30.html</a>
</p></div></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">pd_entity</code>: Used only to invoke the <code class="literal">display()</code> API on specific data. Must be used in combination with <code class="literal">pd_options</code> where key-value pairs will be used as arguments to <code class="literal">display()</code>. If no value is specified for the <code class="literal">pd_entity</code> attribute, then it is assumed to be the entity passed to the <code class="literal">run</code> method that starts the PixieApp. The <code class="literal">pd_entity</code> value can be either a variable defined in the Notebook or a field of the PixieApp (for example, <code class="literal">pd_entity=”df”</code>), or a field to an object using the dot notation (for example, <code class="literal">pd_entity=”obj_instance.df”</code>).</li><li class="listitem" style="list-style-type: disc"><code class="literal">pd_target</code>: By default, the output of a kernel request is injected in the overall output cell or dialog (if you use <code class="literal">runInDialog=”true”</code> as an argument to the <code class="literal">run</code> method). However, you can use <code class="literal">pd_target=”elementId”</code> to specify a target element that will receive the output. (Note that the <code class="literal">elementId</code> must exist in the current view.)<p>Example:</p><div class="informalexample"><pre class="programlisting">&lt;div id=”chart{{prefix}}”&gt;
&lt;button type=”submit” pd_options=”showChart=true” pd_target=”chart{{prefix}}”&gt;
    Show Chart
&lt;/button&gt;
&lt;/div&gt;</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note008"/>Note</h3><p>You can find the code file here:</p><p>
<a class="ulink" href="https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode31.html">https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode31.html</a>
</p></div></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">pd_script</code>: This invokes arbitrary Python code as part of the kernel request. This can be used in combination with other attributes like <code class="literal">pd_entity</code> and <code class="literal">pd_options</code>. It’s important to note that the Python indentation rules (<a class="ulink" href="https://docs.python.org/2.0/ref/indentation.html">https://docs.python.org/2.0/ref/indentation.html</a>) must be respected to avoid a runtime error.<p>If the Python code contains multiple lines, it is recommended to use <code class="literal">pd_script</code> as a child element and store the code as text.</p><p>Example:</p><div class="informalexample"><pre class="programlisting">&lt;!-- Invoke a method to load a dataframe before visualizing it --&gt;
&lt;div id=”chart{{prefix}}”&gt;
&lt;button type=”submit”
    pd_entity=”df”
    pd_script=”self.df = self.load_df()”
    pd_options=”handlerId=dataframe”
    pd_target=”chart{{prefix}}”&gt;
    Show Chart
&lt;/button&gt;
&lt;/div&gt;</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note009"/>Note</h3><p>You can find the code file here:</p><p>
<a class="ulink" href="https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode32.html">https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode32.html</a>
</p></div></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">pd_app</code>: This dynamically invokes a separate PixieApp by its fully qualified class name. The <code class="literal">pd_options</code> attribute can be used to pass route arguments to invoke a specific route of the PixieApp.<p>Example:</p><div class="informalexample"><pre class="programlisting">&lt;div pd_render_onload
     pd_option=”show_route_X=true”
     pd_app=”some.package.RemoteApp”&gt;
&lt;/div&gt;</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note0010"/>Note</h3><p>You can find the code file here:</p><p>
<a class="ulink" href="https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode33.html">https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode33.html</a>
</p></div></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">pd_render_onload</code>: This should be used to trigger a kernel request upon loading, as opposed to when a user clicks on an element or when a change event occurs. The <code class="literal">pd_render_onload</code> attribute can be combined with any other attribute that defines the request, like <code class="literal">pd_options</code> or <code class="literal">pd_script</code>. Note that this attribute should only be used with a div element.<p>Example:</p><div class="informalexample"><pre class="programlisting">&lt;div pd_render_onload&gt;
    &lt;pd_script&gt;
print(‘hello world rendered on load’)
    &lt;/pd_script&gt;
&lt;/div&gt;</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note0011"/>Note</h3><p>You can find the code file here:</p><p>
<a class="ulink" href="https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode34.html">https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode34.html</a>
</p></div></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">pd_refresh</code>: This is used to force the HTML element to execute a kernel request even if no event (click or change event) has occurred. If no value is specified, then the current element is refreshed, otherwise, the element with the ID specified in the value will be refreshed.<p>Example:</p><div class="informalexample"><pre class="programlisting">&lt;!-- Update state before refreshing a chart --&gt;
&lt;button type=”submit”
    pd_script=”self.show_line_chart()”
    pd_refresh=”chart{{prefix}}”&gt;
    Show line chart
&lt;/button&gt;</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note0012"/>Note</h3><p>You can find the code file here:</p><p>
<a class="ulink" href="https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode35.html">https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode35.html</a>
</p></div></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">pd_event_payload</code>: This emits a PixieApp event with the specified payload content. This attribute follows the same rules as <code class="literal">pd_options</code>:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Each key-value pair must be encoded using the <code class="literal">key=value</code> notation</li><li class="listitem" style="list-style-type: disc">The event will be triggered on a click or a change event</li><li class="listitem" style="list-style-type: disc">Support for <code class="literal">$val()</code> directive to dynamically inject user entered input</li><li class="listitem" style="list-style-type: disc">Use <code class="literal">&lt;pd_event_payload&gt;</code> child to enter raw JSON.<div class="informalexample"><pre class="programlisting">&lt;button type=”submit” pd_event_payload=”type=topicA;message=Button clicked”&gt;
    Send event A
&lt;/button&gt;
&lt;button type=”submit”&gt;
    &lt;pd_event_payload&gt;
    {
        “type”:”topicA”,
        “message”:”Button Clicked”
    }
    &lt;/pd_event_payload&gt;
    Send event A
&lt;/button&gt;</pre></div></li></ul></div><p>Example:</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note0013"/>Note</h3><p>You can find the code file here:</p><p>
<a class="ulink" href="https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode36.html">https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode36.html</a>
</p></div></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">pd_event_handler</code>: Subscribers can listen to an event by declaring a <code class="literal">&lt;pd_event_handler&gt;</code> child element which can accept any of the PixieApp kernel execution attributes like <code class="literal">pd_options</code> and <code class="literal">pd_script</code>. This element must use the <code class="literal">pd_source</code> attribute to filter which events they want to process. The <code class="literal">pd_source</code> attribute can contain one of the following values:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">targetDivId</code>: Only events originating from the element with the specified ID will be accepted</li><li class="listitem" style="list-style-type: disc"><code class="literal">type</code>: Only events with the specified type will be accepted<div class="informalexample"><pre class="programlisting">&lt;div class=”col-sm-6” id=”listenerA{{prefix}}”&gt;
    Listening to button event
    &lt;pd_event_handler
        pd_source=”topicA”
        pd_script=”print(eventInfo)”
        pd_target=”listenerA{{prefix}}”&gt;
    &lt;/pd_event_handler&gt;
&lt;/div&gt;</pre></div></li></ul></div><p>Example:</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note0014"/>Note</h3><p>You can find the code file here:</p><p>
<a class="ulink" href="https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode37.html">https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode37.html</a>
</p><p>
<span class="strong"><strong>Note</strong></span>: Using <code class="literal">*</code> for <code class="literal">pd_source</code> denotes that all events will be accepted.</p></div></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">pd_refresh_rate</code>: This is used to repeat the execution of an element at a specified interval expressed in milliseconds. This is useful for when you want to poll the state of a particular variable and show the result in the UI.<p>Example:</p><div class="informalexample"><pre class="programlisting">&lt;div pd_refresh_rate=”3000”
    pd_script=”print(self.get_status())”&gt;
&lt;/div&gt;</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note0015"/>Note</h3><p>You can find the code file here:</p><p>
<a class="ulink" href="https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode38.html">https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode38.html</a>
</p></div></div></li></ul></div></div></div>



  
<div id="sbo-rt-content"><div class="section" title="Methods"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec03"/>Methods</h1></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">setup</code>: This is an optional method implemented by the PixieApp to initialize its state. Will be automatically invoked before the PixieApp runs.<p>Arguments: None</p><p>Example:</p><div class="informalexample"><pre class="programlisting">def setup(self):
    self.var1 = “some initial value”
    self.pandas_dataframe = pandas.DataFrame(data)</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note0016"/>Note</h3><p>You can find the code file here:</p><p>
<a class="ulink" href="https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode39.py">https://github.com/DTAIEB/Thoughtful-Data-Science/blob/master/chapter%205/sampleCode39.py</a>
</p></div></div></li><li class="listitem" style="list-style-type: disc"><code class="literal">run</code>: This starts the PixieApp.<p>Arguments:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>entity</strong></span>: [Optional] Dataset passed as input to the PixieApp. Can be referenced with the <code class="literal">pd_entity</code> attribute or directly as a field called <code class="literal">pixieapp_entity</code>.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>**kwargs</strong></span>: Keyword arguments to be passed to the PixieApp when it runs. For example, using <code class="literal">runInDialog=”true”</code> will start the PixieApp in a dialog.<div class="informalexample"><pre class="programlisting">app = MyPixieApp()
app.run(runInDialog=”true”)</pre></div></li></ul></div><p>Example:</p></li><li class="listitem" style="list-style-type: disc"><code class="literal">invoke_route</code>: This is used to programmatically invoke a route.<p>Arguments:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Route method</strong></span>: Method to be invoked.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>**kwargs</strong></span>: Keyword arguments to be passed to the route method.<div class="informalexample"><pre class="programlisting">app.invoke_route(app.route_method, arg1 = “value1”, arg2 = “value2”)</pre></div></li></ul></div><p>Example:</p></li><li class="listitem" style="list-style-type: disc"><code class="literal">getPixieAppEntity</code>: This is used to retrieve the current PixieApp entity (which can be None) passed when calling the <code class="literal">run()</code> method. <code class="literal">getPixieAppEntity()</code> is typically called from within the PixieApp itself, that is:<div class="informalexample"><pre class="programlisting">self.getPixieAppEntity()</pre></div></li></ul></div></div></div>



  </body></html>